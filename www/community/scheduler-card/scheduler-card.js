!function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function t(e,t,r,i){var s,a=arguments.length,n=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(a<3?s(n):a>3?s(t,r,n):s(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */}const r="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(e,t,r=null)=>{for(;t!==r;){const r=t.nextSibling;e.removeChild(t),t=r}},s=`{{lit-${String(Math.random()).slice(2)}}}`,a=`\x3c!--${s}--\x3e`,n=new RegExp(`${s}|${a}`);class o{constructor(e,t){this.parts=[],this.element=t;const r=[],i=[],a=document.createTreeWalker(t.content,133,null,!1);let o=0,l=-1,h=0;const{strings:p,values:{length:m}}=e;for(;h<m;){const e=a.nextNode();if(null!==e){if(l++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:r}=t;let i=0;for(let e=0;e<r;e++)c(t[e].name,"$lit$")&&i++;for(;i-- >0;){const t=p[h],r=u.exec(t)[2],i=r.toLowerCase()+"$lit$",s=e.getAttribute(i);e.removeAttribute(i);const a=s.split(n);this.parts.push({type:"attribute",index:l,name:r,strings:a}),h+=a.length-1}}"TEMPLATE"===e.tagName&&(i.push(e),a.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(s)>=0){const i=e.parentNode,s=t.split(n),a=s.length-1;for(let t=0;t<a;t++){let r,a=s[t];if(""===a)r=d();else{const e=u.exec(a);null!==e&&c(e[2],"$lit$")&&(a=a.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),r=document.createTextNode(a)}i.insertBefore(r,e),this.parts.push({type:"node",index:++l})}""===s[a]?(i.insertBefore(d(),e),r.push(e)):e.data=s[a],h+=a}}else if(8===e.nodeType)if(e.data===s){const t=e.parentNode;null!==e.previousSibling&&l!==o||(l++,t.insertBefore(d(),e)),o=l,this.parts.push({type:"node",index:l}),null===e.nextSibling?e.data="":(r.push(e),l--),h++}else{let t=-1;for(;-1!==(t=e.data.indexOf(s,t+1));)this.parts.push({type:"node",index:-1}),h++}}else a.currentNode=i.pop()}for(const e of r)e.parentNode.removeChild(e)}}const c=(e,t)=>{const r=e.length-t.length;return r>=0&&e.slice(r)===t},l=e=>-1!==e.index,d=()=>document.createComment(""),u=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function h(e,t){const{element:{content:r},parts:i}=e,s=document.createTreeWalker(r,133,null,!1);let a=m(i),n=i[a],o=-1,c=0;const l=[];let d=null;for(;s.nextNode();){o++;const e=s.currentNode;for(e.previousSibling===d&&(d=null),t.has(e)&&(l.push(e),null===d&&(d=e)),null!==d&&c++;void 0!==n&&n.index===o;)n.index=null!==d?-1:n.index-c,a=m(i,a),n=i[a]}l.forEach(e=>e.parentNode.removeChild(e))}const p=e=>{let t=11===e.nodeType?0:1;const r=document.createTreeWalker(e,133,null,!1);for(;r.nextNode();)t++;return t},m=(e,t=-1)=>{for(let r=t+1;r<e.length;r++){const t=e[r];if(l(t))return r}return-1};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const v=new WeakMap,f=e=>"function"==typeof e&&v.has(e),g={},y={};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class _{constructor(e,t,r){this.__parts=[],this.template=e,this.processor=t,this.options=r}update(e){let t=0;for(const r of this.__parts)void 0!==r&&r.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=r?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],i=this.template.parts,s=document.createTreeWalker(e,133,null,!1);let a,n=0,o=0,c=s.nextNode();for(;n<i.length;)if(a=i[n],l(a)){for(;o<a.index;)o++,"TEMPLATE"===c.nodeName&&(t.push(c),s.currentNode=c.content),null===(c=s.nextNode())&&(s.currentNode=t.pop(),c=s.nextNode());if("node"===a.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(c.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,a.name,a.strings,this.options));n++}else this.__parts.push(void 0),n++;return r&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const b=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),w=` ${s} `;class E{constructor(e,t,r,i){this.strings=e,this.values=t,this.type=r,this.processor=i}getHTML(){const e=this.strings.length-1;let t="",r=!1;for(let i=0;i<e;i++){const e=this.strings[i],n=e.lastIndexOf("\x3c!--");r=(n>-1||r)&&-1===e.indexOf("--\x3e",n+1);const o=u.exec(e);t+=null===o?e+(r?w:a):e.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+s}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==b&&(t=b.createHTML(t)),e.innerHTML=t,e}}
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const P=e=>null===e||!("object"==typeof e||"function"==typeof e),S=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class k{constructor(e,t,r){this.dirty=!0,this.element=e,this.name=t,this.strings=r,this.parts=[];for(let e=0;e<r.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new x(this)}_getValue(){const e=this.strings,t=e.length-1,r=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=r[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!S(e))return e}let i="";for(let s=0;s<t;s++){i+=e[s];const t=r[s];if(void 0!==t){const e=t.value;if(P(e)||!S(e))i+="string"==typeof e?e:String(e);else for(const t of e)i+="string"==typeof t?t:String(t)}}return i+=e[t],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class x{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===g||P(e)&&e===this.value||(this.value=e,f(e)||(this.committer.dirty=!0))}commit(){for(;f(this.value);){const e=this.value;this.value=g,e(this)}this.value!==g&&this.committer.commit()}}class ${constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(d()),this.endNode=e.appendChild(d())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=d()),e.__insert(this.endNode=d())}insertAfterPart(e){e.__insert(this.startNode=d()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;f(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=g,e(this)}const e=this.__pendingValue;e!==g&&(P(e)?e!==this.value&&this.__commitText(e):e instanceof E?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):S(e)?this.__commitIterable(e):e===y?(this.value=y,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,r="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=r:this.__commitNode(document.createTextNode(r)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof _&&this.value.template===t)this.value.update(e.values);else{const r=new _(t,e.processor,this.options),i=r._clone();r.update(e.values),this.__commitNode(i),this.value=r}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let r,i=0;for(const s of e)r=t[i],void 0===r&&(r=new $(this.options),t.push(r),0===i?r.appendIntoPart(this):r.insertAfterPart(t[i-1])),r.setValue(s),r.commit(),i++;i<t.length&&(t.length=i,this.clear(r&&r.endNode))}clear(e=this.startNode){i(this.startNode.parentNode,e.nextSibling,this.endNode)}}class O{constructor(e,t,r){if(this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=r}setValue(e){this.__pendingValue=e}commit(){for(;f(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=g,e(this)}if(this.__pendingValue===g)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=g}}class j extends k{constructor(e,t,r){super(e,t,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new C(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class C extends x{}let D=!1;(()=>{try{const e={get capture(){return D=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class z{constructor(e,t,r){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=r,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;f(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=g,e(this)}if(this.__pendingValue===g)return;const e=this.__pendingValue,t=this.value,r=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),i=null!=e&&(null==t||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=A(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=g}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const A=e=>e&&(D?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */;function T(e){let t=N.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},N.set(e.type,t));let r=t.stringsArray.get(e.strings);if(void 0!==r)return r;const i=e.strings.join(s);return r=t.keyString.get(i),void 0===r&&(r=new o(e,e.getTemplateElement()),t.keyString.set(i,r)),t.stringsArray.set(e.strings,r),r}const N=new Map,R=new WeakMap;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const F=new
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
class{handleAttributeExpressions(e,t,r,i){const s=t[0];if("."===s){return new j(e,t.slice(1),r).parts}if("@"===s)return[new z(e,t.slice(1),i.eventContext)];if("?"===s)return[new O(e,t.slice(1),r)];return new k(e,t,r).parts}handleTextExpression(e){return new $(e)}};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const I=(e,...t)=>new E(e,t,"html",F)
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */,M=(e,t)=>`${e}--${t}`;let L=!0;void 0===window.ShadyCSS?L=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),L=!1);const V=e=>t=>{const r=M(t.type,e);let i=N.get(r);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},N.set(r,i));let a=i.stringsArray.get(t.strings);if(void 0!==a)return a;const n=t.strings.join(s);if(a=i.keyString.get(n),void 0===a){const r=t.getTemplateElement();L&&window.ShadyCSS.prepareTemplateDom(r,e),a=new o(t,r),i.keyString.set(n,a)}return i.stringsArray.set(t.strings,a),a},U=["html","svg"],q=new Set,H=(e,t,r)=>{q.add(e);const i=r?r.element:document.createElement("template"),s=t.querySelectorAll("style"),{length:a}=s;if(0===a)return void window.ShadyCSS.prepareTemplateStyles(i,e);const n=document.createElement("style");for(let e=0;e<a;e++){const t=s[e];t.parentNode.removeChild(t),n.textContent+=t.textContent}(e=>{U.forEach(t=>{const r=N.get(M(t,e));void 0!==r&&r.keyString.forEach(e=>{const{element:{content:t}}=e,r=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{r.add(e)}),h(e,r)})})})(e);const o=i.content;r?function(e,t,r=null){const{element:{content:i},parts:s}=e;if(null==r)return void i.appendChild(t);const a=document.createTreeWalker(i,133,null,!1);let n=m(s),o=0,c=-1;for(;a.nextNode();){c++;for(a.currentNode===r&&(o=p(t),r.parentNode.insertBefore(t,r));-1!==n&&s[n].index===c;){if(o>0){for(;-1!==n;)s[n].index+=o,n=m(s,n);return}n=m(s,n)}}}(r,n,o.firstChild):o.insertBefore(n,o.firstChild),window.ShadyCSS.prepareTemplateStyles(i,e);const c=o.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)t.insertBefore(c.cloneNode(!0),t.firstChild);else if(r){o.insertBefore(n,o.firstChild);const e=new Set;e.add(n),h(r,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const Q={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},B=(e,t)=>t!==e&&(t==t||e==e),K={attribute:!0,type:String,converter:Q,reflect:!1,hasChanged:B};class W extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,r)=>{const i=this._attributeNameForProperty(r,t);void 0!==i&&(this._attributeToPropertyMap.set(i,r),e.push(i))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=K){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const r="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(i){const s=this[e];this[t]=i,this.requestUpdateInternal(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||K}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const r of t)this.createProperty(r,e[r])}}static _attributeNameForProperty(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,r=B){return r(e,t)}static _propertyValueFromAttribute(e,t){const r=t.type,i=t.converter||Q,s="function"==typeof i?i:i.fromAttribute;return s?s(e,r):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const r=t.type,i=t.converter;return(i&&i.toAttribute||Q.toAttribute)(e,r)}initialize(){this._updateState=0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,r){t!==r&&this._attributeToProperty(e,r)}_propertyToAttribute(e,t,r=K){const i=this.constructor,s=i._attributeNameForProperty(e,r);if(void 0!==s){const e=i._propertyValueToAttribute(t,r);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(s):this.setAttribute(s,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const r=this.constructor,i=r._attributeToPropertyMap.get(e);if(void 0!==i){const e=r.getPropertyOptions(i);this._updateState=16|this._updateState,this[i]=r._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,r){let i=!0;if(void 0!==e){const s=this.constructor;r=r||s.getPropertyOptions(e),s._valueHasChanged(this[e],t,r.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==r.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,r))):i=!1}!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}W.finalized=!0;
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
const G=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:r,elements:i}=t;return{kind:r,elements:i,finisher(t){window.customElements.define(e,t)}}})(e,t),Y=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(r){r.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}};function J(e){return(t,r)=>void 0!==r?((e,t,r)=>{t.constructor.createProperty(r,e)})(e,t,r):Y(e,t)}
/**
    @license
    Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at
    http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
    http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
    found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
    part of the polymer project is also subject to an additional IP rights grant
    found at http://polymer.github.io/PATENTS.txt
    */const Z=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,X=Symbol();class ee{constructor(e,t){if(t!==X)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(Z?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const te=(e,...t)=>{const r=t.reduce((t,r,i)=>t+(e=>{if(e instanceof ee)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+e[i+1],e[0]);return new ee(r,X)};
/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */
(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const re={};class ie extends W{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,r)=>e.reduceRight((e,r)=>Array.isArray(r)?t(r,e):(e.add(r),e),r),r=t(e,new Set),i=[];r.forEach(e=>i.unshift(e)),this._styles=i}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!Z){const t=Array.prototype.slice.call(e.cssRules).reduce((e,t)=>e+t.cssText,"");return new ee(String(t),X)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Z?this.renderRoot.adoptedStyleSheets=e.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==re&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return re}}ie.finalized=!0,ie.render=(e,t,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const s=r.scopeName,a=R.has(t),n=L&&11===t.nodeType&&!!t.host,o=n&&!q.has(s),c=o?document.createDocumentFragment():t;if(((e,t,r)=>{let s=R.get(t);void 0===s&&(i(t,t.firstChild),R.set(t,s=new $(Object.assign({templateFactory:T},r))),s.appendInto(t)),s.setValue(e),s.commit()})(e,c,Object.assign({templateFactory:V(s)},r)),o){const e=R.get(c);R.delete(c);const r=e.value instanceof _?e.value.template:void 0;H(s,c,r),i(t,t.firstChild),t.appendChild(c),R.set(t,e)}!a&&n&&window.ShadyCSS.styleElement(t.host)};var se=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ae="[^\\s]+",ne=/\[([^]*?)\]/gm;function oe(e,t){for(var r=[],i=0,s=e.length;i<s;i++)r.push(e[i].substr(0,t));return r}var ce=function(e){return function(t,r){var i=r[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return i>-1?i:null}};function le(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0,s=t;i<s.length;i++){var a=s[i];for(var n in a)e[n]=a[n]}return e}var de=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ue=["January","February","March","April","May","June","July","August","September","October","November","December"],he=oe(ue,3),pe={dayNamesShort:oe(de,3),dayNames:de,monthNamesShort:he,monthNames:ue,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},me=le({},pe),ve=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},fe={D:function(e){return String(e.getDate())},DD:function(e){return ve(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return ve(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return ve(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return ve(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return ve(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return ve(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return ve(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return ve(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return ve(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return ve(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return ve(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+ve(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+ve(Math.floor(Math.abs(t)/60),2)+":"+ve(Math.abs(t)%60,2)}},ge=function(e){return+e-1},ye=[null,"[1-9]\\d?"],_e=[null,ae],be=["isPm",ae,function(e,t){var r=e.toLowerCase();return r===t.amPm[0]?0:r===t.amPm[1]?1:null}],we=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var r=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?r:-r}return 0}],Ee=(ce("monthNamesShort"),ce("monthNames"),{default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"});var Pe=function(e,t,r){if(void 0===t&&(t=Ee.default),void 0===r&&(r={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var i=[];t=(t=Ee[t]||t).replace(ne,(function(e,t){return i.push(t),"@@@"}));var s=le(le({},me),r);return(t=t.replace(se,(function(t){return fe[t](e,s)}))).replace(/@@@/g,(function(){return i.shift()}))};(function(){try{(new Date).toLocaleDateString("i")}catch(e){return"RangeError"===e.name}})(),function(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}}(),function(){try{(new Date).toLocaleTimeString("i")}catch(e){return"RangeError"===e.name}}();function Se(e){return e.substr(0,e.indexOf("."))}function ke(e){return e.substr(e.indexOf(".")+1)}var xe,$e,Oe,je=function(e,t,r,i){i=i||{},r=null==r?{}:r;var s=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return s.detail=r,e.dispatchEvent(s),s};!function(e){e.Level="LEVEL",e.List="LIST"}(xe||(xe={})),function(e){e.Equal="is",e.Unequal="not",e.Below="below",e.Above="above"}($e||($e={})),function(e){e.Any="or",e.All="and"}(Oe||(Oe={}));var Ce={add:"přidat plán",cancel:"zrušit",next:"další",save:"uložit",delete:"smazat"},De={no_group_selected:"Vyberte skupinu",no_entity_selected:"Vyberte entitu",no_groups_defined:"Nejsou definovány žádné skupiny",no_entities_for_group:"V této skupině nejsou žádné entity",no_actions_for_entity:"Pro tuto entitu neexistují žádné akce",no_entries_defined:"Nejsou žádné položky k zobrazení"},ze={group:"Skupiny",entity:"Entity",action:"Akce",days:"Dny",time:"Čas",options:"Možnosti",day_type_daily:"denně",day_type_workday:"pracovní dny",day_type_weekend:"víkend",day_type_custom:"možnosti"},Ae={mon:"po",tue:"út",wed:"st",thu:"čt",fri:"pá",sat:"so",sun:"ne"},Te={mon:"Pondělí",tue:"Úterý",wed:"Středa",thu:"Čtvrtek",fri:"Pátek",sat:"Sobota",sun:"Neděle"},Ne={and:"a",before:"před",after:"po"},Re={turn_on:"zapnout",turn_on_brightness:"zapnout {at brightness}",turn_off:"vypnout",close_cover:"zavřít",open_cover:"otevřít",set_temperature:"nastavená teplota {to temperature}",set_temperature_hvac_mode_heat:"topení {to temperature}",set_temperature_hvac_mode_cool:"chlazení {to temperature}",set_cover_position:"nastavit pozici {to position}",set_hvac_mode:"nastavit režim {to hvac_mode}",set_hvac_mode_hvac_mode_off:"vypnout",set_preset_mode:"předvolba {to preset_mode}",set_value:"nastavená hodnota {to value}",select_option:"vyberte možnost {option}",select_source:"vyberte zdroj {source}",start:"start",run_script:"běží"},Fe={brightness:"jas",temperature:"teplota",position:"pozice",hvac_mode:"režim",preset_mode:"přednastavení"},Ie={camera:"kamery",climate:"klima",cover:"kryty",fan:"ventilátory",group:"skupiny",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",light:"světla",media_player:"media přehrávače",scene:"scény",switch:"spínače",vacuum:"vysavače"},Me={tomorrow:"zítra",daily:"denně",daily_except_days:"každý den kromě {days}",working_days:"pracovní dny",weekend:"víkend",interval:"{startDay} do {endDay}"},Le={absolute:"v {time}",relative:"za {time}",interval:"od {startTime} do {endTime}",seconds:"{seconds} vteřin",hour:"1 hodina",hours:"{hours} hodin",minute:"1 minuta",minutes:"{minutes} minut",now:"nyní",midnight:"půlnoc",noon:"poledne",at_sun_event:"při {sunEvent}",sun_event_sunrise:"svítání",sun_event_sunset:"západu slunce"},Ve={one_additional_task:"1 další úkol",x_additional_tasks:"{count} úkolů"},Ue={scheduler:"Plánovač",actions:Ce,instructions:De,fields:ze,days_short:Ae,days_long:Te,words:Ne,services:Re,service_parameters:Fe,domains:Ie,days:Me,time:Le,misc:Ve},qe=Object.freeze({__proto__:null,scheduler:"Plánovač",actions:Ce,instructions:De,fields:ze,days_short:Ae,days_long:Te,words:Ne,services:Re,service_parameters:Fe,domains:Ie,days:Me,time:Le,misc:Ve,default:Ue}),He={add:"hinzufügen",cancel:"abbrechen",next:"weiter",save:"speichern",delete:"löschen"},Qe={no_group_selected:"Wähle zuerst eine Gruppe aus",no_entity_selected:"Wähle zuerst eine Entity aus",no_groups_defined:"Es gibt keine Gruppe",no_entities_for_group:"Es gibt keine Entities in dieser Gruppe",no_actions_for_entity:"Es gibt keine Aktionen für diese Entity",no_entries_defined:"Es gibt keine Einträge"},Be={group:"Gruppe",entity:"Entity",action:"Aktion",days:"Tage",time:"Zeit",options:"Optionen",day_type_daily:"jeden Tag",day_type_workday:"Werktags",day_type_weekend:"Wochenende",day_type_custom:"benutzerdefiniert"},Ke={mon:"Mo",tue:"Di",wed:"Mi",thu:"Do",fri:"Fr",sat:"Sa",sun:"So"},We={mon:"Montag",tue:"Dienstag",wed:"Mittwoch",thu:"Donnerstag",fri:"Freitag",sat:"Samstag",sun:"Sonntag"},Ge={and:"und",before:"vor",after:"nach"},Ye={turn_on:"anschalten",turn_on_brightness:"anschalten {auf brightness}",turn_off:"ausschalten",close_cover:"schließen",open_cover:"öffnen",set_temperature:"Temperatur einstellen {auf temperature}",set_temperature_hvac_mode_heat:"aufwärmen {auf temperature}",set_temperature_hvac_mode_cool:"kühlen {auf temperature}",set_cover_position:"Position setzen {nach position}",set_hvac_mode:"Modus setzen {zu hvac_mode}",set_hvac_mode_hvac_mode_off:"ausschalten",set_preset_mode:"Voreinstellung setzen {zu preset_mode}",set_value:"Wert setzen {zu value}",select_option:"Option {option} auswählen",select_source:"Quelle {source} auswählen",start:"start",run_script:"ausführen"},Je={brightness:"Helligkeit",temperature:"Temperatur",position:"Position",hvac_mode:"Modus",preset_mode:"Voreinstellung"},Ze={camera:"Kameras",climate:"Heizung",cover:"Beschattung",fan:"Lüfter",group:"Gruppen",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",light:"Licht",media_player:"Media Player",scene:"Szene",switch:"Schalter",vacuum:"Staubsauger"},Xe={tomorrow:"morgen",daily:"täglich",daily_except_days:"täglich außer {days}",working_days:"Werktags",weekend:"Wochenende",interval:"{startDay} bis {endDay}"},et={absolute:"um {time}",relative:"in {time}",interval:"von {startTime} bis {endTime}",seconds:"{seconds} Sekunden",hour:"1 Stunde",hours:"{hours} Stunden",minute:"1 Minute",minutes:"{minutes} Minuten",now:"jetzt",midnight:"Mitternacht",noon:"Mittag",at_sun_event:"am {sunEvent}",sun_event_sunrise:"Sonnenaufgang",sun_event_sunset:"Sonnenuntergang"},tt={one_additional_task:"1 weitere Aufgabe",x_additional_tasks:"{count} weitere Aufgaben"},rt={scheduler:"Zeitplaner",actions:He,instructions:Qe,fields:Be,days_short:Ke,days_long:We,words:Ge,services:Ye,service_parameters:Je,domains:Ze,days:Xe,time:et,misc:tt},it=Object.freeze({__proto__:null,scheduler:"Zeitplaner",actions:He,instructions:Qe,fields:Be,days_short:Ke,days_long:We,words:Ge,services:Ye,service_parameters:Je,domains:Ze,days:Xe,time:et,misc:tt,default:rt}),st={add:"add item",cancel:"cancel",next:"next",save:"save",delete:"delete"},at={no_group_selected:"Select a group first",no_entity_selected:"Select an entity first",no_groups_defined:"There are no groups defined",no_entities_for_group:"There are no entities in this group",no_actions_for_entity:"There are no actions for this entity",no_entries_defined:"There are no items to show"},nt={group:"Group",entity:"Entity",action:"Action",days:"Days",time:"Time",options:"Options",day_type_daily:"daily",day_type_workday:"workdays",day_type_weekend:"weekend",day_type_custom:"custom"},ot={mon:"mon",tue:"tue",wed:"wed",thu:"thu",fri:"fri",sat:"sat",sun:"sun"},ct={mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},lt={and:"and",before:"before",after:"after"},dt={turn_on:"turn on",turn_on_brightness:"turn on {at brightness}",turn_off:"turn off",close_cover:"close",open_cover:"open",set_temperature:"set temperature {to temperature}",set_temperature_hvac_mode_heat:"heat {to temperature}",set_temperature_hvac_mode_cool:"cool {to temperature}",set_cover_position:"set position {to position}",set_hvac_mode:"set mode {to hvac_mode}",set_hvac_mode_hvac_mode_off:"turn off",set_preset_mode:"set preset {to preset_mode}",set_value:"set value {to value}",select_option:"select option {option}",select_source:"select source {source}",start:"start",run_script:"run"},ut={brightness:"brightness",temperature:"temperature",position:"position",hvac_mode:"mode",preset_mode:"preset"},ht={camera:"cameras",climate:"climate",cover:"covers",fan:"fans",group:"groups",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",light:"lights",media_player:"media players",scene:"scenes",switch:"switches",vacuum:"vacuum"},pt={tomorrow:"tomorrow",daily:"daily",daily_except_days:"every day except {days}",working_days:"working days",weekend:"weekend",interval:"{startDay} to {endDay}"},mt={absolute:"at {time}",relative:"in {time}",interval:"from {startTime} to {endTime}",seconds:"{seconds} seconds",hour:"1 hour",hours:"{hours} hours",minute:"1 minute",minutes:"{minutes} minutes",now:"now",midnight:"midnight",noon:"noon",at_sun_event:"at {sunEvent}",sun_event_sunrise:"sunrise",sun_event_sunset:"sunset"},vt={one_additional_task:"1 more task",x_additional_tasks:"{count} more tasks"},ft={scheduler:"Scheduler",actions:st,instructions:at,fields:nt,days_short:ot,days_long:ct,words:lt,services:dt,service_parameters:ut,domains:ht,days:pt,time:mt,misc:vt},gt=Object.freeze({__proto__:null,scheduler:"Scheduler",actions:st,instructions:at,fields:nt,days_short:ot,days_long:ct,words:lt,services:dt,service_parameters:ut,domains:ht,days:pt,time:mt,misc:vt,default:ft}),yt={add:"Agregar",cancel:"cancelar",next:"siguiente",save:"guardar",delete:"borrar"},_t={no_group_selected:"Selecciona un grupo primero",no_entity_selected:"Selecciona una entidad primero",no_groups_defined:"No hay grupos definidos",no_entities_for_group:"No hay entidades en este grupo",no_actions_for_entity:"No hay acciones para esta entidad",no_entries_defined:"No hay dispositivos definidos"},bt={group:"Grupo",entity:"Entidad",action:"Acción",days:"Días",time:"Hora",options:"Opciones",day_type_daily:"cada día",day_type_weekdays:"dias semanales",day_type_weekend:"fin de semana",day_type_custom:"personalizado"},wt={mon:"lun",tue:"mar",wed:"mie",thu:"jue",fri:"vie",sat:"sab",sun:"dom"},Et={mon:"lunes",tue:"martes",wed:"miércoles",thu:"jueves",fri:"viernes",sat:"sábado",sun:"domingo"},Pt={and:"y",before:"antes",after:"después"},St={turn_on:"encender",turn_on_brightness:"encender {a brightness}",turn_off:"apagar",close_cover:"cerrar",open_cover:"abrir",set_temperature:"establecer temperatura {a temperature}",set_temperature_hvac_mode_heat:"calentar {a temperature}",set_temperature_hvac_mode_cool:"enfriar {a temperature}",set_to:"establecer a",set_cover_position:"establecer posición {a position}",set_hvac_mode:"establecer modo {a hvac_mode}",set_hvac_mode_hvac_mode_off:"apagar",set_preset_mode:"establecer modo {a preset_mode}",set_value:"establecer valor {value}",select_option:"seleccionar opción {option}",select_source:"seleccionar fuente {source}",start:"empezar",run_script:"ejecutar"},kt={brightness:"brillo",temperature:"temperatura",position:"posición",hvac_mode:"modo",preset_mode:"pre-ajuste"},xt={camera:"cámaras",climate:"climatización",cover:"persiana",fan:"ventilador",group:"grupo",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",light:"luces",media_player:"reproductor multimedia",scene:"escena",switch:"interruptor",vacuum:"aspirador"},$t={tomorrow:"mañana",daily:"a diario",daily_except_days:"todos los dias excepto {days}",working_days:"días hábiles",weekend:"fin de semana",interval:"{startDay} a {endDay}"},Ot={absolute:"a las {time}",relative:"en {time}",interval:"desde las {startTime} a las {endTime}",seconds:"{seconds} segundos",hour:"1 hora",hours:"{hours} horas",minute:"1 minuto",minutes:"{minutes} minutos",now:"ahora",midnight:"medianoche",noon:"mediodía",at_sun_event:"al {sunEvent}",sun_event_sunrise:"amanecer",sun_event_sunset:"atardecer"},jt={one_additional_task:"1 tarea más",x_additional_tasks:"{count} tareas más"},Ct={scheduler:"Programador",actions:yt,instructions:_t,fields:bt,days_short:wt,days_long:Et,words:Pt,services:St,service_parameters:kt,domains:xt,days:$t,time:Ot,misc:jt},Dt=Object.freeze({__proto__:null,scheduler:"Programador",actions:yt,instructions:_t,fields:bt,days_short:wt,days_long:Et,words:Pt,services:St,service_parameters:kt,domains:xt,days:$t,time:Ot,misc:jt,default:Ct}),zt={add:"lisa",cancel:"loobu",next:"edasi",save:"salvesta",delete:"kustuta"},At={no_group_selected:"Vali grupp",no_entity_selected:"Vali olem",no_groups_defined:"Gruppe pole määratud",no_entities_for_group:"Antud grupis puuduvad olemid",no_actions_for_entity:"Selles olemis puuduvad tegevused",no_entries_defined:"Pole midagi kuvada"},Tt={group:"Grupp",entity:"Olem",action:"Tegevus",days:"Päevad",time:"Aeg",options:"Suvandid",day_type_daily:"iga päev",day_type_weekdays:"tööpäevadel",day_type_weekend:"nädalavahetus",day_type_custom:"valikuline"},Nt={mon:"E",tue:"T",wed:"K",thu:"N",fri:"R",sat:"L",sun:"P"},Rt={mon:"Esmaspäev",tue:"Teisipäev",wed:"Kolmapäev",thu:"Neljapäev",fri:"Reede",sat:"Laupäev",sun:"Pühapäev"},Ft={and:"ja",before:"enne",after:"pärast"},It={turn_on:"lülita sisse",turn_on_brightness:"turn on {at brightness}",turn_off:"lülita välja",close_cover:"sulge",open_cover:"ava",set_temperature:"määra temperatuur {to temperature}",set_temperature_hvac_mode_heat:"heat {to temperature}",set_temperature_hvac_mode_cool:"cool {to temperature}",set_cover_position:"seadista asendisse {to position}",set_hvac_mode:"vali töörežiim {to hvac_mode}",set_hvac_mode_hvac_mode_off:"turn off",set_preset_mode:"eelseadistatud {to preset_mode}",set_value:"määra väärtus {value}",select_option:"valikud {option}",select_source:"vali allikas {source}",start:"alusta",run_script:"alusta"},Mt={brightness:"heledus",temperature:"temperatuur",position:"asend",hvac_mode:"töörežiim",preset_mode:"eelseadistus"},Lt={camera:"kaamerad",climate:"kliimaseade",cover:"(akna)katted",fan:"ventilaatorid",group:"grupid",input_boolean:"binaarsisestus",input_number:"arvsisestus",input_select:"sisendivalik",light:"valgustid",media_player:"media players",scene:"stseenid",switch:"lülitid",vacuum:"tolmuimejad"},Vt={tomorrow:"homme",daily:"iga päev",daily_except_days:"iga päev välja arvatud {days}",working_days:"tööpäevadel",weekend:"nädalavahetusel",interval:"{startDay} kuni {endDay}"},Ut={absolute:"kell {time}",relative:"{time} pärast",interval:"alates {startTime} kuni {endTime}",seconds:"{seconds} sekundit",hour:"1 tund",hours:"{hours} tundi",minute:"1 minut",minutes:"{minutes} minutit",now:"kohe",midnight:"keskööl",noon:"keskpäeval",at_sun_event:"{sunEvent}",sun_event_sunrise:"päikesetõusu",sun_event_sunset:"loojangut"},qt={one_additional_task:"veel 1 ajastus",x_additional_tasks:"{count} ajastust"},Ht={scheduler:"Ajastaja",actions:zt,instructions:At,fields:Tt,days_short:Nt,days_long:Rt,words:Ft,services:It,service_parameters:Mt,domains:Lt,days:Vt,time:Ut,misc:qt},Qt=Object.freeze({__proto__:null,scheduler:"Ajastaja",actions:zt,instructions:At,fields:Tt,days_short:Nt,days_long:Rt,words:Ft,services:It,service_parameters:Mt,domains:Lt,days:Vt,time:Ut,misc:qt,default:Ht}),Bt={add:"ajouter un item",cancel:"annuler",next:"suivant",save:"sauvegarder",delete:"effacer"},Kt={no_group_selected:"Sélectionner un groupe en premier",no_entity_selected:"Sélectionner une entité en premier",no_groups_defined:"Il n'y a pas de groupe défini",no_entities_for_group:"Il n'y a pas d'entité dans ce groupe",no_actions_for_entity:"Il n'y a pas d'action pour cette entité",no_entries_defined:"Il n'y a pas d'item à afficher"},Wt={group:"Groupe",entity:"Entité",action:"Action",days:"Jours",time:"Temps",options:"Options",day_type_daily:"chaque jour",day_type_weekdays:"en semaine",day_type_weekend:"weekend",day_type_custom:"sur mesure"},Gt={mon:"lun",tue:"mar",wed:"mer",thu:"jeu",fri:"ven",sat:"sam",sun:"dim"},Yt={mon:"lundi",tue:"mardi",wed:"mercredi",thu:"jeudi",fri:"vendredi",sat:"samedi",sun:"dimanche"},Jt={and:"et",before:"avant",after:"après"},Zt={turn_on:"allumer",turn_on_brightness:"allumer {à brightness}",turn_off:"éteindre",close_cover:"fermer",open_cover:"ouvrir",set_temperature:"régler la température {à temperature}",set_temperature_hvac_mode_heat:"chauffage {à temperature}",set_temperature_hvac_mode_cool:"climatisation {à temperature}",set_cover_position:"position définie {à position}",set_hvac_mode:"choisir le mode {to hvac_mode}",set_hvac_mode_hvac_mode_off:"éteindre",set_preset_mode:"choisir le programme {to preset_mode}",set_value:"ajuster {to value}",select_option:"choisir l'option {option}",select_source:"choisir la source {source}",start:"démarrer",run_script:"lancer le script"},Xt={brightness:"luminosité",temperature:"température",position:"position",hvac_mode:"mode",preset_mode:"programme"},er={camera:"caméras",climate:"climat",cover:"contrôleur",fan:"ventilateur",group:"groupe",input_boolean:"sélection logique",input_number:"sélection numérique",input_select:"sélection d'entrée",light:"lumière",media_player:"lecteurs multimédias",scene:"scènes",switch:"interrupteurs",vacuum:"aspirateur"},tr={tomorrow:"demain",daily:"quotidien",daily_except_days:"chaque jour sauf {days}",working_days:"jours de travail",weekend:"fin de semaine",interval:"{startDay} à {endDay}"},rr={absolute:"à {time}",relative:"dans {time}",interval:"de {startTime} à {endTime}",seconds:"{seconds} secondes",hour:"1 heure",hours:"{hours} heures",minute:"1 minute",minutes:"{minutes} minutes",now:"maintenant",midnight:"minuit",noon:"midi",at_sun_event:"à {sunEvent}",sun_event_sunrise:"lever du soleil",sun_event_sunset:"coucher du soleil"},ir={one_additional_task:"1 tâche de plus",x_additional_tasks:"{count} autres tâches"},sr={scheduler:"Planificateur",actions:Bt,instructions:Kt,fields:Wt,days_short:Gt,days_long:Yt,words:Jt,services:Zt,service_parameters:Xt,domains:er,days:tr,time:rr,misc:ir},ar=Object.freeze({__proto__:null,scheduler:"Planificateur",actions:Bt,instructions:Kt,fields:Wt,days_short:Gt,days_long:Yt,words:Jt,services:Zt,service_parameters:Xt,domains:er,days:tr,time:rr,misc:ir,default:sr}),nr={add:"új időzítés",cancel:"mégse",next:"tovább",save:"mentés",delete:"törlés"},or={no_group_selected:"Előbb egy csoportot szükséges választani",no_entity_selected:"Előbb egy entitást szükséges választani",no_groups_defined:"Nincsenek deffiniált csoportok",no_entities_for_group:"Ebben a csoportban nem találhatók entitások",no_actions_for_entity:"Ehhez az entitáshoz nem tartoznak műveletek",no_entries_defined:"Nincs megjeleníthető elem"},cr={group:"Csoport",entity:"Entitás",action:"Művelet",days:"Napokon",time:"Időpontban",options:"Opciók",day_type_daily:"minden nap",day_type_workday:"munkanapokon",day_type_weekend:"hétvégén",day_type_custom:"egyedi"},lr={mon:"hét",tue:"ked",wed:"sze",thu:"csü",fri:"pén",sat:"szo",sun:"vas"},dr={mon:"hétfő",tue:"kedd",wed:"szerda",thu:"csütörtök",fri:"péntek",sat:"szombat",sun:"vasárnap"},ur={and:"és",before:"előtt",after:"után"},hr={turn_on:"bekapcsolás",turn_on_brightness:"bekapcsolás {at brightness}",turn_off:"kikapcsolás",close_cover:"zárás",open_cover:"nyitás",set_temperature:"hőmérséklet {to temperature}",set_temperature_hvac_mode_heat:"heat {to temperature}",set_temperature_hvac_mode_cool:"cool {to temperature}",set_cover_position:"változtass pozíciót {to position}",set_hvac_mode:"mód beállítása {to hvac_mode}",set_hvac_mode_hvac_mode_off:"kikapcsolás",set_preset_mode:"preset beállítása {to preset_mode}",set_value:"érték beállítása {value}",select_option:"opció kiválasztása {option}",select_source:"forrás kiválasztása {source}",start:"kezdés",run_script:"kezdés"},pr={brightness:"világosság",temperature:"hőmérséklet",position:"pozíció",hvac_mode:"mód",preset_mode:"preset"},mr={camera:"kamera",climate:"termosztát",cover:"redőny",fan:"ventilátor",group:"csoportok",input_boolean:"logikai bemenet",input_number:"szám bemenet",input_select:"legördülő bemenet",light:"lámpa",media_player:"lejátszó",scene:"jelenetek",switch:"kapcsoló",vacuum:"pórszívó"},vr={tomorrow:"holnap",daily:"minden nap",daily_except_days:"minden nap, kivéve {days}",working_days:"munkanapokon",weekend:"hétvégén",interval:"{startDay} - {endDay}"},fr={absolute:"{time}-kor",relative:"{time} múlva",interval:"{startTime} - {endTime}",seconds:"{seconds} másodperc",hour:"1 óra",hours:"{hours} óra",minute:"1 perc",minutes:"{minutes} perc",now:"most",midnight:"éjfél",noon:"dél",at_sun_event:"{sunEvent}kor",sun_event_sunrise:"napfelkelte",sun_event_sunset:"napnyugta"},gr={one_additional_task:"még egy feladat",x_additional_tasks:"még {count} feladat"},yr={scheduler:"Időzítések",actions:nr,instructions:or,fields:cr,days_short:lr,days_long:dr,words:ur,services:hr,service_parameters:pr,domains:mr,days:vr,time:fr,misc:gr},_r=Object.freeze({__proto__:null,scheduler:"Időzítések",actions:nr,instructions:or,fields:cr,days_short:lr,days_long:dr,words:ur,services:hr,service_parameters:pr,domains:mr,days:vr,time:fr,misc:gr,default:yr}),br={add:"aggiungi oggetto",cancel:"annulla",next:"avanti",save:"salva",delete:"elimina"},wr={no_group_selected:"Seleziona prima un gruppo",no_entity_selected:"Seleziona prima un'entità",no_groups_defined:"Non ci sono gruppi definiti",no_entities_for_group:"Non ci sono entità in questo gruppo",no_actions_for_entity:"Non ci sono azioni per questa entità",no_entries_defined:"Non ci sono oggetti da visualizzare"},Er={group:"Gruppo",entity:"Entità",action:"Azione",days:"Giorni",time:"Ora",options:"Opzioni",day_type_daily:"giornaliero",day_type_workday:"giorni lavorativi",day_type_weekend:"weekend",day_type_custom:"personalizzato"},Pr={mon:"lun",tue:"mar",wed:"mer",thu:"gio",fri:"ven",sat:"sab",sun:"dom"},Sr={mon:"lunedì",tue:"martedì",wed:"mercoledì",thu:"giovedì",fri:"venerdì",sat:"sabato",sun:"domenica"},kr={and:"e",before:"prima",after:"dopo"},xr={turn_on:"accendi",turn_on_brightness:"accendi {at brightness}",turn_off:"spegni",close_cover:"chiudi",open_cover:"apri",set_temperature:"imposta temperatura {to temperature}",set_temperature_hvac_mode_heat:"aumenta {to temperature}",set_temperature_hvac_mode_cool:"diminuisci {to temperature}",set_cover_position:"imposta posizione {to position}",set_hvac_mode:"imposta modalità {to hvac_mode}",set_hvac_mode_hvac_mode_off:"spegni",set_preset_mode:"imposta programmazione {to preset_mode}",set_value:"imposta valore {value}",select_option:"seleziona opzione {option}",select_source:"seleziona sorgente {source}",start:"avvia",run_script:"esegui"},$r={brightness:"luminosità",temperature:"temperatura",position:"posizione",hvac_mode:"modalità",preset_mode:"programmazione"},Or={camera:"telecamere",climate:"clima",cover:"cover",fan:"ventole",group:"gruppi",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",light:"luci",media_player:"media player",scene:"scene",switch:"interruttori",vacuum:"aspirapolvere"},jr={tomorrow:"domani",daily:"giornaliero",daily_except_days:"tutti i giorni eccetto {days}",working_days:"giorni lavorativi",weekend:"weekend",interval:"{startDay} a {endDay}"},Cr={absolute:"alle {time}",relative:"entro {time}",interval:"dalle {startTime} alle {endTime}",seconds:"{seconds} secondi",hour:"1 ora",hours:"{hours} ore",minute:"1 minuto",minutes:"{minutes} minuti",now:"ora",midnight:"mezzanotte",noon:"mezzogiorno",at_sun_event:"al {sunEvent}",sun_event_sunrise:"l' alba",sun_event_sunset:"tramonto"},Dr={one_additional_task:"un altro task",x_additional_tasks:"{count} altri task"},zr={scheduler:"Schedulatore",actions:br,instructions:wr,fields:Er,days_short:Pr,days_long:Sr,words:kr,services:xr,service_parameters:$r,domains:Or,days:jr,time:Cr,misc:Dr},Ar=Object.freeze({__proto__:null,scheduler:"Schedulatore",actions:br,instructions:wr,fields:Er,days_short:Pr,days_long:Sr,words:kr,services:xr,service_parameters:$r,domains:Or,days:jr,time:Cr,misc:Dr,default:zr}),Tr={add:"Nieuw item",cancel:"annuleren",next:"verder",save:"opslaan",delete:"verwijder"},Nr={no_group_selected:"Selecteer eerst een groep",no_entity_selected:"Selecteer eerst een entiteit",no_groups_defined:"Er zijn geen groepen gedefinieerd",no_entities_for_group:"Deze groep heeft geen entiteiten",no_actions_for_entity:"Deze entiteit heeft geen acties",no_entries_defined:"Er zijn geen items aangemaakt"},Rr={group:"Groep",entity:"Entiteit",action:"Actie",days:"Dagen",time:"Tijdstip",options:"Opties",day_type_daily:"dagelijks",day_type_workday:"werkdagen",day_type_weekend:"weekend",day_type_custom:"anders"},Fr={mon:"ma",tue:"di",wed:"wo",thu:"do",fri:"vr",sat:"za",sun:"zo"},Ir={mon:"maandag",tue:"dinsdag",wed:"woensdag",thu:"donderdag",fri:"vrijdag",sat:"zaterdag",sun:"zondag"},Mr={and:"en",before:"voor",after:"na"},Lr={turn_on:"aanzetten",turn_on_brightness:"aanzetten {op brightness}",turn_off:"uitzetten",close_cover:"sluiten",open_cover:"openen",set_temperature:"temperatuur instellen {naar temperature}",set_temperature_hvac_mode_heat:"verwarmen {naar temperature}",set_temperature_hvac_mode_cool:"koelen {naar temperature}",set_cover_position:"positie instellen {naar position}",set_hvac_mode:"stand aanpassen {naar hvac_mode}",set_hvac_mode_hvac_mode_off:"uitzetten",set_preset_mode:"kies voorinstelling {preset_mode}",set_value:"waarde {value} instellen",select_option:"optie {option} selecteren",select_source:"ingang {source} selecteren",start:"starten",run_script:"uitvoeren"},Vr={brightness:"helderheid",temperature:"temperatuur",position:"positie",hvac_mode:"stand",preset_mode:"voorinstelling"},Ur={camera:"cameras",climate:"verwarming",cover:"zonwering",fan:"ventilatie",group:"groepen",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",light:"verlichting",media_player:"mediaspelers",scene:"scènes",switch:"schakelaars",vacuum:"stofzuigers"},qr={tomorrow:"morgen",daily:"dagelijks",daily_except_days:"elke dag behalve {days}",working_days:"op werkdagen",weekend:"in het weekend",interval:"{startDay} t/m {endDay}"},Hr={absolute:"om {time}",relative:"over {time}",interval:"van {startTime} tot {endTime}",seconds:"{seconds} seconden",hour:"1 uur",hours:"{hours} uur",minute:"1 minuut",minutes:"{minutes} minuten",now:"nu",midnight:"middernacht",noon:"12 uur",at_sun_event:"bij {sunEvent}",sun_event_sunrise:"zonsopgang",sun_event_sunset:"zonsondergang"},Qr={one_additional_task:"1 overige taak",x_additional_tasks:"{count} overige taken"},Br={scheduler:"Tijdplanner",actions:Tr,instructions:Nr,fields:Rr,days_short:Fr,days_long:Ir,words:Mr,services:Lr,service_parameters:Vr,domains:Ur,days:qr,time:Hr,misc:Qr},Kr=Object.freeze({__proto__:null,scheduler:"Tijdplanner",actions:Tr,instructions:Nr,fields:Rr,days_short:Fr,days_long:Ir,words:Mr,services:Lr,service_parameters:Vr,domains:Ur,days:qr,time:Hr,misc:Qr,default:Br}),Wr={add:"legg til",cancel:"avbryt",next:"neste",save:"lagre",delete:"slett"},Gr={no_group_selected:"Velg en gruppe først",no_entity_selected:"Velg en entitet først",no_groups_defined:"Ingen grupper definert",no_entities_for_group:"Det finnes ingen entiteter i denne gruppen",no_actions_for_entity:"Det finnes ingen handlinger for denne entiteten",no_entries_defined:"Det er ingen definerte tidsplaner å vise"},Yr={group:"Gruppe",entity:"Entitet",action:"Handling",days:"Dager",time:"Tid",options:"Valg",day_type_daily:"hver dag",day_type_weekdays:"ukedager",day_type_weekend:"weekend",day_type_custom:"egendefinert"},Jr={mon:"man",tue:"tir",wed:"ons",thu:"tor",fri:"fre",sat:"lør",sun:"søn"},Zr={mon:"mandag",tue:"tirsdag",wed:"onsdag",thu:"torsdag",fri:"fredag",sat:"lørdag",sun:"søndag"},Xr={and:"og",before:"før",after:"etter"},ei={turn_on:"slå på",turn_on_brightness:"slå på {at brightness}",turn_off:"slå av",close_cover:"lukk",open_cover:"åpne",set_temperature:"sett temperatur {to temperature}",set_temperature_hvac_mode_heat:"heat {to temperature}",set_temperature_hvac_mode_cool:"cool {to temperature}",set_cover_position:"sett posisjon {to position}",set_hvac_mode:"set mode {to hvac_mode}",set_hvac_mode_hvac_mode_off:"slå av",set_preset_mode:"set preset {to preset_mode}",set_value:"set value {to value}",select_option:"select option {option}",select_source:"select source {source}",start:"start",run_script:"run"},ti={brightness:"brightness",temperature:"temperature",position:"position",hvac_mode:"mode",preset_mode:"preset"},ri={camera:"cameras",climate:"klima",cover:"cover",fan:"vifter",group:"groups",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",media_player:"media players",scene:"scenes",light:"lys",switch:"brytere",vacuum:"støvsugere"},ii={tomorrow:"tomorrow",daily:"daily",daily_except_days:"every day except {days}",working_days:"working days",weekend:"weekend",interval:"{startDay} to {endDay}"},si={absolute:"at {time}",relative:"in {time}",interval:"from {startTime} to {endTime}",seconds:"{seconds} seconds",hour:"1 hour",hours:"{hours} hours",minute:"1 minute",minutes:"{minutes} minutes",now:"now",midnight:"midnight",noon:"noon",at_sun_event:"at {sunEvent}",sun_event_sunrise:"sunrise",sun_event_sunset:"sunset"},ai={one_additional_task:"1 more task",x_additional_tasks:"{count} more tasks"},ni={scheduler:"Tidsplan",actions:Wr,instructions:Gr,fields:Yr,days_short:Jr,days_long:Zr,words:Xr,services:ei,service_parameters:ti,domains:ri,days:ii,time:si,misc:ai},oi=Object.freeze({__proto__:null,scheduler:"Tidsplan",actions:Wr,instructions:Gr,fields:Yr,days_short:Jr,days_long:Zr,words:Xr,services:ei,service_parameters:ti,domains:ri,days:ii,time:si,misc:ai,default:ni}),ci={add:"dodaj",cancel:"anuluj",next:"dalej",save:"zapisz",delete:"usuń"},li={no_group_selected:"Najpierw wybierz grupę",no_entity_selected:"Najpierw wybierz encję",no_groups_defined:"Nie ma zdefiniowanych grup",no_entities_for_group:"Nie ma encji w tej grupie",no_actions_for_entity:"Nie ma akcji dla tej encji",no_entries_defined:"Nie ma elementów do pokazania"},di={group:"Grupa",entity:"Encja",action:"Akcja",days:"Dni",time:"Czas",options:"Opcje",day_type_daily:"codziennie",day_type_workday:"dni robocze",day_type_weekend:"weekend",day_type_custom:"niestandardowy"},ui={mon:"pon.",tue:"wt.",wed:"śr.",thu:"czw.",fri:"pt.",sat:"sob.",sun:"niedz."},hi={mon:"poniedziałek",tue:"wtorek",wed:"środa",thu:"czwartek",fri:"piątek",sat:"sobota",sun:"niedziela"},pi={and:"oraz",before:"przed",after:"po"},mi={turn_on:"włącz",turn_on_brightness:"włącz {at brightness}",turn_off:"wyłącz",close_cover:"zamknij",open_cover:"otwórz",set_temperature:"ustaw temperaturę {to temperature}",set_temperature_hvac_mode_heat:"heat {to temperature}",set_temperature_hvac_mode_cool:"cool {to temperature}",set_cover_position:"ustaw pozycję {to position}",set_hvac_mode:"ustaw tryb {to hvac_mode}",set_hvac_mode_hvac_mode_off:"wyłącz",set_preset_mode:"ustaw preset {preset_mode}",set_value:"ustaw wartość {value}",select_option:"wybierz opcję {option}",select_source:"wybierz źródło {source}",start:"start",run_script:"start"},vi={brightness:"jasność",temperature:"temperatura",position:"pozycja",hvac_mode:"tryb",preset_mode:"preset"},fi={camera:"kamera",climate:"termostat",cover:"roleta",fan:"wentylator",group:"grupa",input_boolean:"wejście logiczne",input_number:"wejście liczbowe",input_select:"wybór wejścia",media_player:"odtwarzacz av",scene:"scena",light:"światło",switch:"włącznik",vacuum:"odkurzacz"},gi={tomorrow:"jutro",daily:"codziennie",daily_except_days:"codziennie za wyjątkiem {days}",working_days:"dni robocze",weekend:"weekend",interval:"{startDay} do {endDay}"},yi={absolute:"o {time}",relative:"za {time}",interval:"od {startTime} do {endTime}",seconds:"{seconds} sekund(a/y)",hour:"1 godzina",hours:"{hours} godzin(y)",minute:"1 minuta",minutes:"{minutes} minut(y)",now:"teraz",midnight:"północ",noon:"południe",at_sun_event:"o {sunEvent}",sun_event_sunrise:"wschodzie",sun_event_sunset:"zachodzie"},_i={one_additional_task:"jeszcze 1 zadanie",x_additional_tasks:"{count} więcej zadań"},bi={scheduler:"Harmonogram",actions:ci,instructions:li,fields:di,days_short:ui,days_long:hi,words:pi,services:mi,service_parameters:vi,domains:fi,days:gi,time:yi,misc:_i},wi=Object.freeze({__proto__:null,scheduler:"Harmonogram",actions:ci,instructions:li,fields:di,days_short:ui,days_long:hi,words:pi,services:mi,service_parameters:vi,domains:fi,days:gi,time:yi,misc:_i,default:bi}),Ei={add:"adicionar item",cancel:"cancelar",next:"próximo",save:"gravar",delete:"apagar"},Pi={no_group_selected:"Selecione um grupo primeiro",no_entity_selected:"Selecione uma entidade primeiro",no_groups_defined:"Não tem grupo definido",no_entities_for_group:"Não tem entidade no grupo",no_actions_for_entity:"Não há ações para esta entidade",no_entries_defined:"Não tem item pra mostar"},Si={group:"Grupo",entity:"Entidade",action:"Ação",days:"Dias",time:"Hora",options:"Opções",day_type_daily:"todos os dias",day_type_weekdays:"dias da semana",day_type_weekend:"final da semana",day_type_custom:"personalizado"},ki={mon:"seg",tue:"ter",wed:"qua",thu:"qui",fri:"sex",sat:"sab",sun:"dom"},xi={mon:"segunda",tue:"terça",wed:"quarta",thu:"quinta",fri:"sexta",sat:"sabádo",sun:"domingo"},$i={and:"e",before:"antes",after:"depois"},Oi={turn_on:"ligar",turn_on_brightness:"ligar {a brightness}",turn_off:"desligar",close_cover:"fechar",open_cover:"abrir",set_temperature:"ajustar temperatura {a temperature}",set_temperature_hvac_mode_heat:"heat {to temperature}",set_temperature_hvac_mode_cool:"cool {to temperature}",set_cover_position:"ajustar posição {a position}",set_hvac_mode:"set mode {to hvac_mode}",set_hvac_mode_hvac_mode_off:"turn off",set_preset_mode:"set preset {to preset_mode}",set_value:"set value {to value}",select_option:"select option {option}",select_source:"select source {source}",start:"start",run_script:"run"},ji={brightness:"Brilho",temperature:"Temperatura",position:"Posição",hvac_mode:"mode",preset_mode:"preset"},Ci={camera:"cameras",climate:"ar condicionado",cover:"persiana",fan:"ventilador",group:"groups",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",media_player:"media players",scene:"scenes",light:"luz",switch:"interruptor",vacuum:"aspirador"},Di={tomorrow:"tomorrow",daily:"daily",daily_except_days:"every day except {days}",working_days:"working days",weekend:"weekend",interval:"{startDay} to {endDay}"},zi={absolute:"at {time}",relative:"in {time}",interval:"from {startTime} to {endTime}",seconds:"{seconds} seconds",hour:"1 hour",hours:"{hours} hours",minute:"1 minute",minutes:"{minutes} minutes",now:"now",midnight:"midnight",noon:"noon",at_sun_event:"at {sunEvent}",sun_event_sunrise:"sunrise",sun_event_sunset:"sunset"},Ai={one_additional_task:"1 more task",x_additional_tasks:"{count} more tasks"},Ti={scheduler:"Agenda",actions:Ei,instructions:Pi,fields:Si,days_short:ki,days_long:xi,words:$i,services:Oi,service_parameters:ji,domains:Ci,days:Di,time:zi,misc:Ai},Ni=Object.freeze({__proto__:null,scheduler:"Agenda",actions:Ei,instructions:Pi,fields:Si,days_short:ki,days_long:xi,words:$i,services:Oi,service_parameters:ji,domains:Ci,days:Di,time:zi,misc:Ai,default:Ti}),Ri={add:"adaugă element",cancel:"abandon",next:"următorul",save:"salvează",delete:"șterge"},Fi={no_group_selected:"Prima dată selectați un grup",no_entity_selected:"Prima dată selectați o entitate",no_groups_defined:"Nu există grupuri definite",no_entities_for_group:"Nu există entități definite în acest grup",no_actions_for_entity:"Nu există acțiuni pentru această entitate",no_entries_defined:"Nu există elemente de afișat"},Ii={group:"Grup",entity:"Entitate",action:"Acțiune",days:"Zile",time:"Timp",options:"Opțiuni",day_type_daily:"zilnic",day_type_workday:"zile lucrătoare",day_type_weekend:"sfârșit de săptămână",day_type_custom:"personalizat"},Mi={mon:"lun",tue:"mar",wed:"mie",thu:"joi",fri:"vin",sat:"sâm",sun:"dum"},Li={mon:"Luni",tue:"Marți",wed:"Miercuri",thu:"Joi",fri:"Vineri",sat:"Sâmbătă",sun:"Duminică"},Vi={and:"și",before:"înainte",after:"după"},Ui={turn_on:"pornire",turn_on_brightness:"pornire {la brightness}",turn_off:"oprire",close_cover:"închidere",open_cover:"deschidere",set_temperature:"setare temperatură {la temperature}",set_temperature_hvac_mode_heat:"încălzire {la temperature}",set_temperature_hvac_mode_cool:"răcire {la temperature}",set_cover_position:"setare poziție",set_hvac_mode:"setare mod {hvac_mode}",set_hvac_mode_hvac_mode_off:"oprire",set_preset_mode:"setare preset {preset_mode}",set_value:"setare valoare {value}",select_option:"selectare opțiune {option}",select_source:"selectare sursă {source}",start:"start",run_script:"rulare"},qi={brightness:"intensitate luminoasă",temperature:"temperatură",position:"poziție",hvac_mode:"mod",preset_mode:"preset"},Hi={camera:"camere",climate:"climat",cover:"jaluzele",fan:"ventilatoare",group:"grupuri",input_boolean:"input_boolean",input_number:"input_number",input_select:"input_select",light:"lumini",media_player:"media playere",scene:"scene",switch:"întrerupătpare",vacuum:"aspiratoare"},Qi={tomorrow:"mâine",daily:"zilnic",daily_except_days:"zilnic cu excepția {days}",working_days:"zile lucrătoare",weekend:"sfârșit de săptămână",interval:"{startDay} până la {endDay}"},Bi={absolute:"la {time}",relative:"în {time}",interval:"de la {startTime} la {endTime}",seconds:"{seconds} secunde",hour:"1 oră",hours:"{hours} ore",minute:"1 minut",minutes:"{minutes} minute",now:"acum",midnight:"miezul nopții",noon:"amiază",at_sun_event:"la {sunEvent}",sun_event_sunrise:"răsărit",sun_event_sunset:"apus"},Ki={one_additional_task:"încă o sarcină",x_additional_tasks:"încă {count} sarcini"},Wi={scheduler:"Planificator",actions:Ri,instructions:Fi,fields:Ii,days_short:Mi,days_long:Li,words:Vi,services:Ui,service_parameters:qi,domains:Hi,days:Qi,time:Bi,misc:Ki},Gi={add:"добавить",cancel:"отменить",next:"далее",save:"сохранить",delete:"удалить"},Yi={no_group_selected:"Необходимо выбрать группу",no_entity_selected:"Необходимо выбрать объект",no_groups_defined:"Ни одной группы не создано",no_entities_for_group:"В этой группе нет объектов",no_actions_for_entity:"Для этого объекта нет действий",no_entries_defined:"Объекты отсутствуют"},Ji={group:"Группа",entity:"Объект",action:"Действие",days:"Дни",time:"Время",options:"Опции",day_type_daily:"ежедневно",day_type_workday:"по будням",day_type_weekend:"по выходным",day_type_custom:"выбрать дни"},Zi={mon:"пн",tue:"вт",wed:"ср",thu:"чт",fri:"пт",sat:"сб",sun:"вс"},Xi={mon:"понедельник",tue:"вторник",wed:"среда",thu:"четверг",fri:"пятница",sat:"суббота",sun:"воскресенье"},es={and:"и",before:"до",after:"после"},ts={turn_on:"включить",turn_on_brightness:"включить {на brightness}",turn_off:"выключить",close_cover:"закрыть",open_cover:"открыть",set_temperature:"задать температуру {к temperature}",set_temperature_hvac_mode_heat:"обогрев {к temperature}",set_temperature_hvac_mode_cool:"охлаждение {к temperature}",set_cover_position:"установить позицию {position}",set_hvac_mode:"установить режим {hvac_mode}",set_hvac_mode_hvac_mode_off:"выключить",set_preset_mode:"выбрать набор настроек {preset_mode}",set_value:"установить значение {value}",select_option:"выбрать вариант {option}",select_source:"выбрать источник {source}",start:"запуск",run_script:"запустить"},rs={brightness:"Яркость",temperature:"Температура",position:"Позицию",hvac_mode:"режим",preset_mode:"предуставновлено"},is={camera:"Камеры",climate:"Климат",cover:"Жалюзи",fan:"Вентиляторы",group:"Группы",input_boolean:"Переключатели",input_number:"Числа",input_select:"Списки",media_player:"Медиаплееры",scene:"Сцены",light:"Освещение",switch:"Выключатели",vacuum:"Пылесосы"},ss={tomorrow:"завтра",daily:"ежедневно",daily_except_days:"каждый день исключая {days}",working_days:"рабочие дни",weekend:"выходные",interval:"{startDay} до {endDay}"},as={absolute:"в {time}",relative:"через {time}",interval:"с {startTime} до {endTime}",seconds:"{seconds} секунд",hour:"1 час",hours:"{hours} часа",minute:"1 минуту",minutes:"{minutes} минут",now:"сейчас",midnight:"полночь",noon:"полдень",at_sun_event:"на {sunEvent}",sun_event_sunrise:"восходе",sun_event_sunset:"закате"},ns={one_additional_task:"1 задача",x_additional_tasks:"{count} задач"},os={scheduler:"Планирование",actions:Gi,instructions:Yi,fields:Ji,days_short:Zi,days_long:Xi,words:es,services:ts,service_parameters:rs,domains:is,days:ss,time:as,misc:ns},cs={cs:qe,de:it,en:gt,es:Dt,et:Qt,es_419:Dt,fr:ar,hu:_r,it:Ar,nb:oi,nl:Kr,nn:oi,no:oi,pl:wi,pt:Ni,pt_BR:Ni,ro:Object.freeze({__proto__:null,scheduler:"Planificator",actions:Ri,instructions:Fi,fields:Ii,days_short:Mi,days_long:Li,words:Vi,services:Ui,service_parameters:qi,domains:Hi,days:Qi,time:Bi,misc:Ki,default:Wi}),ru:Object.freeze({__proto__:null,scheduler:"Планирование",actions:Gi,instructions:Yi,fields:Ji,days_short:Zi,days_long:Xi,words:es,services:ts,service_parameters:rs,domains:is,days:ss,time:as,misc:ns,default:os})};function ls(e,t="",r=""){const i=ds();var s;try{if("test"==i)return"TRANSLATED";s=e.split(".").reduce((e,t)=>e[t],cs[i])}catch(t){s=e.split(".").reduce((e,t)=>e[t],cs.en)}if(void 0===s&&(s=e.split(".").reduce((e,t)=>e[t],cs.en)),""!==t&&""!==r)if(Array.isArray(t)||Array.isArray(r))for(var a=0;a<t.length;a++)s=s.replace(t[a],r[a]);else s=s.replace(t,r);return s}function ds(){var e;let t=null===(e=localStorage.getItem("selectedLanguage"))||void 0===e?void 0:e.replace(/['"]+/g,"").replace("-","_");if(!t||"null"==t){const e=document.querySelector("home-assistant").hass;t=e.selectedLanguage||e.language||"en"}return String(t)}var us,hs;function ps(e,t){let r=e>=0?Math.floor(e/60):Math.ceil(e/60),i=e-60*r;return i%t!=0&&(i=Math.round(i/t)*t),i>=60&&(r++,i-=60),r>=24&&(r-=24),60*r+i}function ms(e,t={}){const r=!!t.amPm&&t.amPm,i=!!t.absolute&&t.absolute;e>=1440&&(e-=1440);let s=e>=0?Math.floor(e/60):Math.ceil(e/60);const a=e-60*s;let n="";r&&(n=s>=12?"PM":"AM",(s>12||12==s&&a>0)&&(s-=12));const o=String(Math.abs(s)).padStart(2,"0"),c=String(Math.abs(a)).padStart(2,"0"),l=s<0||a<0;return{hours:o,minutes:c,time:`${l&&!i?"-":""}${o}:${c}${r?" "+n:""}`,signed:l,amPm:n}}function vs(e,t={}){const r=t.stepSize?t.stepSize:1,i=!!t.signed&&t.signed,s=t.max?t.max:1440,a=ps(e,r);return a<0&&!i?e+=1440:a>=1440&&(e-=1440),a<-s?-s:a>s?s:e}function fs(e){let t,r,i;if("object"==typeof e)return fs(`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`);if(null!==(i=/^([0-9]{2}):([0-9]{2})$/.exec(e)))[t,r]=[Number(i[1]),Number(i[2])];else if(null!==(i=/^([0-9]{2})([0-9]{2})$/.exec(e)))[t,r]=[Number(i[1]),Number(i[2])];else{if(null!==(i=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}[\+|\-][0-9]{2}:[0-9]{2}$/.exec(e))){const e=new Date(i[0]);return fs(`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`)}console.log(`failed to parse timestamp '${e}'`)}return 60*t+r}function gs(e,t){if(t){if(e.type==hs.Daily)return[1,2,3,4,5,6,7];if(e.type==hs.Custom)return e.custom_days;const r=["mon","tue","wed","thu","fri","sat","sun"];return e.type==hs.Workday?t.attributes.workdays.map(e=>r.findIndex(t=>t==e)+1):e.type==hs.Weekend?r.map((e,r)=>t.attributes.workdays.includes(e)?null:r+1).filter(e=>e):[]}return e.type==hs.Daily?[1,2,3,4,5,6,7]:e.type==hs.Workday?[1,2,3,4,5]:e.type==hs.Weekend?[6,7]:e.type==hs.Custom?e.custom_days:[]}function ys(e){return e==us.Sunrise?"sunrise":"sunset"}function _s(e){let t=e.getDay();return 0==t&&(t=7),t}function bs(e,t){let r=["mon","tue","wed","thu","fri","sat","sun"];if(!t||!r.includes(t))return e;const i=r.length-r.findIndex(e=>e==t);return e=[...e.slice(-i),...e.slice(0,-i)]}function ws(e,t){const r=new Date,i=Math.round((e.valueOf()-r.valueOf())/1e3);if(i<5)return ls("time.now");if(i<60)return ls("time.relative","{time}",ls("time.seconds","{seconds}",String(i)));if(i<3300){const e=i%60,t=Math.round(i/60);if(e<5||e>55)return ls("time.relative","{time}",1==t?ls("time.minute"):ls("time.minutes","{minutes}",String(t)));if(1==Math.floor(i/60)){const e=Math.round(i-60);return ls("time.relative","{time}",`${ls("time.minute")} ${ls("words.and")} ${ls("time.seconds","{seconds}",String(e))}`)}return ls("time.relative","{time}",ls("time.minutes","{minutes}",String(t)))}if(1==Math.floor(i/3600)){const e=Math.round(i/60-60);return ls("time.relative","{time}",`${ls("time.hour")} ${ls("words.and")} ${ls("time.minutes","{minutes}",String(e))}`)}const s=Math.round(i/3600);if(s<=6)return ls("time.relative","{time}",1==s?ls("time.hour"):ls("time.hours","{hours}",String(s)));const a=new Date;a.setHours(0,0,0,0);const n=Math.floor((e.valueOf()-a.valueOf())/864e5),o=""+ms(fs(e),{amPm:null==t?void 0:t.amPm}).time;return 0==n?12==e.getHours()&&0==e.getMinutes()?ls("time.absolute","{time}",ls("time.noon")):ls("time.absolute","{time}",o):1==n?0==e.getHours()&&0==e.getMinutes()?ls("time.absolute","{time}",ls("time.midnight")):12==e.getHours()&&0==e.getMinutes()?`${ls("days.tomorrow")} ${ls("time.absolute","{time}",ls("time.noon"))}`:`${ls("days.tomorrow")} ${ls("time.absolute","{time}",o)}`:`${function(e){switch(e){case 1:return ls("days_long.mon");case 2:return ls("days_long.tue");case 3:return ls("days_long.wed");case 4:return ls("days_long.thu");case 5:return ls("days_long.fri");case 6:return ls("days_long.sat");case 7:return ls("days_long.sun");default:return""}}(_s(e))} ${ls("time.absolute","{time}",o)}`}!function(e){e.Sunrise="SUNRISE",e.Sunset="SUNSET"}(us||(us={})),function(e){e.Daily="DAILY",e.Workday="WORKDAY",e.Weekend="WEEKEND",e.Custom="CUSTOM"}(hs||(hs={}));const Es=[{id:1,name:ls("days_short.mon")},{id:2,name:ls("days_short.tue")},{id:3,name:ls("days_short.wed")},{id:4,name:ls("days_short.thu")},{id:5,name:ls("days_short.fri")},{id:6,name:ls("days_short.sat")},{id:7,name:ls("days_short.sun")}],Ps=[{id:hs.Daily,name:ls("fields.day_type_daily")},{id:hs.Workday,name:ls("fields.day_type_workday")},{id:hs.Weekend,name:ls("fields.day_type_weekend")},{id:hs.Custom,name:ls("fields.day_type_custom")}];var Ss;!function(e){e.Overview="OVERVIEW",e.NewSchedule="NEW_SCHEDULE",e.TimePicker="TIME_PICKER",e.TimeScheme="TIME_SCHEME",e.Options="OPTIONS"}(Ss||(Ss={}));const ks={service:"turn_on",icon:"power"},xs={service:"turn_off",icon:"power-off"},$s=/^([0-9]+)?D([0-7]+)?T([0-9SRDUW]+)T?([0-9SRDUW]+)?(A[A0-9]+)+(C([C0-9]+))?(F([F0-9]+))?$/,Os=/^([0-9]{4})?([SRDUW]{2})([0-9]{4})?$/;function js(e){var t,r,i;const s=$s.exec(e),a={time:{value:0},days:{type:hs.Daily},actions:[]};if(s[1])"15"==s[1]?Object.assign(a,{days:{type:hs.Workday}}):"67"==s[1]&&Object.assign(a,{days:{type:hs.Weekend}});else{const e=s[2].split("").map(Number);e.sort(),1==e.length&&0==e[0]||Object.assign(a,{days:{type:hs.Custom,custom_days:e.filter(e=>0!=e)}})}const n=Os.exec(s[3]);if(n?Object.assign(a,{time:{event:"SR"==n[2]?us.Sunrise:us.Sunset,value:n[1]?-fs(n[1]):fs(n[3])}}):Object.assign(a,{time:{value:fs(s[3])}}),s[4]){const e=Os.exec(s[4]);e?Object.assign(a,{endTime:{event:"SR"==e[2]?us.Sunrise:us.Sunset,value:e[1]?-fs(e[1]):fs(e[4])}}):Object.assign(a,{endTime:{value:fs(s[4])}})}const o=null===(t=s[5].match(/A[0-9]+/g))||void 0===t?void 0:t.map(e=>Number(e.substring(1)));if(Object.assign(a,{actions:o}),s[6]){let e=null===(r=s[6].match(/C[0-9]+/g))||void 0===r?void 0:r.map(e=>Number(e.substring(1)));1==(null==e?void 0:e.length)&&s[7].length>1?(e=s[7].split("").map(Number),Object.assign(a,{conditions:{type:Oe.All,items:e}})):Object.assign(a,{conditions:{type:Oe.Any,items:e}})}if(s[8]){const e=null===(i=s[8].match(/F[0-9]+/g))||void 0===i?void 0:i.map(e=>Number(e.substring(1)));Object.assign(a,{options:e})}return a}const Cs=["disarmed","armed_away","armed_home","armed_night"];function Ds(e){return{type:xe.Level,field:e.field,min:e.min||0,max:e.max||255,step:e.step||1,optional:e.optional||!1,unit:e.unit||""}}function zs(e){return{type:xe.List,field:e.field,options:e.options}}function As(e,t={}){let r={value:String(e)};return t.icons&&e in t.icons&&(r=Object.assign(Object.assign({},r),{icon:t.icons[e]})),t.name&&(r=Object.assign(Object.assign({},r),{name:t.name})),r}const Ts={heat:"fire",cool:"snowflake",heat_cool:"thermometer",auto:"autorenew",dry:"water-percent",fan_only:"fan"};const Ns=e=>{switch(e.attributes.device_class){case"garage":return"garage";case"door":return"door-closed";case"shutter":return"window-shutter";case"blind":return"blinds";case"window":return"window-closed";default:return"window-shutter"}},Rs=e=>{switch(e.attributes.device_class){case"garage":return"garage-open";case"door":return"door-open";case"shutter":return"window-shutter-open";case"blind":return"blinds-open";case"window":return"window-open";default:return"window-shutter-open"}},Fs=["open","closed"],Is={off:"fan-off",low:"fan-speed-1",medium:"fan-speed-2",high:"fan-speed-3"};const Ms={normal:"account-outline",eco:"leaf",away:"car-traction-control",boost:"rocket-launch-outline",comfort:"car-seat-cooler",home:"home-outline",sleep:"sleep",auto:"autorenew",baby:"baby-bottle-outline"};const Ls=[{service:"unlock",icon:"lock-open-variant-outline"},{service:"lock",icon:"lock-outline"}],Vs=["locked","unlocked"];function Us(e,t){return e?Object.entries(e).filter(([e])=>t.includes(e)).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{}):{}}function qs(e,t){return e?Object.entries(e).filter(([e])=>!t.includes(e)).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{}):{}}function Hs(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Qs(e){return"string"!=typeof e&&(e=String(e)),Hs(e.replace(/_/g," "))}function Bs(e){if(e)return"string"!=typeof e&&(e=String(e)),e.match(/^[a-z]+:[a-z0-9-]+$/i)?e:"hass:"+e}function Ks(e){const t=e=>Object.entries(e).sort((e,t)=>e[0]>t[0]?1:-1).map(([e,r])=>[e,"object"==typeof r&&null!==r?t(r):r]).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{});let r=Us(e,["service","service_data"]);r=t(r);return Object.values(r).map(e=>JSON.stringify(e).replace(/[\W]/g," ").split(" ").filter(e=>" "!=e&&""!=e).join("_")).join("_")}function Ws(e){const t=e.service;let r={id:"",name:e.name,icon:e.icon,service:t};return e.service_data&&Object.keys(e.service_data).length&&Object.assign(r,{service_data:e.service_data}),e.variable&&("options"in e.variable?Object.assign(r,{variable:zs(e.variable)}):Object.assign(r,{variable:Ds(e.variable)})),Object.assign(r,{id:Ks(r)}),r}function Gs(e){let t=e.entity,r=e.service;const i=Se(t),s=Se(r);i&&s?i==s&&(r=ke(r)):i||(t=s+"."+t,r=ke(r));let a=qs(e,["service","entity","service_data"]),n={entity:t,service:r};return a=Object.assign(Object.assign({},a),e.service_data),Object.keys(a).length&&(n=Object.assign(Object.assign({},n),{service_data:a})),n}function Ys(e,t){const r=e.actions.map(Ws),i=Ks(qs(t,["entity"]));return r.map(e=>{if(e.id==i)return!0;if(e.variable&&t.service_data&&Object.keys(t.service_data).includes(e.variable.field)){let r=Object.entries(t.service_data).filter(([t])=>t!=e.variable.field).reduce((e,[t,r])=>Object.assign(e,{[t]:r}),{}),i=Object.keys(r).length?Object.assign(Object.assign({},t),{service_data:r}):qs(t,["service_data"]);return e.id==Ks(i)}return!1}).map((e,t)=>e?t:null).filter(e=>null!==e)}function Js(e,t){const r=Ys(e,t);return r.length?Ws(e.actions[r[0]]):Ws(qs(t,["entity"]))}function Zs(e,t){const r=Se(e),i=t.states[e];if(!i)return[];switch(r){case"alarm_control_panel":return(e=>{const t=e.attributes.supported_features;let r=[{service:"alarm_disarm",icon:"lock-open-variant-outline"}];return 1&t&&r.push({service:"alarm_arm_home",icon:"home-outline"}),2&t&&r.push({service:"alarm_arm_away",icon:"exit-run"}),4&t&&r.push({service:"alarm_arm_night",icon:"power-sleep"}),16&t&&r.push({service:"alarm_arm_custom_bypass",icon:"shield-lock-outline"}),r})(i);case"climate":return function(e,t){const r=t.states[e],i=r.attributes.supported_features,s=r.attributes.preset_modes,a=r.attributes.hvac_modes,n=a.filter(e=>!["off","heat","cool","heat_cool"].includes(e)),o=Ds({field:"temperature",min:r.attributes.min_temp,max:r.attributes.max_temp,unit:t.config.unit_system.temperature,step:t.config.unit_system.temperature.includes("C")?.5:1});let c=[];return a.includes("off")?c.push({service:"set_hvac_mode",service_data:{hvac_mode:"off"},icon:"power"}):c.push(xs),a.includes("heat")&&1&i&&c.push({service:"set_temperature",service_data:{hvac_mode:"heat"},variable:o,icon:Ts.heat}),a.includes("cool")&&1&i&&c.push({service:"set_temperature",service_data:{hvac_mode:"cool"},variable:o,icon:Ts.cool}),!a.includes("heat")&&!a.includes("cool")&&1&i&&c.push({service:"set_temperature",variable:o,icon:"thermometer"}),a.length>1&&n.length&&c.push({service:"set_hvac_mode",variable:zs({field:"hvac_mode",options:n.map(e=>As(e,{icons:Ts}))}),icon:"cog-transfer-outline"}),s&&s.length&&16&i&&c.push({service:"set_preset_mode",variable:zs({field:"preset_mode",options:s.map(e=>As(e))}),icon:"cloud-download-outline"}),c}(e,t);case"cover":return function(e){const t=e.attributes.supported_features;let r=[{service:"open_cover",icon:Rs(e)},{service:"close_cover",icon:Ns(e)}];return 4&t&&r.push({supported_feature:4,service:"set_cover_position",variable:Ds({field:"position",min:0,max:100,unit:"%"}),icon:"ray-vertex"}),r}(i);case"fan":return function(e){const t=e.attributes.supported_features,r=e.attributes.speed_list;let i=[ks,xs];return 1&t&&r&&r.length>1&&i.push({service:"set_speed",variable:zs({field:"speed",options:r.map(e=>As(e,{icons:Is}))}),icon:"weather-windy"}),2&t&&i.push({service:"oscillate",variable:zs({field:"oscillating",options:[{value:"True"},{value:"False"}]}),icon:"arrow-left-right"}),4&t&&i.push({service:"set_direction",variable:zs({field:"direction",options:[{value:"forward"},{value:"reverse"}]}),icon:"cog-clockwise"}),i}(i);case"group":return function(e,t){const r=e.attributes.entity_id;return(t=t.map((e,t)=>{const i=Se(r[t]);return e.map(e=>Se(e.service)==i?e:Object.assign(Object.assign({},e),{service:`${i}.${e.service}`}))}))[0].filter(e=>t.every(t=>t.map(Ks).includes(Ks(e))))}(i,(i.attributes.entity_id||[]).map(e=>Zs(e,t)));case"humidifer":return function(e){const t=e.attributes.supported_features,r=e.attributes.available_modes,i=Ds({field:"humidity",min:e.attributes.min_humidity,max:e.attributes.max_humidity,step:1,unit:"%"});let s=[];return s.push({service:"set_humidity",variable:i}),r&&r.length>1&&1&t&&s.push({service:"set_mode",variable:zs({field:"mode",options:r.map(e=>As(e,{icons:Ms}))})}),s}(i);case"input_boolean":return[Object.assign(Object.assign({},ks),{icon:"flash"}),Object.assign(Object.assign({},xs),{icon:"flash-off"})];case"input_number":return s=i,[{service:"set_value",variable:Ds({field:"value",min:Number(s.attributes.min),max:Number(s.attributes.max),step:Number(s.attributes.step)}),icon:"counter"}];case"input_select":return function(e){const t=e.attributes.options;return t.length<2?[]:[{service:"select_option",variable:zs({field:"option",options:t.map(e=>({value:e}))}),icon:"counter"}]}(i);case"light":return function(e){const t=e.attributes.supported_features,r=Ds({field:"brightness",min:0,max:255,unit:"%",optional:!0});let i=[];return i.push(Object.assign(Object.assign({},xs),{icon:"lightbulb-off"})),1&t?i.push(Object.assign(Object.assign({},ks),{icon:"lightbulb",variable:r})):i.push(Object.assign(Object.assign({},ks),{icon:"lightbulb"})),i}(i);case"lock":return Ls;case"media_player":return function(e){const t=Array(e.attributes.source_list),r=e.attributes.supported_features;let i=[];return 128&r&&i.push(ks),256&r&&i.push(xs),2048&r&&t.length>1&&i.push({service:"select_source",variable:zs({field:"source",options:t.map(e=>({value:e}))}),icon:"music-box-multiple-outline"}),i}(i);case"scene":return[Object.assign(Object.assign({},ks),{icon:"play"})];case"script":return function(e){let t=[ks,xs];return t.push({service:ke(e.entity_id),icon:"play",name:ls("services.run_script")}),t}(i);case"switch":return[Object.assign(Object.assign({},ks),{icon:"flash"}),Object.assign(Object.assign({},xs),{icon:"flash-off"})];case"vacuum":return function(e){const t=e.attributes.supported_features;let r=[];return 1&t&&r.push(ks),8192&t&&r.push({service:"start",icon:"play-circle-outline"}),4&t&&r.push({service:"start_pause",icon:"play-circle-outline"}),r}(i);case"water_heater":return function(e){const t=e.attributes.supported_features,r=e.attributes.operation_list,i=Ds({field:"temperature",min:e.attributes.min_temp,max:e.attributes.max_temp,step:.5});let s=[];return 1&t&&s.push({service:"set_temperature",variable:i,icon:"thermometer"}),2&t&&s.push({service:"set_operation_mode",variable:zs({field:"operation_mode",options:r.map(e=>({value:e}))}),icon:"cog-transfer-outline"}),4&t&&s.push({service:"set_away_mode",variable:zs({field:"mode",options:[{value:"on",icon:"toggle-switch-outline"},{value:"off",icon:"toggle-switch-off-outline"}]}),icon:"car-traction-control"}),s}(i);default:return[]}var s}function Xs(e,t){let r=!1;if(e.match(/^[a-z0-9_\.]+$/))r=e.includes(".")?e==t:e==Se(t);else try{if(e.startsWith("/")&&e.endsWith("/")||-1!==e.indexOf("*")){e.startsWith("/")||(e=`/^${e=e.replace(/\./g,".").replace(/\*/g,".*")}$/`);r=new RegExp(e.slice(1,-1)).test(t)}}catch(e){}return r}function ea(e,t){return!(!t.include||!t.include.length)&&(!(t.include&&!t.include.find(t=>Xs(t,e)))&&(!t.exclude||!t.exclude.find(t=>Xs(t,e))))}const ta={alarm_control_panel:"alarm-light-outline",automation:"playlist-play",binary_sensor:"radiobox-blank",camera:"camera",climate:"home-thermometer-outline",cover:"window-shutter",device_tracker:"account",fan:"fan",group:"google-circles-communities",humidifier:"air-humidifier",input_boolean:"drawing",input_number:"ray-vertex",input_select:"format-list-bulleted",input_text:"textbox",light:"lightbulb-outline",lock:"lock-open-outline",media_player:"cast-connected",notify:"comment-alert",person:"account-outline",remote:"remote",scene:"palette-outline",script:"file-document",sensor:"eye",switch:"flash",timer:"timer",vacuum:"robot-vacuum",water_heater:"water-boiler"},ra=e=>{const t=Se(e.entity_id);switch(t){case"binary_sensor":return(e=>{switch(e.attributes.device_class){case"battery":return"battery-outline";case"cold":return"snowflake";case"connectivity":return"server-network";case"door":return"door-closed";case"garage_door":return"hass:garage";case"gas":case"power":case"problem":case"safety":case"smoke":return"shield-check";case"heat":return"fire";case"light":return"brightness-5";case"lock":return"lock";case"moisture":return"water";case"motion":return"walk";case"occupancy":case"presence":return"home-outline";case"opening":return"hass:square";case"plug":return"hass:power-plug-outline";case"sound":return"music-note";case"vibration":return"vibrate";case"window":return"window-closed";default:return"radiobox-blank"}})(e);case"cover":return Ns(e);case"sensor":return(e=>{switch(e.attributes.device_class){case"humidity":return"water-percent";case"illuminance":return"brightness-5";case"temperature":return"thermometer";case"power":return"flash";case"pressure":return"gauge";case"signal_strength":return"wifi";default:return"°C"==e.attributes.unit_of_measurement||"°F"==e.attributes.unit_of_measurement?"thermometer":"eye"}})(e);default:return t in ta?ta[t]:"folder-outline"}},ia=e=>{switch(Se(e.entity_id)){case"alarm_control_panel":return Cs;case"binary_sensor":case"cover":return Fs;case"input_boolean":case"switch":return["on","off"];case"lock":return Vs;case"person":return["home","not_home"];default:return}};function sa(e){return e.match(/^switch.schedule_[0-9a-f]{6}$/)}function aa(e,t,r){const i=t.states[e];if(!i)return;let s={id:e,icon:"folder-outline",actions:[]};if((void 0===r.standard_configuration||r.standard_configuration)&&(s=Object.assign(Object.assign({},s),{actions:[...Zs(e,t)],icon:ra(i),states:ia(i)})),s=Object.assign(Object.assign({},s),{icon:i.attributes.icon||s.icon}),r.customize){Object.entries(r.customize).filter(([t])=>Xs(t,e)).map(([,e])=>e).forEach(t=>{if(s=Object.assign(Object.assign({},s),qs(t,["actions","exclude_actions"])),t.actions&&t.actions.forEach(t=>{Se(t.service)==Se(e)&&(t=Object.assign(Object.assign({},t),{service:ke(t.service)}));const r=Ys(s,t);let i=s.actions;r.length?i=s.actions.map((e,i)=>r.includes(i)?Object.assign(e,t):e):s.actions.push(t),s=Object.assign(Object.assign({},s),{actions:i})}),t.exclude_actions){let e=t.exclude_actions.map(e=>e.replace(/_/g," ").trim().toLowerCase());s.exclude_actions&&(e=e.concat(s.exclude_actions).filter((e,t,r)=>r.indexOf(e)===t)),s=Object.assign(Object.assign({},s),{exclude_actions:e})}})}return s}function na(e,t,r,i){if(sa(e))return!1;if(!(ea(e,r)||r.groups&&r.groups.some(t=>ea(e,t))))return!1;if(i){const s=aa(e,t,r);if(!s)return!1;if(i.states&&!s.states)return!1;if(i.actions&&!s.actions.length)return!1}return!0}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function oa(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var ca=oa((function(e,t){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,s=1;s<i;++s)t[s]=t[s].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function s(e){return e.toUpperCase()}function a(e){var i=t("[0-9]","[A-Fa-f]"),s=r(r("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+r("%[89A-Fa-f]"+i+"%"+i+i)+"|"+r("%"+i+i)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",n=t("[\\:\\/\\?\\#\\[\\]\\@]",a),o=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=(r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),r(r(s+"|"+t(c,a,"[\\:]"))+"*"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(l+"\\."+l+"\\."+l+"\\."+l),u=r(i+"{1,4}"),h=r(r(u+"\\:"+u)+"|"+d),p=r(r(u+"\\:")+"{6}"+h),m=r("\\:\\:"+r(u+"\\:")+"{5}"+h),v=r(r(u)+"?\\:\\:"+r(u+"\\:")+"{4}"+h),f=r(r(r(u+"\\:")+"{0,1}"+u)+"?\\:\\:"+r(u+"\\:")+"{3}"+h),g=r(r(r(u+"\\:")+"{0,2}"+u)+"?\\:\\:"+r(u+"\\:")+"{2}"+h),y=r(r(r(u+"\\:")+"{0,3}"+u)+"?\\:\\:"+u+"\\:"+h),_=r(r(r(u+"\\:")+"{0,4}"+u)+"?\\:\\:"+h),b=r(r(r(u+"\\:")+"{0,5}"+u)+"?\\:\\:"+u),w=r(r(r(u+"\\:")+"{0,6}"+u)+"?\\:\\:"),E=r([p,m,v,f,g,y,_,b,w].join("|")),P=r(r(c+"|"+s)+"+"),S=(r("[vV]"+i+"+\\."+t(c,a,"[\\:]")+"+"),r(r(s+"|"+t(c,a))+"*"),r(s+"|"+t(c,a,"[\\:\\@]")));return r(r(s+"|"+t(c,a,"[\\@]"))+"+"),r(r(S+"|"+t("[\\/\\?]",o))+"*"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,a,"[\\:\\@\\/\\?]",o),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,a),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,n),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+r(r("\\%25|\\%(?!"+i+"{2})")+"("+P+")")+"?\\]?$")}}var n=a(!1),o=a(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,s=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(i=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,d=/^xn--/,u=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,v=String.fromCharCode;function f(e){throw new RangeError(p[e])}function g(e,t){var r=e.split("@"),i="";r.length>1&&(i=r[0]+"@",e=r[1]);var s=function(e,t){for(var r=[],i=e.length;i--;)r[i]=t(e[i]);return r}((e=e.replace(h,".")).split("."),t).join(".");return i+s}function y(e){for(var t=[],r=0,i=e.length;r<i;){var s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<i){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&s)<<10)+(1023&a)+65536):(t.push(s),r--)}else t.push(s)}return t}var _=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},b=function(e,t,r){var i=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;i+=36)e=m(e/35);return m(i+36*e/(e+38))},w=function(e){var t,r=[],i=e.length,s=0,a=128,n=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var c=0;c<o;++c)e.charCodeAt(c)>=128&&f("not-basic"),r.push(e.charCodeAt(c));for(var d=o>0?o+1:0;d<i;){for(var u=s,h=1,p=36;;p+=36){d>=i&&f("invalid-input");var v=(t=e.charCodeAt(d++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(v>=36||v>m((l-s)/h))&&f("overflow"),s+=v*h;var g=p<=n?1:p>=n+26?26:p-n;if(v<g)break;var y=36-g;h>m(l/y)&&f("overflow"),h*=y}var _=r.length+1;n=b(s-u,_,0==u),m(s/_)>l-a&&f("overflow"),a+=m(s/_),s%=_,r.splice(s++,0,a)}return String.fromCodePoint.apply(String,r)},E=function(e){var t=[],r=(e=y(e)).length,i=128,s=0,a=72,n=!0,o=!1,c=void 0;try{for(var d,u=e[Symbol.iterator]();!(n=(d=u.next()).done);n=!0){var h=d.value;h<128&&t.push(v(h))}}catch(e){o=!0,c=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw c}}var p=t.length,g=p;for(p&&t.push("-");g<r;){var w=l,E=!0,P=!1,S=void 0;try{for(var k,x=e[Symbol.iterator]();!(E=(k=x.next()).done);E=!0){var $=k.value;$>=i&&$<w&&(w=$)}}catch(e){P=!0,S=e}finally{try{!E&&x.return&&x.return()}finally{if(P)throw S}}var O=g+1;w-i>m((l-s)/O)&&f("overflow"),s+=(w-i)*O,i=w;var j=!0,C=!1,D=void 0;try{for(var z,A=e[Symbol.iterator]();!(j=(z=A.next()).done);j=!0){var T=z.value;if(T<i&&++s>l&&f("overflow"),T==i){for(var N=s,R=36;;R+=36){var F=R<=a?1:R>=a+26?26:R-a;if(N<F)break;var I=N-F,M=36-F;t.push(v(_(F+I%M,0))),N=m(I/M)}t.push(v(_(N,0))),a=b(s,O,g==p),s=0,++g}}}catch(e){C=!0,D=e}finally{try{!j&&A.return&&A.return()}finally{if(C)throw D}}++s,++i}return t.join("")},P=function(e){return g(e,(function(e){return u.test(e)?"xn--"+E(e):e}))},S=function(e){return g(e,(function(e){return d.test(e)?w(e.slice(4).toLowerCase()):e}))},k={};function x(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function $(e){for(var t="",r=0,i=e.length;r<i;){var s=parseInt(e.substr(r+1,2),16);if(s<128)t+=String.fromCharCode(s),r+=3;else if(s>=194&&s<224){if(i-r>=6){var a=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&s)<<6|63&a)}else t+=e.substr(r,6);r+=6}else if(s>=224){if(i-r>=9){var n=parseInt(e.substr(r+4,2),16),o=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&s)<<12|(63&n)<<6|63&o)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=$(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,x).replace(t.PCT_ENCODED,s)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,x).replace(t.PCT_ENCODED,s)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,x).replace(t.PCT_ENCODED,s)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,x).replace(t.PCT_ENCODED,s)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,x).replace(t.PCT_ENCODED,s)),e}function j(e){return e.replace(/^0*(.*)/,"$1")||"0"}function C(e,t){var r=e.match(t.IPV4ADDRESS)||[],i=c(r,2)[1];return i?i.split(".").map(j).join("."):e}function D(e,t){var r=e.match(t.IPV6ADDRESS)||[],i=c(r,3),s=i[1],a=i[2];if(s){for(var n=s.toLowerCase().split("::").reverse(),o=c(n,2),l=o[0],d=o[1],u=d?d.split(":").map(j):[],h=l.split(":").map(j),p=t.IPV4ADDRESS.test(h[h.length-1]),m=p?7:8,v=h.length-m,f=Array(m),g=0;g<m;++g)f[g]=u[g]||h[v+g]||"";p&&(f[m-1]=C(f[m-1],t));var y=f.reduce((function(e,t,r){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===r?i.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(y&&y.length>1){var b=f.slice(0,y.index),w=f.slice(y.index+y.length);_=b.join(":")+"::"+w.join(":")}else _=f.join(":");return a&&(_+="%"+a),_}return e}var z=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,A=void 0==="".match(/(){0}/)[1];function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},i=!1!==t.iri?o:n;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var s=e.match(z);if(s){A?(r.scheme=s[1],r.userinfo=s[3],r.host=s[4],r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=s[7],r.fragment=s[8],isNaN(r.port)&&(r.port=s[5])):(r.scheme=s[1]||void 0,r.userinfo=-1!==e.indexOf("@")?s[3]:void 0,r.host=-1!==e.indexOf("//")?s[4]:void 0,r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=-1!==e.indexOf("?")?s[7]:void 0,r.fragment=-1!==e.indexOf("#")?s[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),r.host&&(r.host=D(C(r.host,i),i)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var a=k[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||a&&a.unicodeSupport)O(r,i);else{if(r.host&&(t.domainHost||a&&a.domainHost))try{r.host=P(r.host.replace(i.PCT_ENCODED,$).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,n)}a&&a.parse&&a.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function N(e,t){var r=!1!==t.iri?o:n,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(D(C(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}var R=/^\.\.?\//,F=/^\/\.(\/|$)/,I=/^\/\.\.(\/|$)/,M=/^\/?(?:.|\n)*?(?=\/|$)/;function L(e){for(var t=[];e.length;)if(e.match(R))e=e.replace(R,"");else if(e.match(F))e=e.replace(F,"/");else if(e.match(I))e=e.replace(I,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(M);if(!r)throw new Error("Unexpected dot segment condition");var i=r[0];e=e.slice(i.length),t.push(i)}return t.join("")}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?o:n,i=[],s=k[(t.scheme||e.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||s&&s.domainHost)try{e.host=t.iri?S(e.host):P(e.host.replace(r.PCT_ENCODED,$).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var a=N(e,t);if(void 0!==a&&("suffix"!==t.reference&&i.push("//"),i.push(a),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||s&&s.absolutePath||(c=L(c)),void 0===a&&(c=c.replace(/^\/\//,"/%2F")),i.push(c)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function U(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],s={};return i||(e=T(V(e,r),r),t=T(V(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=L(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=L(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=L(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=L(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function q(e,t){return e&&e.toString().replace(t&&t.iri?o.PCT_ENCODED:n.PCT_ENCODED,$)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Q={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function B(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var K={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=B(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(B(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),i=c(r,2),s=i[0],a=i[1];e.path=s&&"/"!==s?s:void 0,e.query=a,e.resourceName=void 0}return e.fragment=void 0,e}},W={scheme:"wss",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize},G={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",J="[0-9A-Fa-f]",Z=r(r("%[EFef]"+J+"%"+J+J+"%"+J+J)+"|"+r("%[89A-Fa-f]"+J+"%"+J+J)+"|"+r("%"+J+J)),X=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(Y,"g"),te=new RegExp(Z,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),ie=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ie;function ae(e){var t=$(e);return t.match(ee)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,i=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var s=!1,a={},n=r.query.split("&"),o=0,c=n.length;o<c;++o){var l=n[o].split("=");switch(l[0]){case"to":for(var d=l[1].split(","),u=0,h=d.length;u<h;++u)i.push(d[u]);break;case"subject":r.subject=q(l[1],t);break;case"body":r.body=q(l[1],t);break;default:s=!0,a[q(l[0],t)]=q(l[1],t)}}s&&(r.headers=a)}r.query=void 0;for(var p=0,m=i.length;p<m;++p){var v=i[p].split("@");if(v[0]=q(v[0]),t.unicodeSupport)v[1]=q(v[1],t).toLowerCase();else try{v[1]=P(q(v[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[p]=v.join("@")}return r},serialize:function(e,t){var r,i=e,a=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(a){for(var n=0,o=a.length;n<o;++n){var c=String(a[n]),l=c.lastIndexOf("@"),d=c.slice(0,l).replace(te,ae).replace(te,s).replace(re,x),u=c.slice(l+1);try{u=t.iri?S(u):P(q(u,t).toLowerCase())}catch(e){i.error=i.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}a[n]=d+"@"+u}i.path=a.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var m in h)h[m]!==G[m]&&p.push(m.replace(te,ae).replace(te,s).replace(ie,x)+"="+h[m].replace(te,ae).replace(te,s).replace(se,x));return p.length&&(i.query=p.join("&")),i}},oe=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(oe),i=e;if(r){var s=t.scheme||i.scheme||"urn",a=r[1].toLowerCase(),n=r[2],o=s+":"+(t.nid||a),c=k[o];i.nid=a,i.nss=n,i.path=void 0,c&&(i=c.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",i=e.nid,s=r+":"+(t.nid||i),a=k[s];a&&(e=a.serialize(e,t));var n=e,o=e.nss;return n.path=(i||t.nid)+":"+o,n}},le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,de={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(le)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};k[H.scheme]=H,k[Q.scheme]=Q,k[K.scheme]=K,k[W.scheme]=W,k[ne.scheme]=ne,k[ce.scheme]=ce,k[de.scheme]=de,e.SCHEMES=k,e.pctEncChar=x,e.pctDecChars=$,e.parse=T,e.removeDotSegments=L,e.serialize=V,e.resolveComponents=U,e.resolve=function(e,t,r){var i=function(e,t){var r=e;if(t)for(var i in t)r[i]=t[i];return r}({scheme:"null"},r);return V(U(T(e,i),T(t,i),i,!0),i)},e.normalize=function(e,t){return"string"==typeof e?e=V(T(e,t),t):"object"===i(e)&&(e=T(V(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=V(T(e,r),r):"object"===i(e)&&(e=V(e,r)),"string"==typeof t?t=V(T(t,r),r):"object"===i(t)&&(t=V(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?o.ESCAPE:n.ESCAPE,x)},e.unescapeComponent=q,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),la=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i,s,a;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(s=i;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=i;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=i;0!=s--;){var n=a[s];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r},da={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:ua,checkDataTypes:function(e,t,r){switch(e.length){case 1:return ua(e[0],t,r,!0);default:var i="",s=pa(e);for(var a in s.array&&s.object&&(i=s.null?"(":"(!"+t+" || ",i+="typeof "+t+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)i+=(i?" && ":"")+ua(a,t,r,!0);return i}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++){var s=t[i];(ha[s]||"array"===e&&"array"===s)&&(r[r.length]=s)}if(r.length)return r}else{if(ha[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:pa,getProperty:fa,escapeQuotes:ga,equal:la,ucs2length:function(e){for(var t,r=0,i=e.length,s=0;s<i;)r++,(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<i&&56320==(64512&(t=e.charCodeAt(s)))&&s++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var i in e)if(i!=r&&t[i])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:ya,getPathExpr:function(e,t,r,i){return wa(e,r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var i=ya(r?"/"+Ea(t):fa(t));return wa(e,i)},getData:function(e,t,r){var i,s,a,n;if(""===e)return"rootData";if("/"==e[0]){if(!_a.test(e))throw new Error("Invalid JSON-pointer: "+e);s=e,a="rootData"}else{if(!(n=e.match(ba)))throw new Error("Invalid JSON-pointer: "+e);if(i=+n[1],"#"==(s=n[2])){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(a="data"+(t-i||""),!s)return a}for(var o=a,c=s.split("/"),l=0;l<c.length;l++){var d=c[l];d&&(a+=fa(Pa(d)),o+=" && "+a)}return o},unescapeFragment:function(e){return Pa(decodeURIComponent(e))},unescapeJsonPointer:Pa,escapeFragment:function(e){return encodeURIComponent(Ea(e))},escapeJsonPointer:Ea};function ua(e,t,r,i){var s=i?" !== ":" === ",a=i?" || ":" && ",n=i?"!":"",o=i?"":"!";switch(e){case"null":return t+s+"null";case"array":return n+"Array.isArray("+t+")";case"object":return"("+n+t+a+"typeof "+t+s+'"object"'+a+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+s+'"number"'+a+o+"("+t+" % 1)"+a+t+s+t+(r?a+n+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+s+'"'+e+'"'+(r?a+n+"isFinite("+t+")":"")+")";default:return"typeof "+t+s+'"'+e+'"'}}var ha=pa(["string","number","integer","boolean","null"]);function pa(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var ma=/^[a-z$_][a-z$_0-9]*$/i,va=/'|\\/g;function fa(e){return"number"==typeof e?"["+e+"]":ma.test(e)?"."+e:"['"+ga(e)+"']"}function ga(e){return e.replace(va,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function ya(e){return"'"+ga(e)+"'"}var _a=/^\/(?:[^~]|~0|~1)*$/,ba=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function wa(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function Ea(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function Pa(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var Sa=function(e){da.copy(e,this)};var ka=oa((function(e){var t=e.exports=function(e,r,i){"function"==typeof r&&(i=r,r={}),function e(r,i,s,a,n,o,c,l,d,u){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var h in i(a,n,o,c,l,d,u),a){var p=a[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var m=0;m<p.length;m++)e(r,i,s,p[m],n+"/"+h+"/"+m,o,n,h,a,m)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var v in p)e(r,i,s,p[v],n+"/"+h+"/"+v.replace(/~/g,"~0").replace(/\//g,"~1"),o,n,h,a,v)}else(h in t.keywords||r.allKeys&&!(h in t.skipKeywords))&&e(r,i,s,p,n+"/"+h,o,n,h,a)}s(a,n,o,c,l,d,u)}}(r,"function"==typeof(i=r.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}})),xa=$a;function $a(e,t,r){var i=this._refs[r];if("string"==typeof i){if(!this._refs[i])return $a.call(this,e,t,i);i=this._refs[i]}if((i=i||this._schemas[r])instanceof Sa)return Aa(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var s,a,n,o=Oa.call(this,t,r);return o&&(s=o.schema,t=o.root,n=o.baseId),s instanceof Sa?a=s.validate||e.call(this,s.schema,t,void 0,n):void 0!==s&&(a=Aa(s,this._opts.inlineRefs)?s:e.call(this,s,t,void 0,n)),a}function Oa(e,t){var r=ca.parse(t),i=Na(r),s=Ta(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==s){var a=Fa(i),n=this._refs[a];if("string"==typeof n)return ja.call(this,e,n,r);if(n instanceof Sa)n.validate||this._compile(n),e=n;else{if(!((n=this._schemas[a])instanceof Sa))return;if(n.validate||this._compile(n),a==Fa(t))return{schema:n,root:e,baseId:s};e=n}if(!e.schema)return;s=Ta(this._getId(e.schema))}return Da.call(this,r,s,e.schema,e)}function ja(e,t,r){var i=Oa.call(this,e,t);if(i){var s=i.schema,a=i.baseId;e=i.root;var n=this._getId(s);return n&&(a=Ia(a,n)),Da.call(this,r,a,s,e)}}$a.normalizeId=Fa,$a.fullPath=Ta,$a.url=Ia,$a.ids=function(e){var t=Fa(this._getId(e)),r={"":t},i={"":Ta(t,!1)},s={},a=this;return ka(e,{allKeys:!0},(function(e,t,n,o,c,l,d){if(""!==t){var u=a._getId(e),h=r[o],p=i[o]+"/"+c;if(void 0!==d&&(p+="/"+("number"==typeof d?d:da.escapeFragment(d))),"string"==typeof u){u=h=Fa(h?ca.resolve(h,u):u);var m=a._refs[u];if("string"==typeof m&&(m=a._refs[m]),m&&m.schema){if(!la(e,m.schema))throw new Error('id "'+u+'" resolves to more than one schema')}else if(u!=Fa(p))if("#"==u[0]){if(s[u]&&!la(e,s[u]))throw new Error('id "'+u+'" resolves to more than one schema');s[u]=e}else a._refs[u]=p}r[t]=h,i[t]=p}})),s},$a.inlineRef=Aa,$a.schema=Oa;var Ca=da.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Da(e,t,r,i){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var s=e.fragment.split("/"),a=1;a<s.length;a++){var n=s[a];if(n){if(void 0===(r=r[n=da.unescapeFragment(n)]))break;var o;if(!Ca[n]&&((o=this._getId(r))&&(t=Ia(t,o)),r.$ref)){var c=Ia(t,r.$ref),l=Oa.call(this,i,c);l&&(r=l.schema,i=l.root,t=l.baseId)}}}return void 0!==r&&r!==i.schema?{schema:r,root:i,baseId:t}:void 0}}var za=da.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Aa(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&!e(r))return!1}else for(var s in t){if("$ref"==s)return!1;if("object"==typeof(r=t[s])&&!e(r))return!1}return!0}(e):t?function e(t){var r,i=0;if(Array.isArray(t)){for(var s=0;s<t.length;s++)if("object"==typeof(r=t[s])&&(i+=e(r)),i==1/0)return 1/0}else for(var a in t){if("$ref"==a)return 1/0;if(za[a])i++;else if("object"==typeof(r=t[a])&&(i+=e(r)+1),i==1/0)return 1/0}return i}(e)<=t:void 0)}function Ta(e,t){return!1!==t&&(e=Fa(e)),Na(ca.parse(e))}function Na(e){return ca.serialize(e).split("#")[0]+"#"}var Ra=/#\/?$/;function Fa(e){return e?e.replace(Ra,""):""}function Ia(e,t){return t=Fa(t),ca.resolve(e,t)}var Ma={Validation:Va((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:Va(La)};function La(e,t,r){this.message=r||La.message(e,t),this.missingRef=xa.url(e,t),this.missingSchema=xa.normalizeId(xa.fullPath(this.missingRef))}function Va(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}La.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var Ua=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&function(e){return function(t){return function(r,i){var s={key:r,value:t[r]},a={key:i,value:t[i]};return e(s,a)}}}(t.cmp),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var a,n;if(Array.isArray(t)){for(n="[",a=0;a<t.length;a++)a&&(n+=","),n+=e(t[a])||"null";return n+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=s.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(n="",a=0;a<c.length;a++){var l=c[a],d=e(t[l]);d&&(n&&(n+=","),n+=JSON.stringify(l)+":"+d)}return s.splice(o,1),"{"+n+"}"}}(e)},qa=function(e,t,r){var i="",s=!0===e.schema.$async,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),n=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var c="unknown keyword: "+o;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(i+=" var validate = ",s&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",n&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" /*# sourceURL="+n+" */ ")),"boolean"==typeof e.schema||!a&&!e.schema.$ref){var l=e.level,d=e.dataLevel,u=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",m=!e.opts.allErrors,v="data"+(d||""),f="valid"+l;if(!1===e.schema){e.isTop?m=!0:i+=" var "+f+" = false; ",(Y=Y||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";var g=i;i=Y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i+=s?" return data; ":" validate.errors = null; return true; ":i+=" var "+f+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var y=e.isTop;l=e.level=0,d=e.dataLevel=0,v="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{l=e.level,v="data"+((d=e.dataLevel)||"");if(n&&(e.baseId=e.resolve.url(e.baseId,n)),s&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+l+" = errors;"}f="valid"+l,m=!e.opts.allErrors;var b="",w="",E=e.schema.type,P=Array.isArray(E);if(E&&e.opts.nullable&&!0===e.schema.nullable&&(P?-1==E.indexOf("null")&&(E=E.concat("null")):"null"!=E&&(E=[E,"null"],P=!0)),P&&1==E.length&&(E=E[0],P=!1),e.schema.$ref&&a){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),E){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,E);var k=e.RULES.types[E];if(S||P||!0===k||k&&!J(k)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var x=P?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[x](E,v,e.opts.strictNumbers,!0)+") { ",S){var $="dataType"+l,O="coerced"+l;i+=" var "+$+" = typeof "+v+"; var "+O+" = undefined; ","array"==e.opts.coerceTypes&&(i+=" if ("+$+" == 'object' && Array.isArray("+v+") && "+v+".length == 1) { "+v+" = "+v+"[0]; "+$+" = typeof "+v+"; if ("+e.util.checkDataType(e.schema.type,v,e.opts.strictNumbers)+") "+O+" = "+v+"; } "),i+=" if ("+O+" !== undefined) ; ";var j=S;if(j)for(var C,D=-1,z=j.length-1;D<z;)"string"==(C=j[D+=1])?i+=" else if ("+$+" == 'number' || "+$+" == 'boolean') "+O+" = '' + "+v+"; else if ("+v+" === null) "+O+" = ''; ":"number"==C||"integer"==C?(i+=" else if ("+$+" == 'boolean' || "+v+" === null || ("+$+" == 'string' && "+v+" && "+v+" == +"+v+" ","integer"==C&&(i+=" && !("+v+" % 1)"),i+=")) "+O+" = +"+v+"; "):"boolean"==C?i+=" else if ("+v+" === 'false' || "+v+" === 0 || "+v+" === null) "+O+" = false; else if ("+v+" === 'true' || "+v+" === 1) "+O+" = true; ":"null"==C?i+=" else if ("+v+" === '' || "+v+" === 0 || "+v+" === false) "+O+" = null; ":"array"==e.opts.coerceTypes&&"array"==C&&(i+=" else if ("+$+" == 'string' || "+$+" == 'number' || "+$+" == 'boolean' || "+v+" == null) "+O+" = ["+v+"]; ");i+=" else {   ",(Y=Y||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",i+=P?""+E.join(","):""+E,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=P?""+E.join(","):""+E,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";g=i;i=Y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+O+" !== undefined) {  ";var A=d?"data"+(d-1||""):"parentData";i+=" "+v+" = "+O+"; ",d||(i+="if ("+A+" !== undefined)"),i+=" "+A+"["+(d?e.dataPathArr[d]:"parentDataProperty")+"] = "+O+"; } "}else{(Y=Y||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",i+=P?""+E.join(","):""+E,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=P?""+E.join(","):""+E,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";g=i;i=Y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!a)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",m&&(i+=" } if (errors === ",i+=y?"0":"errs_"+l,i+=") { ",w+="}");else{var T=e.RULES;if(T)for(var N=-1,R=T.length-1;N<R;)if(J(k=T[N+=1])){if(k.type&&(i+=" if ("+e.util.checkDataType(k.type,v,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==k.type&&e.schema.properties){u=e.schema.properties;var F=Object.keys(u);if(F)for(var I,M=-1,L=F.length-1;M<L;){if(void 0!==(q=u[I=F[M+=1]]).default){var V=v+e.util.getProperty(I);if(e.compositeRule){if(e.opts.strictDefaults){_="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else i+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+V+" === null || "+V+" === '' "),i+=" ) "+V+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(q.default)+" ":i+=" "+JSON.stringify(q.default)+" ",i+="; "}}}else if("array"==k.type&&Array.isArray(e.schema.items)){var U=e.schema.items;if(U){D=-1;for(var q,H=U.length-1;D<H;)if(void 0!==(q=U[D+=1]).default){V=v+"["+D+"]";if(e.compositeRule){if(e.opts.strictDefaults){_="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else i+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+V+" === null || "+V+" === '' "),i+=" ) "+V+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(q.default)+" ":i+=" "+JSON.stringify(q.default)+" ",i+="; "}}}var Q=k.rules;if(Q)for(var B,K=-1,W=Q.length-1;K<W;)if(Z(B=Q[K+=1])){var G=B.code(e,B.keyword,k.type);G&&(i+=" "+G+" ",m&&(b+="}"))}if(m&&(i+=" "+b+" ",b=""),k.type&&(i+=" } ",E&&E===k.type&&!S)){i+=" else { ";var Y;h=e.schemaPath+".type",p=e.errSchemaPath+"/type";(Y=Y||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",i+=P?""+E.join(","):""+E,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=P?""+E.join(","):""+E,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";g=i;i=Y.pop(),!e.compositeRule&&m?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}m&&(i+=" if (errors === ",i+=y?"0":"errs_"+l,i+=") { ",w+="}")}}function J(e){for(var t=e.rules,r=0;r<t.length;r++)if(Z(t[r]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,i=0;i<r.length;i++)if(void 0!==e.schema[r[i]])return!0}(t)}return m&&(i+=" "+w+" "),y?(s?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+f+" = errors === errs_"+l+";",i},Ha=da.ucs2length,Qa=Ma.Validation,Ba=function e(t,r,i,s){var a=this,n=this._opts,o=[void 0],c={},l=[],d={},u=[],h={},p=[];r=r||{schema:t,refVal:o,refs:c};var m=Ka.call(this,t,r,s),v=this._compilations[m.index];if(m.compiling)return v.callValidate=function e(){var t=v.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var f=this._formats,g=this.RULES;try{var y=b(t,r,i,s);v.validate=y;var _=v.callValidate;return _&&(_.schema=y.schema,_.errors=null,_.refs=y.refs,_.refVal=y.refVal,_.root=y.root,_.$async=y.$async,n.sourceCode&&(_.source=y.source)),y}finally{Wa.call(this,t,r,s)}function b(t,i,s,d){var h=!i||i&&i.schema==t;if(i.schema!=r.schema)return e.call(a,t,i,s,d);var m,v=!0===t.$async,y=qa({isTop:!0,schema:t,isRoot:h,baseId:d,root:i,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Ma.MissingRef,RULES:g,validate:qa,util:da,resolve:xa,resolveRef:w,usePattern:S,useDefault:k,useCustomRule:x,opts:n,formats:f,logger:a.logger,self:a});y=en(o,Za)+en(l,Ya)+en(u,Ja)+en(p,Xa)+y,n.processCode&&(y=n.processCode(y,t));try{m=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",y)(a,g,f,r,o,u,p,la,Ha,Qa),o[0]=m}catch(e){throw a.logger.error("Error compiling schema, function code:",y),e}return m.schema=t,m.errors=null,m.refs=c,m.refVal=o,m.root=h?m:i,v&&(m.$async=!0),!0===n.sourceCode&&(m.source={code:y,patterns:l,defaults:u}),m}function w(t,s,l){s=xa.url(t,s);var d,u,h=c[s];if(void 0!==h)return P(d=o[h],u="refVal["+h+"]");if(!l&&r.refs){var p=r.refs[s];if(void 0!==p)return P(d=r.refVal[p],u=E(s,d))}u=E(s);var m=xa.call(a,b,r,s);if(void 0===m){var v=i&&i[s];v&&(m=xa.inlineRef(v,n.inlineRefs)?v:e.call(a,v,r,i,t))}if(void 0!==m)return function(e,t){var r=c[e];o[r]=t}(s,m),P(m,u);!function(e){delete c[e]}(s)}function E(e,t){var r=o.length;return o[r]=t,c[e]=r,"refVal"+r}function P(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function S(e){var t=d[e];return void 0===t&&(t=d[e]=l.length,l[t]=e),"pattern"+t}function k(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return da.toQuotedString(e);case"object":if(null===e)return"null";var t=Ua(e),r=h[t];return void 0===r&&(r=h[t]=u.length,u[r]=e),"default"+r}}function x(e,t,r,i){if(!1!==a._opts.validateSchema){var s=e.definition.dependencies;if(s&&!s.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+s.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var c="keyword schema is invalid: "+a.errorsText(o.errors);if("log"!=a._opts.validateSchema)throw new Error(c);a.logger.error(c)}}var l,d=e.definition.compile,u=e.definition.inline,h=e.definition.macro;if(d)l=d.call(a,t,r,i);else if(h)l=h.call(a,t,r,i),!1!==n.validateSchema&&a.validateSchema(l,!0);else if(u)l=u.call(a,i,e.keyword,t,r);else if(!(l=e.definition.validate))return;if(void 0===l)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var m=p.length;return p[m]=l,{code:"customRule"+m,validate:l}}};function Ka(e,t,r){var i=Ga.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}function Wa(e,t,r){var i=Ga.call(this,e,t,r);i>=0&&this._compilations.splice(i,1)}function Ga(e,t,r){for(var i=0;i<this._compilations.length;i++){var s=this._compilations[i];if(s.schema==e&&s.root==t&&s.baseId==r)return i}return-1}function Ya(e,t){return"var pattern"+e+" = new RegExp("+da.toQuotedString(t[e])+");"}function Ja(e){return"var default"+e+" = defaults["+e+"];"}function Za(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function Xa(e){return"var customRule"+e+" = customRules["+e+"];"}function en(e,t){if(!e.length)return"";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}var tn=oa((function(e){var t=e.exports=function(){this._cache={}};t.prototype.put=function(e,t){this._cache[e]=t},t.prototype.get=function(e){return this._cache[e]},t.prototype.del=function(e){delete this._cache[e]},t.prototype.clear=function(){this._cache={}}})),rn=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,sn=[0,31,28,31,30,31,30,31,31,30,31,30,31],an=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,nn=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,on=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,cn=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ln=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,dn=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,un=/^(?:\/(?:[^~/]|~0|~1)*)*$/,hn=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,pn=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,mn=vn;function vn(e){return e="full"==e?"full":"fast",da.copy(vn[e])}function fn(e){var t=e.match(rn);if(!t)return!1;var r=+t[1],i=+t[2],s=+t[3];return i>=1&&i<=12&&s>=1&&s<=(2==i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:sn[i])}function gn(e,t){var r=e.match(an);if(!r)return!1;var i=r[1],s=r[2],a=r[3],n=r[5];return(i<=23&&s<=59&&a<=59||23==i&&59==s&&60==a)&&(!t||n)}vn.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":cn,url:ln,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:nn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:wn,uuid:dn,"json-pointer":un,"json-pointer-uri-fragment":hn,"relative-json-pointer":pn},vn.full={date:fn,time:gn,"date-time":function(e){var t=e.split(yn);return 2==t.length&&fn(t[0])&&gn(t[1],!0)},uri:function(e){return _n.test(e)&&on.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":cn,url:ln,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:nn,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:wn,uuid:dn,"json-pointer":un,"json-pointer-uri-fragment":hn,"relative-json-pointer":pn};var yn=/t|\s/i;var _n=/\/|:/;var bn=/[^\\]\\Z/;function wn(e){if(bn.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var En=function(e,t,r){var i,s=" ",a=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(s+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",i="schema"+a):i=o;var p="maximum"==t,m=p?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[m],f=e.opts.$data&&v&&v.$data,g=p?"<":">",y=p?">":"<",_=void 0;if(!h&&"number"!=typeof o&&void 0!==o)throw new Error(t+" must be number");if(!f&&void 0!==v&&"number"!=typeof v&&"boolean"!=typeof v)throw new Error(m+" must be number or boolean");if(f){var b=e.util.getData(v.$data,n,e.dataPathArr),w="exclusive"+a,E="exclType"+a,P="exclIsNumber"+a,S="' + "+($="op"+a)+" + '";s+=" var schemaExcl"+a+" = "+b+"; ",s+=" var "+w+"; var "+E+" = typeof "+(b="schemaExcl"+a)+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var k;_=m;(k=k||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: '"+m+" should be boolean' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var x=s;s=k.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+x+"]); ":s+=" validate.errors = ["+x+"]; return false; ":s+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else if ( ",h&&(s+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),s+=" "+E+" == 'number' ? ( ("+w+" = "+i+" === undefined || "+b+" "+g+"= "+i+") ? "+u+" "+y+"= "+b+" : "+u+" "+y+" "+i+" ) : ( ("+w+" = "+b+" === true) ? "+u+" "+y+"= "+i+" : "+u+" "+y+" "+i+" ) || "+u+" !== "+u+") { var op"+a+" = "+w+" ? '"+g+"' : '"+g+"='; ",void 0===o&&(_=m,l=e.errSchemaPath+"/"+m,i=b,h=f)}else{S=g;if((P="number"==typeof v)&&h){var $="'"+S+"'";s+=" if ( ",h&&(s+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),s+=" ( "+i+" === undefined || "+v+" "+g+"= "+i+" ? "+u+" "+y+"= "+v+" : "+u+" "+y+" "+i+" ) || "+u+" !== "+u+") { "}else{P&&void 0===o?(w=!0,_=m,l=e.errSchemaPath+"/"+m,i=v,y+="="):(P&&(i=Math[p?"min":"max"](v,o)),v===(!P||i)?(w=!0,_=m,l=e.errSchemaPath+"/"+m,y+="="):(w=!1,S+="="));$="'"+S+"'";s+=" if ( ",h&&(s+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),s+=" "+u+" "+y+" "+i+" || "+u+" !== "+u+") { "}}_=_||t,(k=k||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+$+", limit: "+i+", exclusive: "+w+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be "+S+" ",s+=h?"' + "+i:i+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";x=s;return s=k.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+x+"]); ":s+=" validate.errors = ["+x+"]; return false; ":s+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",d&&(s+=" else { "),s},Pn=function(e,t,r){var i,s=" ",a=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",i="schema"+a):i=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");s+="if ( ",h&&(s+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),s+=" "+u+".length "+("maxItems"==t?">":"<")+" "+i+") { ";var p=t,m=m||[];m.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxItems"==t?"more":"fewer",s+=" than ",s+=h?"' + "+i+" + '":""+o,s+=" items' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var v=s;return s=m.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s},Sn=function(e,t,r){var i,s=" ",a=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",i="schema"+a):i=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";s+="if ( ",h&&(s+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),!1===e.opts.unicode?s+=" "+u+".length ":s+=" ucs2length("+u+") ",s+=" "+p+" "+i+") { ";var m=t,v=v||[];v.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT be ",s+="maxLength"==t?"longer":"shorter",s+=" than ",s+=h?"' + "+i+" + '":""+o,s+=" characters' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var f=s;return s=v.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+f+"]); ":s+=" validate.errors = ["+f+"]; return false; ":s+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s},kn=function(e,t,r){var i,s=" ",a=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",i="schema"+a):i=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");s+="if ( ",h&&(s+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),s+=" Object.keys("+u+").length "+("maxProperties"==t?">":"<")+" "+i+") { ";var p=t,m=m||[];m.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxProperties"==t?"more":"fewer",s+=" than ",s+=h?"' + "+i+" + '":""+o,s+=" properties' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var v=s;return s=m.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s},xn={$ref:function(e,t,r){var i,s,a=" ",n=e.level,o=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(o||""),h="valid"+n;if("#"==c||"#/"==c)e.isRoot?(i=e.async,s="validate"):(i=!0===e.root.schema.$async,s="root.refVal[0]");else{var p=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===p){var m=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(m),(y=y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(a+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(a+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;a=y.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(a+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,m);e.logger.warn(m),d&&(a+=" if (true) { ")}}else if(p.inline){var f=e.util.copy(e);f.level++;var g="valid"+f.level;f.schema=p.schema,f.schemaPath="",f.errSchemaPath=c,a+=" "+e.validate(f).replace(/validate\.schema/g,p.code)+" ",d&&(a+=" if ("+g+") { ")}else i=!0===p.$async||e.async&&!1!==p.$async,s=p.code}if(s){var y;(y=y||[]).push(a),a="",e.opts.passContext?a+=" "+s+".call(this, ":a+=" "+s+"( ",a+=" "+u+", (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var _=a+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(a=y.pop(),i){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(a+=" var "+h+"; "),a+=" try { await "+_+"; ",d&&(a+=" "+h+" = true; "),a+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(a+=" "+h+" = false; "),a+=" } ",d&&(a+=" if ("+h+") { ")}else a+=" if (!"+_+") { if (vErrors === null) vErrors = "+s+".errors; else vErrors = vErrors.concat("+s+".errors); errors = vErrors.length; } ",d&&(a+=" else { ")}return a},allOf:function(e,t,r){var i=" ",s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var d="valid"+c.level,u=c.baseId,h=!0,p=s;if(p)for(var m,v=-1,f=p.length-1;v<f;)m=p[v+=1],(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all))&&(h=!1,c.schema=m,c.schemaPath=a+"["+v+"]",c.errSchemaPath=n+"/"+v,i+="  "+e.validate(c)+" ",c.baseId=u,o&&(i+=" if ("+d+") { ",l+="}"));return o&&(i+=h?" if (true) { ":" "+l.slice(0,-1)+" "),i},anyOf:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h="errs__"+s,p=e.util.copy(e),m="";p.level++;var v="valid"+p.level;if(n.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var f=p.baseId;i+=" var "+h+" = errors; var "+u+" = false;  ";var g=e.compositeRule;e.compositeRule=p.compositeRule=!0;var y=n;if(y)for(var _,b=-1,w=y.length-1;b<w;)_=y[b+=1],p.schema=_,p.schemaPath=o+"["+b+"]",p.errSchemaPath=c+"/"+b,i+="  "+e.validate(p)+" ",p.baseId=f,i+=" "+u+" = "+u+" || "+v+"; if (!"+u+") { ",m+="}";e.compositeRule=p.compositeRule=g,i+=" "+m+" if (!"+u+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else l&&(i+=" if (true) { ");return i},$comment:function(e,t,r){var i=" ",s=e.schema[t],a=e.errSchemaPath+"/"+t,n=(e.opts.allErrors,e.util.toQuotedString(s));return!0===e.opts.$comment?i+=" console.log("+n+");":"function"==typeof e.opts.$comment&&(i+=" self._opts.$comment("+n+", "+e.util.toQuotedString(a)+", validate.root.schema);"),i},const:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h=e.opts.$data&&n&&n.$data;h&&(i+=" var schema"+s+" = "+e.util.getData(n.$data,a,e.dataPathArr)+"; "),h||(i+=" var schema"+s+" = validate.schema"+o+";"),i+="var "+u+" = equal("+d+", schema"+s+"); if (!"+u+") {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+s+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",l&&(i+=" else { "),i},contains:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h="errs__"+s,p=e.util.copy(e);p.level++;var m="valid"+p.level,v="i"+s,f=p.dataLevel=e.dataLevel+1,g="data"+f,y=e.baseId,_=e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all);if(i+="var "+h+" = errors;var "+u+";",_){var b=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=n,p.schemaPath=o,p.errSchemaPath=c,i+=" var "+m+" = false; for (var "+v+" = 0; "+v+" < "+d+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var w=d+"["+v+"]";p.dataPathArr[f]=v;var E=e.validate(p);p.baseId=y,e.util.varOccurences(E,g)<2?i+=" "+e.util.varReplace(E,g,w)+" ":i+=" var "+g+" = "+w+"; "+E+" ",i+=" if ("+m+") break; }  ",e.compositeRule=p.compositeRule=b,i+="  if (!"+m+") {"}else i+=" if ("+d+".length == 0) {";var P=P||[];P.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var S=i;return i=P.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",_&&(i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},dependencies:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="errs__"+s,h=e.util.copy(e),p="";h.level++;var m="valid"+h.level,v={},f={},g=e.opts.ownProperties;for(w in n)if("__proto__"!=w){var y=n[w],_=Array.isArray(y)?f:v;_[w]=y}i+="var "+u+" = errors;";var b=e.errorPath;for(var w in i+="var missing"+s+";",f)if((_=f[w]).length){if(i+=" if ( "+d+e.util.getProperty(w)+" !== undefined ",g&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(w)+"') "),l){i+=" && ( ";var E=_;if(E)for(var P=-1,S=E.length-1;P<S;){C=E[P+=1],P&&(i+=" || "),i+=" ( ( "+(T=d+(A=e.util.getProperty(C)))+" === undefined ",g&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(C)+"') "),i+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?C:A)+") ) "}i+=")) {  ";var k="missing"+s,x="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,k,!0):b+" + "+k);var $=$||[];$.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==_.length?i+="property "+e.util.escapeQuotes(_[0]):i+="properties "+e.util.escapeQuotes(_.join(", ")),i+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var O=i;i=$.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+O+"]); ":i+=" validate.errors = ["+O+"]; return false; ":i+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var j=_;if(j)for(var C,D=-1,z=j.length-1;D<z;){C=j[D+=1];var A=e.util.getProperty(C),T=(x=e.util.escapeQuotes(C),d+A);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,C,e.opts.jsonPointers)),i+=" if ( "+T+" === undefined ",g&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(C)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==_.length?i+="property "+e.util.escapeQuotes(_[0]):i+="properties "+e.util.escapeQuotes(_.join(", ")),i+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",l&&(p+="}",i+=" else { ")}e.errorPath=b;var N=h.baseId;for(var w in v){y=v[w];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(i+=" "+m+" = true; if ( "+d+e.util.getProperty(w)+" !== undefined ",g&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(w)+"') "),i+=") { ",h.schema=y,h.schemaPath=o+e.util.getProperty(w),h.errSchemaPath=c+"/"+e.util.escapeFragment(w),i+="  "+e.validate(h)+" ",h.baseId=N,i+=" }  ",l&&(i+=" if ("+m+") { ",p+="}"))}return l&&(i+="   "+p+" if ("+u+" == errors) {"),i},enum:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h=e.opts.$data&&n&&n.$data;h&&(i+=" var schema"+s+" = "+e.util.getData(n.$data,a,e.dataPathArr)+"; ");var p="i"+s,m="schema"+s;h||(i+=" var "+m+" = validate.schema"+o+";"),i+="var "+u+";",h&&(i+=" if (schema"+s+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+s+")) "+u+" = false; else {"),i+=u+" = false;for (var "+p+"=0; "+p+"<"+m+".length; "+p+"++) if (equal("+d+", "+m+"["+p+"])) { "+u+" = true; break; }",h&&(i+="  }  "),i+=" if (!"+u+") {   ";var v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+s+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var f=i;return i=v.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",l&&(i+=" else { "),i},format:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||"");if(!1===e.opts.format)return l&&(i+=" if (true) { "),i;var u,h=e.opts.$data&&n&&n.$data;h?(i+=" var schema"+s+" = "+e.util.getData(n.$data,a,e.dataPathArr)+"; ",u="schema"+s):u=n;var p=e.opts.unknownFormats,m=Array.isArray(p);if(h){i+=" var "+(v="format"+s)+" = formats["+u+"]; var "+(f="isObject"+s)+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+(g="formatType"+s)+" = "+f+" && "+v+".type || 'string'; if ("+f+") { ",e.async&&(i+=" var async"+s+" = "+v+".async; "),i+=" "+v+" = "+v+".validate; } if (  ",h&&(i+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),i+=" (","ignore"!=p&&(i+=" ("+u+" && !"+v+" ",m&&(i+=" && self._opts.unknownFormats.indexOf("+u+") == -1 "),i+=") || "),i+=" ("+v+" && "+g+" == '"+r+"' && !(typeof "+v+" == 'function' ? ",e.async?i+=" (async"+s+" ? await "+v+"("+d+") : "+v+"("+d+")) ":i+=" "+v+"("+d+") ",i+=" : "+v+".test("+d+"))))) {"}else{var v;if(!(v=e.formats[n])){if("ignore"==p)return e.logger.warn('unknown format "'+n+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(i+=" if (true) { "),i;if(m&&p.indexOf(n)>=0)return l&&(i+=" if (true) { "),i;throw new Error('unknown format "'+n+'" is used in schema at path "'+e.errSchemaPath+'"')}var f,g=(f="object"==typeof v&&!(v instanceof RegExp)&&v.validate)&&v.type||"string";if(f){var y=!0===v.async;v=v.validate}if(g!=r)return l&&(i+=" if (true) { "),i;if(y){if(!e.async)throw new Error("async format in sync schema");i+=" if (!(await "+(_="formats"+e.util.getProperty(n)+".validate")+"("+d+"))) { "}else{i+=" if (! ";var _="formats"+e.util.getProperty(n);f&&(_+=".validate"),i+="function"==typeof v?" "+_+"("+d+") ":" "+_+".test("+d+") ",i+=") { "}}var b=b||[];b.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",i+=h?""+u:""+e.util.toQuotedString(n),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=h?"' + "+u+" + '":""+e.util.escapeQuotes(n),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+o:""+e.util.toQuotedString(n),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var w=i;return i=b.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+w+"]); ":i+=" validate.errors = ["+w+"]; return false; ":i+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i},if:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h="errs__"+s,p=e.util.copy(e);p.level++;var m="valid"+p.level,v=e.schema.then,f=e.schema.else,g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),y=void 0!==f&&(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:e.util.schemaHasRules(f,e.RULES.all)),_=p.baseId;if(g||y){var b;p.createErrors=!1,p.schema=n,p.schemaPath=o,p.errSchemaPath=c,i+=" var "+h+" = errors; var "+u+" = true;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,i+="  "+e.validate(p)+" ",p.baseId=_,p.createErrors=!0,i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=w,g?(i+=" if ("+m+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(p)+" ",p.baseId=_,i+=" "+u+" = "+m+"; ",g&&y?i+=" var "+(b="ifClause"+s)+" = 'then'; ":b="'then'",i+=" } ",y&&(i+=" else { ")):i+=" if (!"+m+") { ",y&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(p)+" ",p.baseId=_,i+=" "+u+" = "+m+"; ",g&&y?i+=" var "+(b="ifClause"+s)+" = 'else'; ":b="'else'",i+=" } "),i+=" if (!"+u+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i},items:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h="errs__"+s,p=e.util.copy(e),m="";p.level++;var v="valid"+p.level,f="i"+s,g=p.dataLevel=e.dataLevel+1,y="data"+g,_=e.baseId;if(i+="var "+h+" = errors;var "+u+";",Array.isArray(n)){var b=e.schema.additionalItems;if(!1===b){i+=" "+u+" = "+d+".length <= "+n.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems",i+="  if (!"+u+") {   ";var E=E||[];E.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+n.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var P=i;i=E.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c=w,l&&(m+="}",i+=" else { ")}var S=n;if(S)for(var k,x=-1,$=S.length-1;x<$;)if(k=S[x+=1],e.opts.strictKeywords?"object"==typeof k&&Object.keys(k).length>0:e.util.schemaHasRules(k,e.RULES.all)){i+=" "+v+" = true; if ("+d+".length > "+x+") { ";var O=d+"["+x+"]";p.schema=k,p.schemaPath=o+"["+x+"]",p.errSchemaPath=c+"/"+x,p.errorPath=e.util.getPathExpr(e.errorPath,x,e.opts.jsonPointers,!0),p.dataPathArr[g]=x;var j=e.validate(p);p.baseId=_,e.util.varOccurences(j,y)<2?i+=" "+e.util.varReplace(j,y,O)+" ":i+=" var "+y+" = "+O+"; "+j+" ",i+=" }  ",l&&(i+=" if ("+v+") { ",m+="}")}if("object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))){p.schema=b,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+v+" = true; if ("+d+".length > "+n.length+") {  for (var "+f+" = "+n.length+"; "+f+" < "+d+".length; "+f+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers,!0);O=d+"["+f+"]";p.dataPathArr[g]=f;j=e.validate(p);p.baseId=_,e.util.varOccurences(j,y)<2?i+=" "+e.util.varReplace(j,y,O)+" ":i+=" var "+y+" = "+O+"; "+j+" ",l&&(i+=" if (!"+v+") break; "),i+=" } }  ",l&&(i+=" if ("+v+") { ",m+="}")}}else if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){p.schema=n,p.schemaPath=o,p.errSchemaPath=c,i+="  for (var "+f+" = 0; "+f+" < "+d+".length; "+f+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers,!0);O=d+"["+f+"]";p.dataPathArr[g]=f;j=e.validate(p);p.baseId=_,e.util.varOccurences(j,y)<2?i+=" "+e.util.varReplace(j,y,O)+" ":i+=" var "+y+" = "+O+"; "+j+" ",l&&(i+=" if (!"+v+") break; "),i+=" }"}return l&&(i+=" "+m+" if ("+h+" == errors) {"),i},maximum:En,minimum:En,maxItems:Pn,minItems:Pn,maxLength:Sn,minLength:Sn,maxProperties:kn,minProperties:kn,multipleOf:function(e,t,r){var i,s=" ",a=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h=e.opts.$data&&o&&o.$data;if(h?(s+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",i="schema"+a):i=o,!h&&"number"!=typeof o)throw new Error(t+" must be number");s+="var division"+a+";if (",h&&(s+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),s+=" (division"+a+" = "+u+" / "+i+", ",e.opts.multipleOfPrecision?s+=" Math.abs(Math.round(division"+a+") - division"+a+") > 1e-"+e.opts.multipleOfPrecision+" ":s+=" division"+a+" !== parseInt(division"+a+") ",s+=" ) ",h&&(s+="  )  "),s+=" ) {   ";var p=p||[];p.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+i+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be multiple of ",s+=h?"' + "+i:i+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var m=s;return s=p.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s},not:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="errs__"+s,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=c,i+=" var "+u+" = errors;  ";var m,v=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(m=h.opts.allErrors,h.opts.allErrors=!1),i+=" "+e.validate(h)+" ",h.createErrors=!0,m&&(h.opts.allErrors=m),e.compositeRule=h.compositeRule=v,i+=" if ("+p+") {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var g=i;i=f.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(i+=" if (false) { ");return i},oneOf:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h="errs__"+s,p=e.util.copy(e),m="";p.level++;var v="valid"+p.level,f=p.baseId,g="prevValid"+s,y="passingSchemas"+s;i+="var "+h+" = errors , "+g+" = false , "+u+" = false , "+y+" = null; ";var _=e.compositeRule;e.compositeRule=p.compositeRule=!0;var b=n;if(b)for(var w,E=-1,P=b.length-1;E<P;)w=b[E+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))?(p.schema=w,p.schemaPath=o+"["+E+"]",p.errSchemaPath=c+"/"+E,i+="  "+e.validate(p)+" ",p.baseId=f):i+=" var "+v+" = true; ",E&&(i+=" if ("+v+" && "+g+") { "+u+" = false; "+y+" = ["+y+", "+E+"]; } else { ",m+="}"),i+=" if ("+v+") { "+u+" = "+g+" = true; "+y+" = "+E+"; }";return e.compositeRule=p.compositeRule=_,i+=m+"if (!"+u+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},pattern:function(e,t,r){var i,s=" ",a=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h=e.opts.$data&&o&&o.$data;h?(s+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",i="schema"+a):i=o,s+="if ( ",h&&(s+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),s+=" !"+(h?"(new RegExp("+i+"))":e.usePattern(o))+".test("+u+") ) {   ";var p=p||[];p.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",s+=h?""+i:""+e.util.toQuotedString(o),s+="  } ",!1!==e.opts.messages&&(s+=" , message: 'should match pattern \"",s+=h?"' + "+i+" + '":""+e.util.escapeQuotes(o),s+="\"' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+c:""+e.util.toQuotedString(o),s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var m=s;return s=p.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s},properties:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="errs__"+s,h=e.util.copy(e),p="";h.level++;var m="valid"+h.level,v="key"+s,f="idx"+s,g=h.dataLevel=e.dataLevel+1,y="data"+g,_="dataProperties"+s,b=Object.keys(n||{}).filter(A),w=e.schema.patternProperties||{},E=Object.keys(w).filter(A),P=e.schema.additionalProperties,S=b.length||E.length,k=!1===P,x="object"==typeof P&&Object.keys(P).length,$=e.opts.removeAdditional,O=k||x||$,j=e.opts.ownProperties,C=e.baseId,D=e.schema.required;if(D&&(!e.opts.$data||!D.$data)&&D.length<e.opts.loopRequired)var z=e.util.toHash(D);function A(e){return"__proto__"!==e}if(i+="var "+u+" = errors;var "+m+" = true;",j&&(i+=" var "+_+" = undefined;"),O){if(i+=j?" "+_+" = "+_+" || Object.keys("+d+"); for (var "+f+"=0; "+f+"<"+_+".length; "+f+"++) { var "+v+" = "+_+"["+f+"]; ":" for (var "+v+" in "+d+") { ",S){if(i+=" var isAdditional"+s+" = !(false ",b.length)if(b.length>8)i+=" || validate.schema"+o+".hasOwnProperty("+v+") ";else{var T=b;if(T)for(var N=-1,R=T.length-1;N<R;)G=T[N+=1],i+=" || "+v+" == "+e.util.toQuotedString(G)+" "}if(E.length){var F=E;if(F)for(var I=-1,M=F.length-1;I<M;)ae=F[I+=1],i+=" || "+e.usePattern(ae)+".test("+v+") "}i+=" ); if (isAdditional"+s+") { "}if("all"==$)i+=" delete "+d+"["+v+"]; ";else{var L=e.errorPath,V="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),k)if($)i+=" delete "+d+"["+v+"]; ";else{i+=" "+m+" = false; ";var U=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+V+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var q=i;i=re.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+q+"]); ":i+=" validate.errors = ["+q+"]; return false; ":i+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,l&&(i+=" break; ")}else if(x)if("failing"==$){i+=" var "+u+" = errors;  ";var H=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=P,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Q=d+"["+v+"]";h.dataPathArr[g]=v;var B=e.validate(h);h.baseId=C,e.util.varOccurences(B,y)<2?i+=" "+e.util.varReplace(B,y,Q)+" ":i+=" var "+y+" = "+Q+"; "+B+" ",i+=" if (!"+m+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+v+"]; }  ",e.compositeRule=h.compositeRule=H}else{h.schema=P,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);Q=d+"["+v+"]";h.dataPathArr[g]=v;B=e.validate(h);h.baseId=C,e.util.varOccurences(B,y)<2?i+=" "+e.util.varReplace(B,y,Q)+" ":i+=" var "+y+" = "+Q+"; "+B+" ",l&&(i+=" if (!"+m+") break; ")}e.errorPath=L}S&&(i+=" } "),i+=" }  ",l&&(i+=" if ("+m+") { ",p+="}")}var K=e.opts.useDefaults&&!e.compositeRule;if(b.length){var W=b;if(W)for(var G,Y=-1,J=W.length-1;Y<J;){var Z=n[G=W[Y+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0:e.util.schemaHasRules(Z,e.RULES.all)){var X=e.util.getProperty(G),ee=(Q=d+X,K&&void 0!==Z.default);h.schema=Z,h.schemaPath=o+X,h.errSchemaPath=c+"/"+e.util.escapeFragment(G),h.errorPath=e.util.getPath(e.errorPath,G,e.opts.jsonPointers),h.dataPathArr[g]=e.util.toQuotedString(G);B=e.validate(h);if(h.baseId=C,e.util.varOccurences(B,y)<2){B=e.util.varReplace(B,y,Q);var te=Q}else{te=y;i+=" var "+y+" = "+Q+"; "}if(ee)i+=" "+B+" ";else{if(z&&z[G]){i+=" if ( "+te+" === undefined ",j&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(G)+"') "),i+=") { "+m+" = false; ";L=e.errorPath,U=c;var re,ie=e.util.escapeQuotes(G);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(L,G,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ie+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+ie+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";q=i;i=re.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+q+"]); ":i+=" validate.errors = ["+q+"]; return false; ":i+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,e.errorPath=L,i+=" } else { "}else l?(i+=" if ( "+te+" === undefined ",j&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(G)+"') "),i+=") { "+m+" = true; } else { "):(i+=" if ("+te+" !== undefined ",j&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(G)+"') "),i+=" ) { ");i+=" "+B+" } "}}l&&(i+=" if ("+m+") { ",p+="}")}}if(E.length){var se=E;if(se)for(var ae,ne=-1,oe=se.length-1;ne<oe;){Z=w[ae=se[ne+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0:e.util.schemaHasRules(Z,e.RULES.all)){h.schema=Z,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),i+=j?" "+_+" = "+_+" || Object.keys("+d+"); for (var "+f+"=0; "+f+"<"+_+".length; "+f+"++) { var "+v+" = "+_+"["+f+"]; ":" for (var "+v+" in "+d+") { ",i+=" if ("+e.usePattern(ae)+".test("+v+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);Q=d+"["+v+"]";h.dataPathArr[g]=v;B=e.validate(h);h.baseId=C,e.util.varOccurences(B,y)<2?i+=" "+e.util.varReplace(B,y,Q)+" ":i+=" var "+y+" = "+Q+"; "+B+" ",l&&(i+=" if (!"+m+") break; "),i+=" } ",l&&(i+=" else "+m+" = true; "),i+=" }  ",l&&(i+=" if ("+m+") { ",p+="}")}}}return l&&(i+=" "+p+" if ("+u+" == errors) {"),i},propertyNames:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="errs__"+s,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(i+="var "+u+" = errors;",e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=c;var m="key"+s,v="idx"+s,f="i"+s,g="' + "+m+" + '",y="data"+(h.dataLevel=e.dataLevel+1),_="dataProperties"+s,b=e.opts.ownProperties,w=e.baseId;b&&(i+=" var "+_+" = undefined; "),i+=b?" "+_+" = "+_+" || Object.keys("+d+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+m+" = "+_+"["+v+"]; ":" for (var "+m+" in "+d+") { ",i+=" var startErrs"+s+" = errors; ";var E=m,P=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=w,e.util.varOccurences(S,y)<2?i+=" "+e.util.varReplace(S,y,E)+" ":i+=" var "+y+" = "+E+"; "+S+" ",e.compositeRule=h.compositeRule=P,i+=" if (!"+p+") { for (var "+f+"=startErrs"+s+"; "+f+"<errors; "+f+"++) { vErrors["+f+"].propertyName = "+m+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),l&&(i+=" break; "),i+=" } }"}return l&&(i+="  if ("+u+" == errors) {"),i},required:function(e,t,r){var i=" ",s=e.level,a=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),u="valid"+s,h=e.opts.$data&&n&&n.$data;h&&(i+=" var schema"+s+" = "+e.util.getData(n.$data,a,e.dataPathArr)+"; ");var p="schema"+s;if(!h)if(n.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var m=[],v=n;if(v)for(var f,g=-1,y=v.length-1;g<y;){f=v[g+=1];var _=e.schema.properties[f];_&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))||(m[m.length]=f)}}else m=n;if(h||m.length){var b=e.errorPath,w=h||m.length>=e.opts.loopRequired,E=e.opts.ownProperties;if(l)if(i+=" var missing"+s+"; ",w){h||(i+=" var "+p+" = validate.schema"+o+"; ");var P="' + "+(j="schema"+s+"["+(x="i"+s)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,j,e.opts.jsonPointers)),i+=" var "+u+" = true; ",h&&(i+=" if (schema"+s+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+s+")) "+u+" = false; else {"),i+=" for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { "+u+" = "+d+"["+p+"["+x+"]] !== undefined ",E&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+p+"["+x+"]) "),i+="; if (!"+u+") break; } ",h&&(i+="  }  "),i+="  if (!"+u+") {   ",(O=O||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+P+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var S=i;i=O.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var k=m;if(k)for(var x=-1,$=k.length-1;x<$;){D=k[x+=1],x&&(i+=" || "),i+=" ( ( "+(N=d+(T=e.util.getProperty(D)))+" === undefined ",E&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(D)+"') "),i+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?D:T)+") ) "}i+=") {  ";var O;P="' + "+(j="missing"+s)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,j,!0):b+" + "+j),(O=O||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+P+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";S=i;i=O.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(w){h||(i+=" var "+p+" = validate.schema"+o+"; ");var j;P="' + "+(j="schema"+s+"["+(x="i"+s)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,j,e.opts.jsonPointers)),h&&(i+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+P+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),i+=" for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { if ("+d+"["+p+"["+x+"]] === undefined ",E&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+p+"["+x+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+P+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(i+="  }  ")}else{var C=m;if(C)for(var D,z=-1,A=C.length-1;z<A;){D=C[z+=1];var T=e.util.getProperty(D),N=(P=e.util.escapeQuotes(D),d+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,D,e.opts.jsonPointers)),i+=" if ( "+N+" === undefined ",E&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(D)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+P+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else l&&(i+=" if (true) {");return i},uniqueItems:function(e,t,r){var i,s=" ",a=e.level,n=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h="valid"+a,p=e.opts.$data&&o&&o.$data;if(p?(s+=" var schema"+a+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",i="schema"+a):i=o,(o||p)&&!1!==e.opts.uniqueItems){p&&(s+=" var "+h+"; if ("+i+" === false || "+i+" === undefined) "+h+" = true; else if (typeof "+i+" != 'boolean') "+h+" = false; else { "),s+=" var i = "+u+".length , "+h+" = true , j; if (i > 1) { ";var m=e.schema.items&&e.schema.items.type,v=Array.isArray(m);if(!m||"object"==m||"array"==m||v&&(m.indexOf("object")>=0||m.indexOf("array")>=0))s+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+u+"[i], "+u+"[j])) { "+h+" = false; break outer; } } } ";else{s+=" var itemIndices = {}, item; for (;i--;) { var item = "+u+"[i]; ";var f="checkDataType"+(v?"s":"");s+=" if ("+e.util[f](m,"item",e.opts.strictNumbers,!0)+") continue; ",v&&(s+=" if (typeof item == 'string') item = '\"' + item; "),s+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}s+=" } ",p&&(s+="  }  "),s+=" if (!"+h+") {   ";var g=g||[];g.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+c:""+o,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var y=s;s=g.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+y+"]); ":s+=" validate.errors = ["+y+"]; return false; ":s+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",d&&(s+=" else { ")}else d&&(s+=" if (true) { ");return s},validate:qa},$n=da.toHash,On=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],jn=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,s=t[r].split("/"),a=e;for(i=1;i<s.length;i++)a=a[s[i]];for(i=0;i<On.length;i++){var n=On[i],o=a[n];o&&(a[n]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},Cn=Ma.MissingRef,Dn=function e(t,r,i){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var a=n(t).then((function(){var e=s._addSchema(t,void 0,r);return e.validate||function e(t){try{return s._compile(t)}catch(e){if(e instanceof Cn)return i(e);throw e}function i(i){var a=i.missingSchema;if(l(a))throw new Error("Schema "+a+" is loaded but "+i.missingRef+" cannot be resolved");var o=s._loadingSchemas[a];return o||(o=s._loadingSchemas[a]=s._opts.loadSchema(a)).then(c,c),o.then((function(e){if(!l(a))return n(e).then((function(){l(a)||s.addSchema(e,a,void 0,r)}))})).then((function(){return e(t)}));function c(){delete s._loadingSchemas[a]}function l(e){return s._refs[e]||s._schemas[e]}}}(e)}));i&&a.then((function(e){i(null,e)}),i);return a;function n(t){var r=t.$schema;return r&&!s.getSchema(r)?e.call(s,{$ref:r},!0):Promise.resolve()}};var zn=function(e,t,r){var i,s,a=" ",n=e.level,o=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),p="valid"+n,m="errs__"+n,v=e.opts.$data&&c&&c.$data;v?(a+=" var schema"+n+" = "+e.util.getData(c.$data,o,e.dataPathArr)+"; ",s="schema"+n):s=c;var f,g,y,_,b,w="definition"+n,E=this.definition,P="";if(v&&E.$data){b="keywordValidate"+n;var S=E.validateSchema;a+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+b+" = "+w+".validate;"}else{if(!(_=e.useCustomRule(this,c,e.schema,e)))return;s="validate.schema"+l,b=_.code,f=E.compile,g=E.inline,y=E.macro}var k=b+".errors",x="i"+n,$="ruleErr"+n,O=E.async;if(O&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(a+=k+" = null;"),a+="var "+m+" = errors;var "+p+";",v&&E.$data&&(P+="}",a+=" if ("+s+" === undefined) { "+p+" = true; } else { ",S&&(P+="}",a+=" "+p+" = "+w+".validateSchema("+s+"); if ("+p+") { ")),g)E.statements?a+=" "+_.validate+" ":a+=" "+p+" = "+_.validate+"; ";else if(y){var j=e.util.copy(e);P="";j.level++;var C="valid"+j.level;j.schema=_.validate,j.schemaPath="";var D=e.compositeRule;e.compositeRule=j.compositeRule=!0;var z=e.validate(j).replace(/validate\.schema/g,b);e.compositeRule=j.compositeRule=D,a+=" "+z}else{(R=R||[]).push(a),a="",a+="  "+b+".call( ",e.opts.passContext?a+="this":a+="self",f||!1===E.schema?a+=" , "+h+" ":a+=" , "+s+" , "+h+" , validate.schema"+e.schemaPath+" ",a+=" , (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var A=o?"data"+(o-1||""):"parentData",T=o?e.dataPathArr[o]:"parentDataProperty",N=a+=" , "+A+" , "+T+" , rootData )  ";a=R.pop(),!1===E.errors?(a+=" "+p+" = ",O&&(a+="await "),a+=N+"; "):a+=O?" var "+(k="customErrors"+n)+" = null; try { "+p+" = await "+N+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } ":" "+k+" = null; "+p+" = "+N+"; "}if(E.modifying&&(a+=" if ("+A+") "+h+" = "+A+"["+T+"];"),a+=""+P,E.valid)u&&(a+=" if (true) { ");else{var R;a+=" if ( ",void 0===E.valid?(a+=" !",a+=y?""+C:""+p):a+=" "+!E.valid+" ",a+=") { ",i=this.keyword,(R=R||[]).push(a),a="",(R=R||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";var F=a;a=R.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+F+"]); ":a+=" validate.errors = ["+F+"]; return false; ":a+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var I=a;a=R.pop(),g?E.errors?"full"!=E.errors&&(a+="  for (var "+x+"="+m+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(a+=" "+$+".schema = "+s+"; "+$+".data = "+h+"; "),a+=" } "):!1===E.errors?a+=" "+I+" ":(a+=" if ("+m+" == errors) { "+I+" } else {  for (var "+x+"="+m+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(a+=" "+$+".schema = "+s+"; "+$+".data = "+h+"; "),a+=" } } "):y?(a+="   var err =   ",!1!==e.createErrors?(a+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; ")):!1===E.errors?a+=" "+I+" ":(a+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+x+"="+m+"; "+x+"<errors; "+x+"++) { var "+$+" = vErrors["+x+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+e.errorPath+";  "+$+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(a+=" "+$+".schema = "+s+"; "+$+".data = "+h+"; "),a+=" } } else { "+I+" } "),a+=" } ",u&&(a+=" else { ")}return a},An={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Tn={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:An.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:An.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Nn=/^[a-z_$][a-z0-9_$-]*$/i,Rn=function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!Nn.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var s=0;s<i.length;s++)n(e,i[s],t);else n(e,i,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function n(e,t,i){for(var s,a=0;a<r.length;a++){var n=r[a];if(n.type==t){s=n;break}}s||(s={type:t,rules:[]},r.push(s));var o={keyword:e,definition:i,custom:!0,code:zn,implements:i.implements};s.rules.push(o),r.custom[e]=o}return r.keywords[e]=r.all[e]=!0,this},Fn=function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},In=function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,s=0;s<i.length;s++)if(i[s].keyword==e){i.splice(s,1);break}return this},Mn=function e(t,r){e.errors=null;var i=this._validateKeyword=this._validateKeyword||this.compile(Tn,!0);if(i(t))return!0;if(e.errors=i.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(i.errors));return!1};var Ln={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},Vn=Qn;Qn.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var i=this._addSchema(e);r=i.validate||this._compile(i)}var s=r(t);!0!==r.$async&&(this.errors=r.errors);return s},Qn.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},Qn.prototype.addSchema=function(e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,r,i);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return Jn(this,t=xa.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,r,i,!0),this},Qn.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},Qn.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(Un)?Un:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(r,e);if(!i&&t){var s="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(s);this.logger.error(s)}return i},Qn.prototype.getSchema=function(e){var t=Bn(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=xa.schema.call(e,{schema:{}},t);if(r){var i=r.schema,s=r.root,a=r.baseId,n=Ba.call(e,i,s,void 0,a);return e._fragments[t]=new Sa({ref:t,fragment:!0,schema:i,root:s,baseId:a,validate:n}),n}}(this,e)}},Qn.prototype.removeSchema=function(e){if(e instanceof RegExp)return Kn(this,this._schemas,e),Kn(this,this._refs,e),this;switch(typeof e){case"undefined":return Kn(this,this._schemas),Kn(this,this._refs),this._cache.clear(),this;case"string":var t=Bn(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,i=r?r(e):e;this._cache.del(i);var s=this._getId(e);s&&(s=xa.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},Qn.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},Qn.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,s="",a=0;a<e.length;a++){var n=e[a];n&&(s+=i+n.dataPath+" "+n.message+r)}return s.slice(0,-r.length)},Qn.prototype._addSchema=function(e,t,r,i){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var s=this._opts.serialize,a=s?s(e):e,n=this._cache.get(a);if(n)return n;i=i||!1!==this._opts.addUsedSchema;var o=xa.normalizeId(this._getId(e));o&&i&&Jn(this,o);var c,l=!1!==this._opts.validateSchema&&!t;l&&!(c=o&&o==xa.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=xa.ids.call(this,e),u=new Sa({id:o,schema:e,localRefs:d,cacheKey:a,meta:r});"#"!=o[0]&&i&&(this._refs[o]=u);this._cache.put(a,u),l&&c&&this.validateSchema(e,!0);return u},Qn.prototype._compile=function(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=Ba.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function s(){var t=e.validate,r=t.apply(this,arguments);return s.errors=t.errors,r}},Qn.prototype.compileAsync=Dn,Qn.prototype.addKeyword=Rn,Qn.prototype.getKeyword=Fn,Qn.prototype.removeKeyword=In,Qn.prototype.validateKeyword=Mn,Qn.ValidationError=Ma.Validation,Qn.MissingRefError=Ma.MissingRef,Qn.$dataMetaSchema=jn;var Un="http://json-schema.org/draft-07/schema",qn=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Hn=["/properties"];function Qn(e){if(!(this instanceof Qn))return new Qn(e);var t,r;e=this._opts=da.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:Zn,warn:Zn,error:Zn};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=mn(e.format),this._cache=e.cache||new tn,this._loadingSchemas={},this._compilations=[],this.RULES=((t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}]).all=$n(r=["type","$comment"]),t.types=$n(["number","integer","string","array","object","boolean","null"]),t.forEach((function(e){e.rules=e.rules.map((function(e){var i;if("object"==typeof e){var s=Object.keys(e)[0];i=e[s],e=s,i.forEach((function(e){r.push(e),t.all[e]=!0}))}return r.push(e),t.all[e]={keyword:e,code:xn[e],implements:i}})),t.all.$comment={keyword:"$comment",code:xn.$comment},e.type&&(t.types[e.type]=e)})),t.keywords=$n(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t),this._getId=function(e){switch(e.schemaId){case"auto":return Yn;case"id":return Wn;default:return Gn}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=Ua),this._metaOpts=function(e){for(var t=da.copy(e._opts),r=0;r<qn.length;r++)delete t[qn[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=Ln,e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=An;e._opts.$data&&(r=jn(r,Hn));e.addMetaSchema(r,Un,!0),e._refs["http://json-schema.org/schema"]=Un}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function Bn(e,t){return t=xa.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function Kn(e,t,r){for(var i in t){var s=t[i];s.meta||r&&!r.test(i)||(e._cache.del(s.cacheKey),delete t[i])}}function Wn(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function Gn(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function Yn(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function Jn(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function Zn(){}var Xn={type:"object",properties:{type:{type:"string"},style:{},discover_existing:{type:"boolean"},standard_configuration:{type:"boolean"},title:{type:["boolean","string"]},am_pm:{type:"boolean"},show_header_toggle:{type:"boolean"},time_step:{type:"integer",minimum:1,maximum:60},first_weekday:{type:"string"},include:{type:"array",items:{type:"string"}},exclude:{type:"array",items:{type:"string"}},groups:{type:"array",items:{type:"object",properties:{name:{type:"string"},icon:{type:"string"},include:{type:"array",items:{type:"string"}},exclude:{type:"array",items:{type:"string"}}},required:["name"],additionalProperties:!1}},customize:{type:"object",additionalProperties:{type:["object"],properties:{icon:{type:"string"},name:{type:"string"},actions:{type:"array",items:{type:"object",properties:{icon:{type:"string"},name:{type:"string"},service:{type:"string"},service_data:{type:"object"},variable:{type:"object",oneOf:[{properties:{field:{type:"string"},name:{type:"string"},unit:{type:"string"},min:{type:"number",minimum:0},max:{type:"number",minimum:1},step:{type:"number",minimum:.1},optional:{type:"boolean"}},required:["field"],additionalProperties:!1},{properties:{field:{type:"string"},name:{type:"string"},options:{type:"array",items:{type:"object",properties:{value:{type:"string"},name:{type:"string"},icon:{type:"string"}},required:["value"],additionalProperties:!1}}},required:["field"],additionalProperties:!1}]}},required:["service"],additionalProperties:!1}},states:{oneOf:[{type:"array",items:{type:"string"}},{type:"object",properties:{min:{type:"number"},max:{type:"number"},step:{type:"number"},unit:{type:"string"}},required:["min","max"],additionalProperties:!1}]},exclude_actions:{type:"array",items:{type:"string"}}},additionalProperties:!1}}},additionalProperties:!1};const eo=new Vn({allErrors:!0,jsonPointers:!0});const to=te`
    .card-header {
      display: flex;
      justify-content: space-between;
    }
    .card-header .name {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: flex;
    }
    .card-header ha-switch {
      padding: 5px;
    }
    .card-header ha-icon-button {
        position: absolute;
        right: 6px;
        top: 6px;
    }
    .card-content {
      flex: 1;
    }
    .card-content > *:first-child {
      margin-top: 0;
    }
    .card-content > *:last-child {
      margin-bottom: 0;
    }
    div.text-field, div.secondary {
      color: var(--secondary-text-color);
    }
    .disabled {
      color: var(--disabled-text-color);
    }
    div.header {
      color: var(--secondary-text-color);
      text-transform: uppercase;
      font-weight: 500;
      font-size: 12px;
      margin: 20px 0px 0px 0px;
    }
    mwc-button {
      margin: 2px 0px;
    }
    mwc-button.active {
      background: var(--primary-color);
      --mdc-theme-primary: var(--text-primary-color);
      border-radius: 4px;
    }      
    mwc-button ha-icon {
      margin-right: 11px;
    }
    mwc-button.warning {
      --mdc-theme-primary: var(--error-color);
    }
    div.checkbox-container {
      display: grid;
      grid-template-columns: max-content 1fr max-content;
      grid-template-rows: min-content;
      grid-template-areas: "checkbox slider value";
      grid-gap: 0px 10px;
    }
    div.checkbox-container div.checkbox {
      grid-area: checkbox;
      display: flex;
      align-items: center;x
    }
    div.checkbox-container div.slider {
      grid-area: slider;
      display: flex;
      align-items: center;
    }
    div.checkbox-container div.value {
      grid-area: value;
      min-width: 40px;
      display: flex;
      align-items: center;
    }
  `;function ro(e,t,r){switch(e){case"position":return Number(t)+"%";case"temperature":return`${Number(t)}${r.config.unit_system.temperature}`;case"humidity":return Number(t)+"%";case"brightness":return Math.round(Number(t)/2.55)+"%";default:return""+t}}function io(e,t){if("name"in e&&e.name)return String(e.name);const r=ke(e.service);let i,s=Object.assign({},e.service_data);s&&Object.keys(s).length&&Object.entries(s).forEach(([e,t])=>{let a=ls("services."+Ks({service:r,service_data:{[e]:t}}));a&&(i=a,delete s[e])}),!i&&s&&Object.keys(s).length&&Object.entries(s).forEach(([e])=>{let t=ls(`services.${r}_${e}`);t&&(i=t)}),i||(i=ls("services."+Ks({service:r}))||r);const a=i.match(/\{([^}]+)\}/);if(a){let e="";Object.keys(s).length&&Object.entries(s).forEach(([r,i])=>{a[1].includes(r)&&(e=a[1].replace(r,ro(r,i,t)))}),i=i.replace(/\{([^}]+)\}/,e)}return Qs(i)}let so=class extends ie{shouldUpdate(e){const t=e.get("hass");return!t||1!=e.size||!this.schedule_entity||t.states[this.schedule_entity]!==this.hass.states[this.schedule_entity]}render(){var e;if(!this.config||!this.hass||!this.schedule_entity)return I``;const t=this.hass.states[this.schedule_entity];if(!t)return I`
        <hui-warning>
          Entity not found '${this.schedule_entity}'
        </hui-warning>
      `;const r=t.attributes.entries.map(js),i=this.computeNextEntry(r),s=Gs(i.actions.map(e=>t.attributes.actions[e])[0]);let a="(unknown entity)",n="help-circle-outline",o=aa(s.entity,this.hass,this.config);if(o){n=Js(o,s).icon||o.icon||"flash",a=void 0!==o.name?o.name:this.hass.states[s.entity].attributes.friendly_name||ke(s.entity)}(null===(e=t.attributes.friendly_name)||void 0===e?void 0:e.match(/^schedule\ #[0-9a-f]{6}$/i))||t.attributes.friendly_name;return I`
      <state-badge
        .hass=${this.hass}
        .stateObj=${t}
        .overrideIcon=${Bs(n)}
      >
      </state-badge>
      <div class="info">
        ${a.length?Hs(Qs(a))+": ":""} 
        ${Hs(io(s,this.hass))}
        <div class="secondary">
          ${Hs(ws(this.computeTimestamp(i)))}<br>
          ${r.length>1?2==r.length?ls("misc.one_additional_task"):ls("misc.x_additional_tasks","{count}",String(r.length-1)):""}
        </div>
      </div>
      <ha-switch
        ?checked=${"waiting"==t.state||"triggered"==t.state}
        @click=${this.toggleDisabled}
      >
      </ha-switch>
    `}computeTimestamp(e){let t=new Date,r=new Date;r.setSeconds(0);let i=e.time.value;if(e.time.event){let t=this.hass.states["sun.sun"];if(!t)return new Date(0);i=(e.time.event==us.Sunrise?fs(t.attributes.next_rising):fs(t.attributes.next_setting))+e.time.value}let s=Math.floor(i/60),a=i-60*s;r.setHours(s),r.setMinutes(a);const n=this.hass.states["binary_sensor.workday_sensor"];function o(t){if(!n)return!1;const r=new Date;return r.setHours(0,0,0,0),0==Math.floor((t.valueOf()-r.valueOf())/864e5)&&(e.days.type==hs.Workday?"on"!=n.state:e.days.type==hs.Weekend&&"on"==n.state)}let c=gs(e.days,n);for(;r.valueOf()<=t.valueOf()||!c.includes(_s(r))||o(r);)r.setDate(r.getDate()+1);return r}computeNextEntry(e){let t=e.map(e=>this.computeTimestamp(e)),r=-1,i=-1;return t.forEach((e,t)=>{(-1===r||e.valueOf()<r)&&(r=e.valueOf(),i=t)}),e[i]}toggleDisabled(e){if(!this.hass||!this.schedule_entity)return;e.stopPropagation();let t=!e.target.checked;this.hass.callService("switch",t?"turn_on":"turn_off",{entity_id:this.schedule_entity})}};so.styles=te`
      :host {
        display: flex;
        align-items: center;
        flex-direction: row;
      }
      .info {
        margin-left: 16px;
        flex: 1 0 60px;
      }
      .info,
      .info > * {
        color: var(--primary-text-color);
        transition: color 0.2s ease-in-out;
      }
      .secondary {
        display: block;
        color: var(--secondary-text-color);
        transition: color 0.2s ease-in-out;
      }
      state-badge {
        flex: 0 0 40px;
      }
      ha-switch {
        padding: 13px 5px;
      }
  `,t([J()],so.prototype,"hass",void 0),t([J()],so.prototype,"schedule_entity",void 0),t([J()],so.prototype,"config",void 0),so=t([G("scheduler-entity-row")],so);let ao=class extends ie{constructor(){super(...arguments),this.schedules=[],this.scheduleEntities=[]}loadSchedules(){if(!this._hass||!this.config)return;let e=Object.entries(this._hass.states).filter(([e])=>sa(e)).map(([,e])=>e);void 0===this.config.discover_existing||this.config.discover_existing||(e=e.filter(e=>e.attributes.actions.map(Gs).map(e=>e.entity).every(e=>this._hass.states[e]&&na(e,this._hass,this.config)))),e.sort((e,t)=>{const r=e.attributes.next_trigger?new Date(e.attributes.next_trigger).valueOf():null,i=t.attributes.next_trigger?new Date(t.attributes.next_trigger).valueOf():null;return null!==r&&null!==i?r>i?1:r<i?-1:e.entity_id<t.entity_id?1:-1:null!==i?1:null!==r?-1:e.entity_id<t.entity_id?1:-1}),this.schedules=e}shouldUpdate(e){const t=e.get("_hass");if(t&&1==e.size){const e=Object.keys(t.states).filter(e=>sa(e));return e.length!==this.scheduleEntities.length?(this.loadSchedules(),!0):!!e.some((e,t)=>e!==this.scheduleEntities[t])||!!e.some(e=>t.states[e]!==this._hass.states[e])}return this.loadSchedules(),!0}set hass(e){this.scheduleEntities=Object.keys(e.states).filter(e=>sa(e)),this._hass=e}render(){return this._hass&&this.config&&this.schedules?I`
      <ha-card>
        <div class="card-header">
          <div class="name">
            ${void 0!==this.config.title?"string"==typeof this.config.title?this.config.title:"":ls("scheduler")}
          </div>
          ${this.schedules.length&&this.config.show_header_toggle?I`
          <ha-switch
            ?checked=${this.schedules.some(e=>"waiting"==e.state||"triggered"==e.state)}
            @change=${this.toggleDisableAll}
          >
          </ha-switch>`:""}
        </div>
        <div class="card-content">
          ${this.getRows()}
        </div>
        ${this._hass.user.is_admin?I`
        <div class="card-actions">
          <mwc-button
            @click=${this.newItemClick}
          >new item
          </mwc-button>
        </div>
      </ha-card>
      `:""}
      `:I``}getRows(){return this.config&&this._hass&&this.schedules?this.schedules.length?this.schedules.map(e=>e.entity_id).map(e=>{const t=this._hass.states[e];return!t.attributes.actions.map(Gs).every(e=>na(e.entity,this._hass,this.config))?I`
          <hui-warning>
            <scheduler-entity-row
              class="${"waiting"==t.state||"triggered"==t.state?"":"disabled"}"
              .hass=${this._hass}
              .schedule_entity=${t.entity_id}
              .config=${this.config}
              @click=${()=>this.editItemClick(e)}
            >
            </scheduler-entity-row>
            <div style="margin: 5px 5px 0px 5px">
              This schedule was discovered from HA, but is not included in your card. Make sure to include it, or set 'discover_existing: false' to hide it.
            </div>
          </hui-warning>
          `:I`
            <scheduler-entity-row
              class="${"waiting"==t.state||"triggered"==t.state?"":"disabled"}"
              .hass=${this._hass}
              .schedule_entity=${t.entity_id}
              .config=${this.config}
              @click=${()=>this.editItemClick(e)}
            >
            </scheduler-entity-row>
          `}):I`${ls("instructions.no_entries_defined")}`:I``}toggleDisableAll(e){if(!this._hass||!this.schedules)return;let t=e.target.checked;this.schedules.forEach(e=>{this._hass.callService("switch",t?"turn_on":"turn_off",{entity_id:e.entity_id})})}editItemClick(e){let t=new CustomEvent("editClick",{detail:e});this.dispatchEvent(t)}newItemClick(){let e=new CustomEvent("newClick");this.dispatchEvent(e)}};function no(e,t){const r=[];t.groups&&t.groups.forEach(t=>{const i={id:t.name,name:t.name,icon:t.icon||"folder-outline",entities:e.filter(e=>ea(e,t))};r.push(i)});const i=e.filter(e=>!r.some(t=>t.entities.includes(e)));return i.map(Se).filter((e,t,r)=>r.indexOf(e)===t).forEach(e=>{const s={id:e,name:ls("domains."+e)||e,icon:(void 0===t.standard_configuration||t.standard_configuration)&&e in ta?ta[e]:"folder-outline",entities:i.filter(t=>ea(t,{include:[e]}))};r.push(s)}),r}ao.styles=te`
    ${to}
    .card-content > * {
      margin: 20px 0px;
    }
    scheduler-entity-row {
      cursor: pointer;
    }
    scheduler-entity-row.disabled {
      --primary-text-color: var(--disabled-text-color);
      --secondary-text-color: var(--disabled-text-color);
      --paper-item-icon-color: var(--disabled-text-color);
    }
      hui-warning {
        padding: 10px 0px;
      }
  `,t([J()],ao.prototype,"_hass",void 0),t([J()],ao.prototype,"config",void 0),ao=t([G("scheduler-entities-card")],ao);let oo=class extends ie{constructor(){super(...arguments),this.items=[]}render(){return this.items.length?this.items.map(e=>this.createButton(e)):I`
        <div class="text-field">
          <slot></slot>
        </div>
      `}createButton(e){let t=Array.isArray(this.value)?this.value:[this.value];"object"!=typeof e&&(e={name:String(e)});let r=void 0!==e.id?e.id:e.name;return I`
      <mwc-button class="${t.includes(r)?"active":""}" @click="${()=>this.selectItem(r)}">
        ${e.icon?I`<ha-icon icon="${Bs(e.icon)}" class="padded-right"></ha-icon>`:""}
        ${Qs(e.name)}
      </mwc-button>
    `}selectItem(e){if(Array.isArray(this.value)){let t=Array.isArray(this.value)?this.value:[];if(t.includes(e)){if(void 0!==this.min&&t.length<=this.min)return;t=t.filter(t=>t!=e)}else t.push(e);this.value=t}else if(e==this.value){if(!this.optional)return;this.value=null}else this.value=e;let t=new CustomEvent("change");this.dispatchEvent(t)}};oo.styles=to,t([J({type:Array})],oo.prototype,"items",void 0),t([J()],oo.prototype,"value",void 0),t([J({type:Number})],oo.prototype,"min",void 0),t([J({type:Boolean})],oo.prototype,"optional",void 0),oo=t([G("button-group")],oo);let co=class extends ie{getGroups(){if(!this.hass||!this.config)return[];let e=no(Object.keys(this.hass.states).filter(e=>na(e,this.hass,this.config,{actions:!0})),this.config);return e.sort((e,t)=>e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:1),e}getEntitiesForGroup(e){if(!this.selectedGroup||!this.hass)return[];let t=e.find(e=>e.id==this.selectedGroup).entities.map(e=>aa(e,this.hass,this.config)).filter(e=>e).map(e=>e.name?e:Object.assign(e,{name:this.hass.states[e.id].attributes.friendly_name||ke(e.id)}));return t.sort((e,t)=>e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:1),t}getActionsForEntity(e){if(!this.selectedEntity)return[];const t=e.find(e=>e.id==this.selectedEntity);let r=t.actions.map(Ws).map(e=>e.name?e:Object.assign(e,{name:io(e,this.hass)})).map(e=>e.icon?e:Object.assign(e,{icon:"flash"}));return t.exclude_actions&&(r=r.filter(e=>{var r;return!(null===(r=t.exclude_actions)||void 0===r?void 0:r.includes(e.name.trim().toLowerCase()))})),r.sort((e,t)=>e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:1),r}render(){if(!this.hass||!this.config)return I``;const e=this.getGroups();1==e.length&&this.selectedGroup!==e[0].id&&this.selectGroup(e[0].id);const t=this.getEntitiesForGroup(e);1==t.length&&this.selectedEntity!==t[0].id&&this.selectEntity(t[0].id);const r=this.getActionsForEntity(t);return I`
      <ha-card>
        <div class="card-header">
          <div class="name">
            ${void 0!==this.config.title?"string"==typeof this.config.title?this.config.title:"":ls("scheduler")}
          </div>
          <ha-icon-button icon="hass:close" @click=${this.cancelClick}>
          </ha-icon-button>
        </div>
        <div class="card-content">

          <div class="header">${ls("fields.group")}</div>
          <button-group .items=${e} value=${this.selectedGroup} @change=${this.selectGroup}>
            ${ls("instructions.no_groups_defined")}
          </button-group>

          <div class="header">${ls("fields.entity")}</div>
          <button-group .items=${t} value=${this.selectedEntity} @change=${this.selectEntity}>
            ${this.selectedGroup?ls("instructions.no_entities_for_group"):ls("instructions.no_group_selected")}
          </button-group>

          <div class="header">${ls("fields.action")}</div>
          <button-group .items=${r} value=${this.selectedAction} @change=${this.selectAction}>
            ${this.selectedEntity?ls("instructions.no_actions_for_entity"):ls("instructions.no_entity_selected")}
          </button-group>
          ${this.makeSchemeButton(r)}
        </div>
        <div class="card-actions">
          <mwc-button @click=${this.nextClick} ?disabled=${!this.selectedAction}>${ls("actions.next")}</mwc-button>
        </div>
      </ha-card>
      `}makeSchemeButton(e){return e.length?I`
      <div class="header">or</div>
      <div class="option-list">
        <mwc-button
          class="${"make_scheme"==this.selectedAction?" active":""}"
          @click=${()=>{this.selectedAction="make_scheme"}}>
          <ha-icon icon="${Bs("chart-timeline")}" class="padded-right"></ha-icon>
          ${Qs("make_scheme")}
        </mwc-button>
      </div>
    </div>
    `:I``}selectGroup(e){let t="string"==typeof e?e:e.target.value;this.selectedGroup=t,this.selectedEntity=void 0,this.selectedAction=void 0}selectEntity(e){let t="string"==typeof e?e:e.target.value;this.selectedEntity=t,this.selectedAction=void 0}selectAction(e){let t="string"==typeof e?e:e.target.value;this.selectedAction=t}cancelClick(){let e=new CustomEvent("cancelClick");this.dispatchEvent(e)}nextClick(){let e=new CustomEvent("nextClick",{detail:{entity:this.selectedEntity,action:this.selectedAction}});this.dispatchEvent(e)}};co.styles=to,t([J()],co.prototype,"hass",void 0),t([J()],co.prototype,"config",void 0),t([J()],co.prototype,"selectedGroup",void 0),t([J()],co.prototype,"selectedEntity",void 0),t([J()],co.prototype,"selectedAction",void 0),co=t([G("scheduler-editor-card")],co);let lo=class extends ie{constructor(){super(...arguments),this._val=0,this.formatAmPm=!1,this.stepSize=10,this.maxOffset=2}set value(e){let t=this.value;this._val=e,this.requestUpdate("value",t)}get value(){return ps(this._val,this.stepSize)}updated(){let e=new CustomEvent("change",{detail:{event:this.event}});this.dispatchEvent(e)}firstUpdated(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=vs(this.value,e)}render(){return I`
      <div class="time-picker">
        <div class="hours-up">
          <mwc-button @click="${this.hoursUp}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="hours">${this.getHours()}</div>
        <div class="hours-down">
          <mwc-button @click="${this.hoursDown}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
        <div class="separator">:</div>
        <div class="minutes-up">
          <mwc-button @click="${this.minutesUp}">
            <ha-icon icon="hass:chevron-up"></ha-icon>
          </mwc-button>
        </div>
        <div class="minutes">${this.getMinutes()}</div>
        <div class="minutes-down">
          <mwc-button @click="${this.minutesDown}">
            <ha-icon icon="hass:chevron-down"></ha-icon>
          </mwc-button>
        </div>
        ${this.getSuffix()}
        <div class="options">
          ${this.getSunModeToggle()}
        </div>
      </div>
    `}getHours(){return ms(this.value,{amPm:this.formatAmPm}).hours}getMinutes(){return ms(this.value,{amPm:this.formatAmPm}).minutes}hoursUp(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=vs(this._val+60,e)}hoursDown(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=vs(this._val-60,e)}minutesUp(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=vs(this._val+this.stepSize,e)}minutesDown(){let e=this.event?{stepSize:this.stepSize,signed:!0,max:60*this.maxOffset}:{stepSize:this.stepSize};this.value=vs(this._val-this.stepSize,e)}getSunModeToggle(){return this.hass&&this.hass.states["sun.sun"]?I`
          <mwc-button @click="${this.toggleMode}" class="${this.event?"active":""}">
            <ha-icon icon="hass:theme-light-dark"></ha-icon>
          </mwc-button>
      `:I``}getAmPm(){return ms(this._val,{amPm:this.formatAmPm}).amPm}getBeforeAfter(){return this.value<0?ls("words.before"):ls("words.after")}getSuffix(){return this.event?I`
      <div class="suffix">
        <mwc-button @click="${this.toggleBeforeAfter}">
          ${this.getBeforeAfter()}
        </mwc-button>
        <mwc-button @click="${this.toggleSunriseSunset}">
          <ha-icon icon="hass:${this.event==us.Sunrise?"weather-sunny":"weather-night"}"></ha-icon>
        </mwc-button>
      </div>
    `:this.formatAmPm?I`
      <div class="suffix">
        <mwc-button @click="${this.toggleAmPm}">
          ${this.getAmPm()}
        </mwc-button>
      </div>
    `:I``}toggleAmPm(){this._val<720?this.value=vs(this._val+720):this.value=vs(this._val-720)}toggleBeforeAfter(){this.value=-this._val}toggleSunriseSunset(){this.event=this.event==us.Sunrise?us.Sunset:us.Sunrise,this.value=this._val}toggleMode(){if(!this.hass)return;let e=this.hass.states["sun.sun"],t=fs(e.attributes.next_rising),r=fs(e.attributes.next_setting),i=this.value;if(this.event){let e=this.event==us.Sunrise?t:r;this.event=void 0,this.value=i+e}else{let e;Math.abs(i-t)<Math.abs(i-r)?(e=t,this.event=us.Sunrise):(e=r,this.event=us.Sunset),this.value=i-e,this.value>60*this.maxOffset?this.value=60*this.maxOffset:this.value<60*-this.maxOffset&&(this.value=60*-this.maxOffset)}}};function uo(e){return e.endTime.value-e.time.value}lo.styles=te`
      div.time-picker {
        display: grid;
        grid-template-columns: min-content min-content min-content 1fr min-content;
        grid-template-rows: min-content min-content min-content;
        grid-template-areas: "hours-up   .         minutes-up   suffix options"
                             "hours      separator minutes      suffix options"
                             "hours-down .         minutes-down suffix options";
        grid-gap: 10px 0px;
        align-items: center;
      }

      div.hours-up { grid-area: hours-up; }
      div.hours { grid-area: hours; }
      div.hours-down { grid-area: hours-down; }
      div.separator { grid-area: separator; }
      div.minutes-up { grid-area: minutes-up; }
      div.minutes { grid-area: minutes; }
      div.minutes-down { grid-area: minutes-down; }
      div.suffix { grid-area: suffix; flex-grow: 1; }
      div.options { grid-area: options; }

      div.hours-up, div.hours-down, div.minutes-up, div.minutes-down {
        --mdc-icon-size: 42px;
      }

      div.hours, div.minutes {
        font-size: 42px;
        text-align: center;
      }

      div.separator {
        font-size: 36px;
      }

      div.suffix mwc-button {
        --mdc-typography-button-font-size: 16px;
        --mdc-icon-size: 32px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
  `,t([J({type:Number})],lo.prototype,"value",null),t([J()],lo.prototype,"hass",void 0),t([J({type:String})],lo.prototype,"event",void 0),t([J({type:Boolean})],lo.prototype,"formatAmPm",void 0),t([J({type:Number})],lo.prototype,"stepSize",void 0),lo=t([G("time-picker")],lo);let ho=class extends ie{constructor(){super(...arguments),this.entries=[],this.actions=[],this.stepSize=10,this._activeEntry=null,this._activeThumb=null}render(){return I`
      <div class="slider-container">
        <div>
          <div class="slider-track">
            ${this.getSlots()}
          </div>
        </div>
        <div class="slider-legend">
          <div class="slider-legend-item empty"></div>
          <div class="slider-legend-item">03:00</div>
          <div class="slider-legend-item">06:00</div>
          <div class="slider-legend-item">09:00</div>
          <div class="slider-legend-item">12:00</div>
          <div class="slider-legend-item">15:00</div>
          <div class="slider-legend-item">18:00</div>
          <div class="slider-legend-item">21:00</div>
          <div class="slider-legend-item empty"></div>
        </div>
      </div>
      <div>
        ${null!==this._activeEntry&&this.entries.length<10?I`
        <mwc-button @click="${this._addSlot}">
          <ha-icon icon="hass:plus-circle-outline" class="padded-right"></ha-icon>
          Add
        </mwc-button>
        `:I`
        <mwc-button disabled>
          <ha-icon icon="hass:plus-circle-outline" class="padded-right"></ha-icon>
          Add
        </mwc-button>
        `}
        ${null!==this._activeEntry&&this.entries.length>3?I`
        <mwc-button @click="${this._removeSlot}">
          <ha-icon icon="hass:minus-circle-outline" class="padded-right"></ha-icon>
          Remove
        </mwc-button>
        `:I`
        <mwc-button disabled>
          <ha-icon icon="hass:minus-circle-outline" class="padded-right"></ha-icon>
          Remove
        </mwc-button>
        `}
      </div>
    `}getSlots(){let e=[];return this.entries.forEach((t,r)=>{if(e.push(I`
        <div class="slider-slot${this._activeEntry==r?" active":""}${t.action?" filled":""}" @click="${this._handleSegmentClick}" index="${r}" style="width: ${uo(t)/1440*100}%">
          ${this.getEntryAction(t)}
        </div>
      `),r<this.entries.length-1){let t=this.entries[r].endTime.value;e.push(I`
        <div class="slider-thumb${this._activeThumb==r?" active":""}" index=${r}>
          <ha-icon icon="hass:unfold-more-vertical"  @mousedown="${this._handleTouchStart}" @touchstart="${this._handleTouchStart}"></ha-icon>
          <div class="slider-thumb-tooltip" value="time" @update="${this._updateMarker}">
            ${ms(t).time}
          </div>
        </div>`)}}),e}updated(){this.shadowRoot.querySelectorAll(".slider-thumb-tooltip").forEach((e,t)=>{let r=this.entries[t].endTime.value;e.innerText=ms(r).time})}getEntryAction(e){if(!this.hass)return;if(!e.action)return"";let t=this.actions.find(t=>t.id==e.action);if(e.variable&&e.variable.type==xe.Level&&t.variable){if(e.variable.enabled)return ro(t.variable.field,Number(e.variable.value),this.hass)}else if(e.variable&&e.variable.type==xe.List)return Qs(String(e.variable.value));const r=t.service;return Qs(t.name||ls("services."+r)||r)}_handleSegmentClick(e){let t=e.target,r=Number(t.getAttribute("index"));this._activeEntry=this._activeEntry==r?null:r;let i=new CustomEvent("update",{detail:{entry:this._activeEntry}});this.dispatchEvent(i)}_handleTouchStart(e){let t;if(t=e.target,!t)return;let r=t.parentNode,i=r.parentElement,s=i.getBoundingClientRect(),a=r.previousElementSibling,n=r.nextElementSibling,o=r.querySelector(".slider-thumb-tooltip");this._activeThumb=Number(r.getAttribute("index"));const c=a.offsetWidth+n.offsetWidth,l=s.width;let d=Array.from(i.querySelectorAll(".slider-slot")),u=d.map(e=>e.offsetWidth),h=0,p=-1;d.forEach((e,t)=>{e==a?p=t:-1==p&&(h+=u[t])});var m=e=>{let t;t="undefined"!=typeof TouchEvent&&e instanceof TouchEvent?e.changedTouches[0].pageX:e.pageX;let r=t-s.left;r<0?r=0:r>s.width&&(r=s.width),r>c+h&&(r=c+h),r<h&&(r=h),a.style.width=Math.round(r-h)+"px",n.style.width=Math.round(c-(r-h))+"px";let i=r/l*1440;i=i>=1440?i=1440:ps(i,this.stepSize),o.dispatchEvent(new CustomEvent("update",{detail:{time:i}}))},v=()=>{window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v),m=()=>{};let e=fs(o.innerText),t=uo(this.entries[p])+uo(this.entries[p+1]),r=this.entries[p].time.value,i=[...this.entries];Object.assign(i[p],{endTime:{value:e}}),Object.assign(i[p+1],{time:{value:e},endTime:{value:r+t}}),this._activeThumb=null;let s=new CustomEvent("update",{detail:{entries:i}});this.dispatchEvent(s)};window.addEventListener("mouseup",v),window.addEventListener("touchend",v),window.addEventListener("mousemove",m),window.addEventListener("touchmove",m)}_updateMarker(e){let t=e.detail,r=Number(t.time);1440==r&&(r-=1),e.target.innerText=ms(r).time}_addSlot(){let e=this.entries[this._activeEntry],t=e.time.value,r=e.endTime.value,i=ps(t+uo(e)/2,this.stepSize),s=Object.assign({time:{value:i},endTime:{value:r},action:""},Us(e,["entity","days"])),a=[...this.entries];Object.assign(a[this._activeEntry],{endTime:{value:i}}),a.splice(this._activeEntry+1,0,s);let n=new CustomEvent("update",{detail:{entries:a}});this.dispatchEvent(n)}_removeSlot(){let e=this._activeEntry==this.entries.length-1?this._activeEntry-1:this._activeEntry,t=Object.assign({},this.entries[e]);Object.assign(t,{endTime:this.entries[e+1].endTime});let r=[...this.entries];r.splice(e,2,t),this._activeEntry==this.entries.length&&this._activeEntry--;let i=new CustomEvent("update",{detail:{entries:r}});this.dispatchEvent(i)}};ho.styles=te`

      div.slider-track {
        height: 50px;
        width: 100%;
        display: flex;
      }
      
      div.slider-slot {
        height: calc(100%);
        width: 50%;
        display: flex;
        background: var(--primary-color);
        opacity: 0.85;
        z-index: 1;
        cursor: pointer;
        color: var(--text-primary-color);
        justify-content: center;
        align-items: center;
        background: none;
        cursor: pointer;
        position: relative;
        z-index: 1;
      }

      div.slider-slot:before  {
        content: " ";
        background: var(--primary-color);
        opacity: 0.3;
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: -1;
       }

      div.slider-slot:hover:before  {
        opacity: 0.6;
       }


      div.slider-slot.filled:before  {
        opacity: 0.8;
       }

      div.slider-slot.filled:hover:before  {
        opacity: 1;
       }

      div.slider-slot.active:before {
        opacity: 0.85;
        background: var(--accent-color);
      }
      // div.slider-slot:hover, div.slider-slot.active:hover {
      //   opacity: 1;
      // }
      
      div.slider-track div.slider-slot:first-of-type:before {
        border-radius: 4px 0px 0px 4px;
      }
      div.slider-track div.slider-slot:last-of-type:before {
        border-radius: 0px 4px 4px 0px;
      }
      div.slider-thumb {
        height: 100%;
        width: 2px;
        background: var(--card-background-color);
        display: flex;
        cursor: pointer;
        z-index: 5;
        margin: 0px -1px;
      }
      div.slider-thumb.active {
        z-index: 100;
      }
      div.slider-thumb ha-icon {
        background: var(--card-background-color);
        color: var(--primary-text-color);
        width: 28px;
        height: 28px;
        --mdc-icon-size: 28px;
        border-radius: 100%;
        margin-left: -13px;
        margin-top: 12px;
      }

      div.slider-legend {
        display: flex;
        width: 100%;
      }
      div.slider-legend-item {
        width: calc(100% / 8);
        font-size: 0.9em;
        line-height: 25px;
        display: flex;
        justify-content: center;
        position: relative;
      }

      div.slider-legend-item:before {
        content: " ";
        background: var(--disabled-text-color);
        position: absolute;
        left: 0px;
        top: 0px;
        width: 1px;
        height: 8px;
        margin-left: 50%;
        margin-top: -4px;
      }
      div.slider-legend-item.empty {
        width: calc(100% / 16);
        display: flex;
      }
      div.slider-legend-item.empty:before {
        display: none;
      }
      div.slider-thumb-tooltip {
        background: var(--primary-color);
        border-radius: 5px;
        color: var(--text-primary-color);
        font-size: 1em;
        position: absolute;
        height: 26px;
        width: 50px;
        margin-top: -28px;
        margin-left: -25px;
        text-align: center;
        line-height: 26px;
        z-index: 1;
      }

      div.slider-thumb-tooltip:before {
        content: " ";
        background: var(--primary-color);
        transform: rotate(-45deg);
        transform-origin: center;
        opacity: 1;
        position: absolute;
        margin-top: 20px;
        margin-left: 21px;
        left: 0px;
        top: 0px;
        width: 10px;
        height: 10px;
        z-index: -1;
      
      }

      div.slider-thumb.active div.slider-thumb-tooltip {
        background: var(--accent-color);
        z-index: 10;
      }
      div.slider-thumb.active div.slider-thumb-tooltip:before {
        background: var(--accent-color);
      }


      .padded-right {
        margin-right: 11px;
      }
      
      mwc-button {
        margin: 2px 0px;
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }
  `,t([J()],ho.prototype,"hass",void 0),t([J({type:Array})],ho.prototype,"entries",void 0),t([J({type:Array})],ho.prototype,"actions",void 0),t([J({type:Number})],ho.prototype,"stepSize",void 0),t([J({type:Number})],ho.prototype,"_activeEntry",void 0),t([J({type:Number})],ho.prototype,"_activeThumb",void 0),ho=t([G("timeslot-editor")],ho);let po=class extends ie{constructor(){super(...arguments),this.min=0,this.max=100,this.step=1,this.value=0,this.unit="",this.optional=!1,this.disabled=!1,this.scaleGain=1,this.scaleOffset=0}firstUpdated(){(async()=>{await(async()=>{if(customElements.get("ha-checkbox")&&customElements.get("ha-slider"))return;await customElements.whenDefined("partial-panel-resolver");const e=document.createElement("partial-panel-resolver");e.hass={panels:[{url_path:"tmp",component_name:"config"}]},e._updateRoutes(),await e.routerOptions.routes.tmp.load(),await customElements.whenDefined("ha-panel-config");const t=document.createElement("ha-panel-config");await t.routerOptions.routes.automation.load()})()})(),"%"==this.unit&&(this.scaleOffset=this.min,this.scaleGain=(this.max-this.min)/100,this.min=0,this.max=100),this.disabled&&!this.optional&&(this.disabled=!1),isNaN(this.value)&&(this.value=this.min),this.requestUpdate()}render(){return I`
      <div class="checkbox-container">
        <div class="checkbox">
        ${this.getCheckbox()}
        </div>
        <div class="slider">
        ${this.getSlider()}
        </div>
        <div class="value${this.disabled?" disabled":""}">
        ${this.getScaledValue()}${this.unit}
        </div>
      </div>
    `}getScaledValue(){let e=(this.value-this.scaleOffset)/this.scaleGain;return e=Math.round(e/this.step)*this.step,e<this.min?e=this.min:e>this.max&&(e=this.max),e}getSlider(){return this.disabled?I`
        <ha-slider
        pin
        min=${this.min}
        max=${this.max}
        step=${this.step}
        value=${this.getScaledValue()}
        disabled
        ></ha-slider>`:I`
        <ha-slider
        pin
        min=${this.min}
        max=${this.max}
        step=${this.step}
        value=${this.getScaledValue()}
        @change=${this.updateValue}
        ></ha-slider>`}getCheckbox(){return this.optional?I`
      <ha-checkbox
        @change="${this.toggleChecked}"
        ?checked=${!this.disabled}
      >
      </ha-checkbox>`:I``}toggleChecked(e){let t=e.target.checked;this.disabled=!t;let r=new CustomEvent("change");this.dispatchEvent(r)}updateValue(e){let t=Number(e.target.value)*this.scaleGain+this.scaleOffset;t=Math.round(t/this.step)*this.step,this.value=t}};po.styles=te`
      ${to}
      :host {
        width: 100%;
      }
      ha-slider {
        width: 100%;
        --paper-slider-pin-start-color: var(--primary-color);
      }
  `,t([J({type:Number})],po.prototype,"min",void 0),t([J({type:Number})],po.prototype,"max",void 0),t([J({type:Number})],po.prototype,"step",void 0),t([J({type:Number})],po.prototype,"value",void 0),t([J({type:String})],po.prototype,"unit",void 0),t([J({type:Boolean})],po.prototype,"optional",void 0),t([J({type:Boolean})],po.prototype,"disabled",void 0),po=t([G("variable-slider")],po);let mo=class extends ie{constructor(){super(...arguments),this.entries=[],this.activeEntry=null,this.timeslots=!1,this.editItem=!1}firstUpdated(){if(this.actions&&this.hass)if(this.timeslots){let e=this.actions.map(e=>e.name?e:Object.assign(e,{name:io(e,this.hass)}));e.sort((e,t)=>e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:1),this.actions=e}else this.activeEntry=0}render(){return this.hass&&this.config&&this.entries&&this.entity&&this.actions?this.timeslots?I`
      <ha-card>
        <div class="card-header">
          <div class="name">
            ${void 0!==this.config.title?"string"==typeof this.config.title?this.config.title:"":ls("scheduler")}
          </div>
          <ha-icon-button icon="hass:close" @click=${this.cancelClick}>
          </ha-icon-button>
        </div>
        <div class="card-content">
          <div class="header">${ls("fields.action")}</div>
          <div class="summary">
            <div class="summary-entity">
              <ha-icon icon="${Bs(this.entity.icon)}">
              </ha-icon>
              ${Hs(Qs(this.entity.name||this.hass.states[this.entity.id].attributes.friendly_name||ke(this.entity.id)))}
            </div>
            <div class="summary-arrow">
              <ha-icon icon="hass:arrow-right">
              </ha-icon>
            </div>
            <div class="summary-action">
              <ha-icon icon="${Bs("chart-timeline")}">
              </ha-icon>
              ${Hs(Qs("make_scheme"))}
            </div>
          </div>

          <div class="header">${ls("fields.days")}</div>
          <button-group .items=${Ps} value=${this.entries[0].days.type} @change=${this.selectDays}>
          </button-group>
          ${this.entries[0].days.type==hs.Custom?I`
            <div>
              <button-group .items=${bs(Es,this.config.first_weekday)} .value=${this.entries[0].days.custom_days} min="1" @change=${this.selectDays}>
              </button-group>
            </div>
          `:""}

          <div class="header">${ls("fields.time")}</div>
          <timeslot-editor
            .hass=${this.hass}
            .actions=${this.actions}
            .entries=${this.entries}
            @update=${this.handlePlannerUpdate}
          >
          </timeslot-editor>
          
          <div class="header">${ls("fields.action")}</div>
          <button-group
            .items=${null!==this.activeEntry?this.actions.map(e=>e.icon?e:Object.assign(e,{icon:"flash"})):[]}
            value=${null!==this.activeEntry?this.entries[this.activeEntry].action:""}
            optional="true"
            @change=${this.selectAction}
          >
            Select a timeslot first
          </button-group>

          ${this.getVariableEditor()}
        </div>
        <div class="card-actions">
          <mwc-button @click=${this.saveClick} ?disabled=${!this.entries.some(e=>e.action)}>${ls("actions.save")}</mwc-button>
          ${this.hass.user.is_admin&&this.editItem?I`<mwc-button class="warning" @click=${this.deleteClick}>${ls("actions.delete")}</mwc-button>`:""}
          <mwc-button @click=${this.optionsClick} style="float: right">options</mwc-button>
        </div>
      </ha-card>`:I`
      <ha-card>
        <div class="card-header">
          <div class="name">
            ${void 0!==this.config.title?"string"==typeof this.config.title?this.config.title:"":ls("scheduler")}
          </div>
          <ha-icon-button icon="hass:close" @click=${this.cancelClick}>
          </ha-icon-button>
        </div>
        <div class="card-content">
          <div class="header">${ls("fields.action")}</div>
          <div class="summary">
            <div class="summary-entity">
              <ha-icon icon="${Bs(this.entity.icon)}">
              </ha-icon>
              ${Hs(Qs(this.entity.name||this.hass.states[this.entity.id].attributes.friendly_name||ke(this.entity.id)))}
            </div>
            <div class="summary-arrow">
              <ha-icon icon="hass:arrow-right">
              </ha-icon>
            </div>
            <div class="summary-action">
              <ha-icon icon="${Bs(this.actions[0].icon||"flash")}">
              </ha-icon>
              ${Hs(io(this.actions[0],this.hass))}
            </div>
          </div>

          ${this.getVariableEditor()}

          <div class="header">${ls("fields.days")}</div>
          <button-group .items=${Ps} value=${this.entries[0].days.type} @change=${this.selectDays}>
          </button-group>
          ${this.entries[0].days.type==hs.Custom?I`
            <div>
              <button-group .items=${bs(Es,this.config.first_weekday)} .value=${this.entries[0].days.custom_days} min="1" @change=${this.selectDays}>
              </button-group>
            </div>
          `:""}

          <div class="header">${ls("fields.time")}</div>
          <time-picker
            .hass=${this.hass}
            .value=${this.entries[0].time.value}
            .event=${this.entries[0].time.event}
            stepSize=${this.config.time_step||10}
            ?formatAmPm=${this.config.am_pm}
            @change=${this.updateTime}
          >
          </time-picker>
        </div>
        <div class="card-actions">
          <mwc-button @click="${this.saveClick}">${ls("actions.save")}</mwc-button>
          ${this.hass.user.is_admin&&this.editItem?I`<mwc-button class="warning" @click=${this.deleteClick}>${ls("actions.delete")}</mwc-button>`:""}
          <mwc-button @click="${this.optionsClick}" style="float: right">options</mwc-button>
        </div>
      </ha-card>`:I``}updateActiveEntry(e){if(null===this.activeEntry)return;let t=[...this.entries];Object.assign(t[this.activeEntry],e),this.entries=t}updateTime(e){const t=e.target,r=Number(t.value),i=e.detail.event;this.updateActiveEntry({time:e.detail.event?{event:i,value:r}:{value:r}})}handlePlannerUpdate(e){if(e.detail.hasOwnProperty("entries")){const t=e.detail.entries;t.length<this.entries.length&&this.activeEntry==this.entries.length-1&&(this.activeEntry=this.entries.length-2),this.entries=[...t]}else e.detail.hasOwnProperty("entry")&&(null!==e.detail.entry?this.activeEntry=Number(e.detail.entry):this.activeEntry=null)}selectAction(e){if(!this.actions||!this.entries||null===this.activeEntry)return;let t=e.target.value;this.updateActiveEntry({action:t,variable:void 0})}getVariableEditor(){if(!this.hass||!this.actions||null===this.activeEntry||!this.entries[this.activeEntry].action)return I``;let e=this.actions.find(e=>e.id==this.entries[this.activeEntry].action);if(!e.variable)return I``;if(e.variable.type==xe.Level){let t=e.variable;this.entries[this.activeEntry].variable||this.updateActiveEntry({variable:{type:xe.Level,value:t.min,enabled:!t.optional}});let r=this.entries[this.activeEntry].variable;return I`
          <div class="header">
            ${t.name||ls("service_parameters."+t.field)||Qs(t.field)}
          </div>
          <variable-slider
            min=${t.min}
            max=${t.max}
            step=${t.step}
            value=${r.value}
            unit=${t.unit}
            ?optional=${t.optional}
            ?disabled=${!r.enabled}
            @change=${this.updateLevelValue}
          >
          </variable-slider>
      `}if(e.variable.type==xe.List){let t=e.variable;this.entries[this.activeEntry].variable||this.updateActiveEntry({variable:{type:xe.List,value:t.options[0].value}});let r=this.entries[this.activeEntry].variable;return I`
        <div class="header">
          ${t.name||ls("service_parameters."+t.field)||Qs(t.field)}
        </div>
        <button-group
          .items=${t.options.map(e=>Object.assign(e,{name:e.value}))}
          value=${r.value}
          @change=${this.updateListValue}
        >
          ${ls("instructions.no_entries_defined")}
        </button-group>
    `}return I``}updateLevelValue(e){if(null===this.activeEntry)return;const t=e.target;this.updateActiveEntry({variable:{type:xe.Level,value:Number(t.value),enabled:"false"==String(t.disabled)}})}updateListValue(e){if(null===this.activeEntry)return;const t=e.target.value;this.updateActiveEntry({variable:{type:xe.List,value:t}})}selectDays(e){let t=Object.assign({},this.entries[0].days);const r=e.target.value;Object.values(hs).includes(r)?(r!=hs.Custom||t.custom_days||Object.assign(t,{custom_days:gs(t,this.hass.states["binary_sensor.workday_sensor"])}),Object.assign(t,{type:r})):Object.assign(t,{custom_days:[...r]}),this.entries=this.entries.map(e=>Object.assign(e,{days:t}))}cancelClick(){let e=new CustomEvent("cancelClick");this.dispatchEvent(e)}saveClick(){let e=new CustomEvent("saveClick",{detail:this.entries});this.dispatchEvent(e)}optionsClick(){let e=new CustomEvent("optionsClick",{detail:this.entries});this.dispatchEvent(e)}deleteClick(){let e=new CustomEvent("deleteClick");this.dispatchEvent(e)}};mo.styles=te`
    ${to}
    div.summary {
      display: grid;
      grid-template-columns: 1fr max-content 1fr;
      grid-template-areas: 'entity arrow action';
      grid-auto-flow: column;
      grid-gap: 5px;
    }

    div.summary-entity {
      grid-area: entity;
    }
    div.summary-action {
      grid-area: action;
    }
    div.summary-arrow {
      grid-area: arrow;
      color: var(--secondary-text-color);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    div.summary-entity,
    div.summary-action {
      color: var(--dark-primary-color);
      padding: 10px;
      font-size: 14px;
      font-weight: 500;
      --mdc-icon-size: 20px;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      display: grid;
      grid-template-columns: min-content 1fr;
      grid-template-areas: 'icon text';
      grid-auto-flow: column;
      grid-gap: 10px;
    }

    div.summary-entity:before,
    div.summary-action:before {
      content: ' ';
      background: var(--primary-color);
      opacity: 0.15;
      border-radius: 4px;
      position: absolute;
      left: 0px;
      top: 0px;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    
  `,t([J()],mo.prototype,"hass",void 0),t([J()],mo.prototype,"config",void 0),t([J()],mo.prototype,"entries",void 0),t([J()],mo.prototype,"actions",void 0),t([J()],mo.prototype,"entity",void 0),t([J()],mo.prototype,"activeEntry",void 0),t([J({type:Boolean})],mo.prototype,"timeslots",void 0),t([J({type:Boolean})],mo.prototype,"editItem",void 0),mo=t([G("scheduler-timepicker-card")],mo);let vo=class extends ie{constructor(){super(...arguments),this.selected=!1,this.editMode=!1}firstUpdated(){this.hass&&this.config&&this.item&&(this.entity=aa(this.item.entity,this.hass,this.config))}render(){if(!this.item||!this.hass||!this.config)return I``;const e=this.hass.states[this.item.entity];return this.entity&&e?I`
      <div class="list-item">
        <mwc-button @click="${this.entityButtonClick}" class="${this.selected?"active":""}">
          <ha-icon icon="${Bs(this.entity.icon||"folder-outline")}"></ha-icon>
          ${Qs(this.entity.name||e.attributes.friendly_name||ke(e.entity_id))}
        </mwc-button>
          ${this.getMatchTypeButton()}
          ${this.getStateButton()}
        </div>
      </div>
    `:I`
        <hui-warning>
          Entity not found '${this.item.entity}'
        </hui-warning>
      `}entityButtonClick(){this.selected=!this.selected,this.fireEvent()}getMatchTypeButton(){if(!this.item)return I``;let e,t=this.item.match_type;return t==$e.Equal?e="is":t==$e.Unequal?e="is not":t==$e.Below?e="below":t==$e.Above&&(e="above"),I`
      <mwc-button @click="${this.matchTypeButtonClick}">
        ${e}
      </mwc-button>
    `}matchTypeButtonClick(){if(this.selected=!1,this.editMode=!1,!this.item)return;let e,t=this.item.match_type;"string"==typeof this.item.state?t==$e.Equal?e=$e.Unequal:t==$e.Unequal&&(e=$e.Equal):t==$e.Equal?e=$e.Unequal:t==$e.Unequal?e=$e.Below:t==$e.Below?e=$e.Above:t==$e.Above&&(e=$e.Equal),this.item=Object.assign(Object.assign({},this.item),{match_type:e}),this.fireEvent()}getStateButton(){return this.item?"string"==typeof this.item.state?I`
        <mwc-button @click="${this.stateButtonClick}">
          ${Qs(this.item.state)}
        </mwc-button>
      `:this.editMode?I`
        <div class="button-container">
          <div class="button-left">
            <mwc-button class="arrow-button"
              @mousedown="${()=>this.stateDecrement()}"
              @touchstart="${()=>this.stateDecrement()}"
              @mouseup="${this.stateUpdateStop}"
              @mouseout="${this.stateUpdateStop}"
              @touchend="${this.stateUpdateStop}"
              @touchcancel="${this.stateUpdateStop}"
              @blur="${this.stateUpdateStop}"
            >
              <ha-icon icon="hass:chevron-left"></ha-icon>
            </mwc-button>
          </div>
          <div class="value">
            <mwc-button class="button" @click="${this.toggleEditMode}">
              ${this.getState()}
            </mwc-button>
          </div>
          <div class="button-right">
            <mwc-button class="arrow-button"
              @mousedown="${()=>this.stateIncrement()}"
              @touchstart="${()=>this.stateIncrement()}"
              @mouseup="${this.stateUpdateStop}"
              @mouseout="${this.stateUpdateStop}"
              @touchend="${this.stateUpdateStop}"
              @touchcancel="${this.stateUpdateStop}"
              @blur="${this.stateUpdateStop}"
            >
              <ha-icon icon="hass:chevron-right"></ha-icon>
            </mwc-button>
          </div>
        </div>
      `:I`
        <mwc-button class="button" @click="${this.toggleEditMode}">
          ${this.getState()}
        </mwc-button>
      `:I``}stateButtonClick(){if(!this.item||!this.entity)return;this.selected=!1;let e=this.item.state;const t=this.entity.states;if(!t||!Array.isArray(t))return;let r=0;for(r=0;r<t.length&&t[r]!=e;r++);let i=r<t.length-1?t[r+1]:t[0];this.item=Object.assign(Object.assign({},this.item),{state:i}),this.fireEvent()}stateDecrement(e=null){if(!this.item||!this.entity)return;clearTimeout(this.timer);let t=Number(this.item.state);const r=this.entity.states;if(!r||Array.isArray(r))return;let i=r.step||1;t-=i,t<r.min&&(t=r.min),t=Number((Math.round(t/i)*i).toPrecision(5)),this.item=Object.assign(Object.assign({},this.item),{state:t});let s=null!==e?Number(.9*e):300;s<50&&(s=50),this.timer=setTimeout(()=>{this.stateDecrement(s)},s)}stateIncrement(e=null){if(!this.item||!this.entity)return;clearTimeout(this.timer);let t=Number(this.item.state);const r=this.entity.states;if(!r||Array.isArray(r))return;let i=r.step||1;t+=i,t>r.max&&(t=r.max),t=Number((Math.round(t/i)*i).toPrecision(5)),this.item=Object.assign(Object.assign({},this.item),{state:t});let s=null!==e?Number(.9*e):300;s<50&&(s=50),this.timer=setTimeout(()=>{this.stateIncrement(s)},s)}stateUpdateStop(){clearTimeout(this.timer),this.fireEvent()}toggleEditMode(){this.editMode=!this.editMode}getState(){if(!this.item||!this.entity)return;let e=this.item.state,t=this.entity.states;return!Array.isArray(t)&&t.unit?`${e}${t.unit}`:e}fireEvent(){let e={item:this.item,selected:this.selected},t=new CustomEvent("change",{detail:e});this.dispatchEvent(t)}};vo.styles=te`
      div.list-item {
        background: none;
        cursor: pointer;
        padding: 2px 10px;
        margin: 5px 0px;
        position: relative;
        z-index: 1;
      }

      div.list-item:before  {
        content: " ";
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: -1;
        border-radius: 4px;
        background: none;
        opacity: 0.1;
      }

      mwc-button ha-icon {
        margin-right: 11px;
      }

      mwc-button {
        margin: 2px 0px;
        --mdc-button-disabled-ink-color: var(--primary-color);
      }

      mwc-button.active {
        background: var(--primary-color);
        --mdc-theme-primary: var(--text-primary-color);
        border-radius: 4px;
      }

      div.button-container {
        display: grid;
        grid-template-columns: min-content min-content min-content;
        grid-template-areas: "button-left value button-right";      
      }

      div.button-container .button-left {grid-area: button-left}
      div.button-container .value {grid-area:value}
      div.button-container .button-right {grid-area: button-right}

      mwc-button.arrow-button {
        padding: 0px;
        margin: 0px;
        --mdc-button-horizontal-padding: 0px;
      }

      .mdc-button {
        min-width: 20px !important;
      }
  `,t([J()],vo.prototype,"hass",void 0),t([J()],vo.prototype,"config",void 0),t([J()],vo.prototype,"item",void 0),t([J()],vo.prototype,"selected",void 0),t([J()],vo.prototype,"entity",void 0),t([J()],vo.prototype,"editMode",void 0),vo=t([G("condition-entity-row")],vo);let fo=class extends ie{constructor(){super(...arguments),this.entries=[],this.editItem=null,this.selectedItem=null,this.addCondition=!1}render(){var e;return this.hass&&this.config?I`
      <ha-card>
        <div class="card-header">
          <div class="name">
            ${void 0!==this.config.title?"string"==typeof this.config.title?this.config.title:"":ls("scheduler")}
          </div>
          <ha-icon-button icon="hass:close" @click=${this.cancelClick}>
          </ha-icon-button>
        </div>
        <div class="card-content">

        ${this.addCondition?I`
          ${this.renderAddCondition()}
        `:I`
          <div class="header">Conditions</div>
          <div style="float: right; margin-top: -1em">
            Any
              <ha-switch
                style="margin: 0px 10px"
                @change=${this.conditionTypeSwitchClick}
                ?disabled=${!this.entries[0].conditions||this.entries[0].conditions.items.length<2}
                ?checked=${(null===(e=this.entries[0].conditions)||void 0===e?void 0:e.type)==Oe.All}
              ></ha-switch>
            All
            
          </div>
          ${this.renderConditions()}
          
          <div style="margin-top: 10px">
          <mwc-button @click=${this.addConditionClick}>
            <ha-icon icon="hass:plus-circle-outline" class="padded-right"></ha-icon>
            Add
          </mwc-button>
          <mwc-button @click="${this.removeConditionClick}" ?disabled=${null===this.selectedItem}>
            <ha-icon icon="hass:minus-circle-outline" class="padded-right"></ha-icon>
            Remove
          </mwc-button>
          </div>

          <div class="header">Friendly name</div>
          <paper-input no-label-float
            .value=${this.friendlyName||""}
            .configValue=${""}
            @value-changed=${this.updateName}
          ></paper-input>

          <div class="header">Other</div>
          <div class="checkbox-container">
            <div class="checkbox">
              <ha-switch @change="${this.updateRunOnce}" ?checked=${this.entries[0].options&&"run_once"in this.entries[0].options&&this.entries[0].options.run_once}></ha-switch>
            </div>
            <div class="slider">
              Disable automatically after triggering
            </div>
          </div>
          
        `}
        </div>
        <div class="card-actions">
          ${this.addCondition?I`
            <mwc-button @click=${this.confirmConditionClick}>Confirm</mwc-button>
          `:I`
            <mwc-button @click=${this.saveClick}>${ls("actions.save")}</mwc-button>
            <mwc-button @click=${this.backClick} style="float: right">back</mwc-button>
          `}
        </div>
      </ha-card>
      `:I``}renderAddCondition(){if(!this.addCondition||!this.hass||!this.config)return I``;let e=no(Object.keys(this.hass.states).filter(e=>na(e,this.hass,this.config,{states:!0})),this.config);e.sort((e,t)=>e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:1);let t=[];return this.selectedGroup&&(t=e.find(e=>e.id==this.selectedGroup).entities.map(e=>aa(e,this.hass,this.config)).filter(e=>e).map(e=>e.name?e:Object.assign(e,{name:this.hass.states[e.id].attributes.friendly_name||ke(e.id)})),t.sort((e,t)=>e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:1)),I`
      <div class="header">${ls("fields.group")}</div>
      <button-group
        .items=${e}
        value=${this.selectedGroup}
        @change=${this.selectGroup}
      >
        ${ls("instructions.no_groups_defined")}
      </button-group>
      
      <div class="header">${ls("fields.entity")}</div>
      <button-group
        .items=${t}
        value=${this.selectedEntity}
        @change=${this.selectEntity}
      >
        ${this.selectedGroup?ls("instructions.no_entities_for_group"):ls("instructions.no_group_selected")}
      </button-group>
    `}selectGroup(e){this.selectedItem=null,this.editItem=null,this.selectedGroup=e.target.value,this.selectedEntity=void 0}selectEntity(e){this.selectedItem=null,this.editItem=null,this.selectedEntity=e.target.value}renderConditions(){var e;let t=(null===(e=this.entries[0].conditions)||void 0===e?void 0:e.items)||[];return t.length?t.map((e,t)=>I`
        <condition-entity-row
          .item=${e}
          .hass=${this.hass}
          .config=${this.config}
          .selected=${this.selectedItem===t}
          .editMode=${this.editItem===t}
          @change="${e=>this.updateCondition(e,t)}"
        >
        </condition-entity-row>
      `):I`<div class="text-field">No conditions yet</div>`}updateCondition(e,t){if(e.detail.selected)this.selectedItem=t,this.editItem=null;else{this.selectedItem==t&&(this.selectedItem=null),this.editItem!=t&&(this.editItem=t);let r=[...this.entries[0].conditions.items];r[t]=Object.assign({},e.detail.item),this.entries=this.entries.map(e=>Object.assign(e,{conditions:Object.assign(e.conditions,{items:r})}))}}addConditionClick(){this.addCondition=!this.addCondition,this.editItem=null,this.selectedItem=null}confirmConditionClick(){var e,t;if(!this.selectedEntity||!this.config||!this.hass)return;const r=aa(this.selectedEntity,this.hass,this.config).states,i=Array.isArray(r)?1:r.step||1;let s=Array.isArray(r)?r[0]:Number((Math.round((r.min+r.max)/2/i)*i).toPrecision(5)),a={entity:this.selectedEntity,match_type:$e.Equal,state:s},n=(null===(e=this.entries[0].conditions)||void 0===e?void 0:e.items.length)?[...this.entries[0].conditions.items]:[],o=(null===(t=this.entries[0].conditions)||void 0===t?void 0:t.type)?this.entries[0].conditions.type:Oe.Any;n.push(a),this.entries=this.entries.map(e=>Object.assign(e,{conditions:{items:n,type:o}})),this.selectedEntity=void 0,this.selectedGroup=void 0,this.selectedItem=null,this.addCondition=!1}removeConditionClick(){if(null===this.selectedItem)return;let e=[...this.entries[0].conditions.items];e.splice(this.selectedItem,1),this.entries=this.entries.map(t=>Object.assign(t,{conditions:Object.assign(t.conditions,{items:e})})),this.selectedItem=null}conditionTypeSwitchClick(e){let t=e.target.checked?Oe.All:Oe.Any;this.entries=this.entries.map(e=>Object.assign(e,{conditions:Object.assign(e.conditions,{type:t})}))}updateName(e){let t=e.target.value;t!=this.friendlyName&&(this.friendlyName=t)}updateRunOnce(e){let t=e.target.checked,r=Object.assign({},this.entries[0].options);t?Object.assign(r,{run_once:!0}):"run_once"in r&&delete r.run_once,this.entries=this.entries.map(e=>Object.assign(e,{options:r}))}cancelClick(){if(this.addCondition)this.addCondition=!this.addCondition,this.editItem=null,this.selectedItem=null;else{let e=new CustomEvent("cancelClick");this.dispatchEvent(e)}}saveClick(){let e=new CustomEvent("saveClick",{detail:{entries:this.entries,friendlyName:this.friendlyName}});this.dispatchEvent(e)}backClick(){let e=new CustomEvent("backClick",{detail:{entries:this.entries,friendlyName:this.friendlyName}});this.dispatchEvent(e)}};fo.styles=to,t([J()],fo.prototype,"hass",void 0),t([J()],fo.prototype,"config",void 0),t([J()],fo.prototype,"entries",void 0),t([J()],fo.prototype,"friendlyName",void 0),t([J()],fo.prototype,"selectedGroup",void 0),t([J()],fo.prototype,"selectedEntity",void 0),t([J()],fo.prototype,"editItem",void 0),t([J()],fo.prototype,"selectedItem",void 0),t([J()],fo.prototype,"addCondition",void 0),fo=t([G("scheduler-options-card")],fo);let go=class extends ie{constructor(){super(...arguments),this.selectedDomain="",this.titleOption="standard"}setConfig(e){this._config=e,this.titleOption=this.getTitleOption()}render(){return this.hass?I`
      <div class="card-config">
        <div class="header">Title of the card</div>
        <button-group
          .items=${["standard","hidden","custom"]}
          value=${this.getTitleOption()}
          @change=${this.updateTitleOption}
        >
        </button-group>
        ${"custom"==this.titleOption?I`
        <paper-input
          label="Custom title"
          .value=${this.getTitle()}
          .configValue=${"name"}
          @value-changed=${this.updateTitle}
        ></paper-input>
      `:""}
        
        <div class="header">Show all schedules</div>
        <div class="text-field">This sets the 'discover existing' parameter.<br> Disable if you want to use multiple scheduler-cards.</div>
        <button-group
          .items=${[{id:"true",name:"on"},{id:"false",name:"off"}]}
          value=${this.getDiscoveryOption()}
          @change=${this.updateDiscoveryOption}
        >
        </button-group>
        
        <div class="header">Time display</div>
        <button-group
          .items=${[{id:"false",name:"24 hours"},{id:"true",name:"AM/PM"}]}
          value=${this.getAmPmOption()}
          @change=${this.updateAmPmOption}
        >
        </button-group>
        
        <div class="header">Time step</div>
        <div class="text-field">Resolution (in minutes) for creating schedules</div>
        <variable-slider
          min=1
          max=30
          step=1
          value=${this.getTimeStepOption()}      
          unit=" min"
          ?optional=${!1}
          ?disabled=${!1}
          @change=${this.updateTimeStepOption}
        >
        </variable-slider>
        
        <div class="header">Included entities</div>
        <div class="text-field">Click on a group to open it.</div>
        ${this.getDomainSwitches()}
      </div>
    `:I``}getTitleOption(){return this._config&&this.hass?void 0===this._config.title?"standard":"string"==typeof this._config.title?"custom":0==this._config.title?"hidden":"standard":"standard"}getTitle(){return this._config&&this.hass?void 0===this._config.title?ls("scheduler"):"string"==typeof this._config.title?this._config.title:0==this._config.title?"":ls("scheduler"):ls("scheduler")}updateTitleOption(e){let t=e.target.value;if(!this._config||!this.hass)return;this.titleOption=t;let r=Object.assign({},this._config);"standard"==t?"title"in this._config&&delete r.title:"hidden"==t&&Object.assign(r,{title:!1}),this._config=r,je(this,"config-changed",{config:this._config})}updateTitle(e){if(!this._config||!this.hass)return;let t=Object.assign({},this._config),r=String(e.target.value);Object.assign(t,{title:r}),this._config=t,je(this,"config-changed",{config:this._config})}getDiscoveryOption(){if(!this._config||!this.hass)return;return!this._config.hasOwnProperty("discover_existing")||this._config.discover_existing}updateDiscoveryOption(e){let t="true"==e.target.value;if(!this._config||!this.hass)return;let r=Object.assign({},this._config);t?r.hasOwnProperty("discover_existing")&&delete r.discover_existing:Object.assign(r,{discover_existing:t}),this._config=r,je(this,"config-changed",{config:this._config})}getAmPmOption(){if(!this._config||!this.hass)return;return!!this._config.hasOwnProperty("am_pm")&&this._config.am_pm}updateAmPmOption(e){let t="true"==e.target.value;if(!this._config||!this.hass)return;let r=Object.assign({},this._config);t?Object.assign(r,{am_pm:t}):r.hasOwnProperty("am_pm")&&delete r.am_pm,this._config=r,je(this,"config-changed",{config:this._config})}getTimeStepOption(){if(!this._config||!this.hass)return;let e=this._config.hasOwnProperty("time_step")?this._config.time_step:10;return Number(e)}updateTimeStepOption(e){if(!this._config||!this.hass)return;let t=Object.assign({},this._config),r=Number(e.target.value);10==r&&t.hasOwnProperty("time_step")?delete t.time_step:Object.assign(t,{time_step:r}),this._config=t,je(this,"config-changed",{config:this._config})}getDomainSwitches(){if(!this._config||!this.hass)return;this._config.include&&this._config.include;const e=Object.keys(this.hass.states).filter(e=>!sa(e)).map(e=>aa(e,this.hass,{include:["*"]})).filter(e=>e&&e.actions.length);return e.map(e=>Se(e.id)).filter((e,t,r)=>r.indexOf(e)===t).map(t=>{let r=e.filter(e=>Se(e.id)==t).length;return r?I`
        <div class="row" @click=${()=>{this.toggleSelectDomain(t)}}>
          <ha-icon icon="${Bs(ta[t])}">
          </ha-icon>

          <div class="info">
            ${t}
            <div class="secondary">
              ${r} ${1==r?"entity":"entities"}
            </div>
          </div>
          <ha-icon-button icon="${this.selectedDomain==t?"mdi:chevron-down":"mdi:chevron-right"}">
          </ha-icon-button>
        </div>
        ${this.selectedDomain==t?I`
          <div class="divider"></div>
          ${this.getEntitySwitches(t)}
          <div class="divider"></div>          
        `:""}
      `:""})}getEntitySwitches(e){if(!this._config||!this.hass)return;let t=this._config.include?[...this._config.include]:[];return Object.entries(this.hass.states).filter(([t])=>Se(t)==e&&!sa(t)).map(([e,r])=>{let i=r.attributes.friendly_name||ke(e),s=t.includes(e);return I`

        <div class="row" @click=${()=>this.toggleSelectEntity(e)}>
          <state-badge
            .hass=${this.hass}
            .stateObj=${this.hass.states[e]}
          >
          </state-badge>
          <div class="info">
            ${i}
            <div class="secondary">
              ${e}
            </div>
          </div>
          <ha-switch 
            ?checked=${s}
          >
          </ha-switch>
        </div>
      `})}toggleSelectDomain(e){this._config&&this.hass&&(this.selectedDomain!=e?this.selectedDomain=e:this.selectedDomain="")}toggleSelectEntity(e){if(!this._config||!this.hass)return;let t=this._config.include?[...this._config.include]:[];t.includes(e)?t=t.filter(t=>t!=e):t.push(e),t.sort(),this._config=Object.assign(Object.assign({},this._config),{include:t}),je(this,"config-changed",{config:this._config})}static get styles(){return te`
      ${to}
      div.row {
        display: flex;
        align-items: center;
        flex-direction: row;
        cursor: pointer;
        margin: 10px 0px;
      }
      div.divider {
        height: 1px;
        background: var(--divider-color);
      }
      .info {
        margin-left: 16px;
        flex: 1 0 60px;
      }
      .info,
      .info > * {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .secondary {
        display: block;
        color: var(--secondary-text-color);
      }
      div.row ha-icon {
        padding: 8px;
        color: var(--paper-item-icon-color);
      }
      div.row state-badge {
        flex: 0 0 40px;
      }
      div.row ha-switch {
        padding: 13px 5px;
      }
    `}};t([J()],go.prototype,"hass",void 0),t([J()],go.prototype,"_config",void 0),t([J()],go.prototype,"selectedDomain",void 0),t([J()],go.prototype,"titleOption",void 0),go=t([G("scheduler-card-editor")],go),window.customCards=window.customCards||[],window.customCards.push({type:"scheduler-card",name:"Scheduler Card",description:"Card to manage schedule entities made with scheduler-component."}),console.info(`%c   SCHEDULER-CARD   \n%c   Version: ${"1.8.4".padEnd(8," ")}\n%c   Language: ${ds().padEnd(7," ")}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray","color: white; font-weight: bold; background: dimgray"),e.SchedulerCard=class extends ie{constructor(){super(...arguments),this._view=Ss.Overview,this.entries=[],this.actions=[],this.editItem=null,this.scheduleEntities=[]}static getConfigElement(){return document.createElement("scheduler-card-editor")}set hass(e){this.scheduleEntities=Object.keys(e.states).filter(e=>sa(e)),this._hass=e}shouldUpdate(e){const t=e.get("_hass");if(t&&1==e.size){const e=Object.keys(t.states).filter(e=>sa(e));return e.length!==this.scheduleEntities.length||(!!e.some((e,t)=>e!==this.scheduleEntities[t])||!!e.some(e=>t.states[e]!==this._hass.states[e]))}return!0}setConfig(e){!function(e){const t=eo.validate(Xn,e),r=[];if(t||eo.errors.forEach(e=>{let t="";const i=e.dataPath.substr(1).split("/"),s=i.pop();i.length&&(t+=`in ${i.join("/")} `),"type"==e.keyword&&(t+="type of "),s?s&&(t+=(isNaN(+s)?`'${s}'`:`[item ${s}]`)+" "):t+="card ",t+=e.message,e.params.hasOwnProperty("additionalProperty")&&(t+=` '${e.params.additionalProperty}'`),r.push(t.charAt(0).toUpperCase()+t.slice(1)+".")}),r.length)throw new Error(`Invalid configuration provided (${r.length} error(s)). ${r.join(" ")}`)}(e),this._config=e}getCardSize(){return this._hass&&this.scheduleEntities.length?6+this.scheduleEntities.length:6}render(){return this._hass&&this._config?this._view==Ss.Overview?I`
        <scheduler-entities-card
          .hass=${this._hass}
          .config=${this._config}
          @editClick=${this._editItemClick}
          @newClick=${this._addItemClick}
        >
        </scheduler-entities-card>
      `:this._view==Ss.NewSchedule?I`
        <scheduler-editor-card
          .hass=${this._hass}
          .config=${this._config}
          @nextClick=${this._confirmItemClick}
          @cancelClick=${this._cancelEditClick}
        >
        </scheduler-editor-card>
      `:this._view==Ss.TimePicker||this._view==Ss.TimeScheme?I`
        <scheduler-timepicker-card
          .hass=${this._hass}
          .config=${this._config}
          .entries=${this.entries}
          .entity=${this.entity}
          .actions=${this.actions}
          ?timeslots=${this._view==Ss.TimeScheme}
          ?editItem=${null!==this.editItem}
          @cancelClick=${this._cancelEditClick}
          @saveClick=${this._saveItemClick}
          @optionsClick=${this._gotoOptionsClick}
          @deleteClick=${this._deleteItemClick}
        >
        </scheduler-timepicker-card>
      `:this._view==Ss.Options?I`
      <scheduler-options-card
        .hass=${this._hass}
        .config=${this._config}
        .entries=${this.entries}
        .friendlyName=${this.friendlyName}
        @cancelClick=${this._cancelEditClick}
        @saveClick=${e=>this._optionsBackClick(e,!0)}
        @backClick=${this._optionsBackClick}
      >
      </scheduler-timescheme-card>
    `:I``:I``}_addItemClick(){this._view=Ss.NewSchedule,this.editItem=null,this.friendlyName=void 0}_cancelEditClick(){this._view=Ss.Overview,this.editItem=null}_confirmItemClick(e){if(!this._hass||!this._config)return;const t=e.detail.entity;this.entity=aa(t,this._hass,this._config);const r=e.detail.action;"make_scheme"!=r?(this.entries=[{entity:e.detail.entity,action:r,time:{value:fs("12:00")},days:{type:hs.Daily}}],this._view=Ss.TimePicker,this.actions=[Js(this.entity,{service:r})]):(this.entries=[{entity:e.detail.entity,action:"",time:{value:fs("00:00")},endTime:{value:fs("08:00")},days:{type:hs.Daily}},{entity:e.detail.entity,action:"",time:{value:fs("08:00")},endTime:{value:fs("16:00")},days:{type:hs.Daily}},{entity:e.detail.entity,action:"",time:{value:fs("16:00")},endTime:{value:1440},days:{type:hs.Daily}}],this.actions=this.entity.actions.map(Ws).filter(e=>e),this._view=Ss.TimeScheme)}_saveItemClick(e){if(!this._hass||!this._config)return;e&&(this.entries=e.detail);const t=[],r=[],i=[],s={};this.entries.forEach(e=>{var a;if(!e.action||!e.entity)return;const n=aa(e.entity,this._hass,this._config),o=Js(n,{service:e.action}),c=function(e,t){return t.variable&&e.variable?t.variable.type==xe.Level&&e.variable.type==xe.Level?t.variable.enabled?{[e.variable.field]:Number(t.variable.value)}:{}:{[e.variable.field]:String(t.variable.value)}:{}}(o,e),l={entity:n.id,service:Se(o.service)?o.service:`${Se(n.id)}.${o.service}`,service_data:Object.assign(Object.assign({},o.service_data||{}),c)};let d=t.findIndex(e=>Ks(e)==Ks(l));-1==d&&(d=t.push(l)-1);const u={actions:[d]};e.time.event?e.time.event&&Object.assign(u,{time:{event:ys(e.time.event),offset:ms(e.time.value).time}}):Object.assign(u,{time:ms(e.time.value).time}),e.endTime&&(e.time.event?e.time.event&&Object.assign(u,{end_time:{event:ys(e.endTime.event),offset:ms(e.endTime.value).time}}):Object.assign(u,{end_time:ms(e.endTime.value).time}));let h="daily";if(e.days.type==hs.Workday?h="workday":e.days.type==hs.Weekend?h="weekend":e.days.type==hs.Custom&&(h="custom"),e.days.type==hs.Custom?Object.assign(u,{days:{type:h,list:e.days.custom_days}}):Object.assign(u,{days:{type:h}}),"conditions"in e){const t=[];null===(a=e.conditions)||void 0===a||a.items.forEach(e=>{let r=i.findIndex(t=>t===e);r<0&&(r=i.push(e)-1),t.push(r)}),Object.assign(u,{conditions:{list:t,type:e.conditions.type}})}if(e.options){const t=[];Object.entries(e.options).forEach(([e,r])=>{let i=Object.entries(s).findIndex(([t,i])=>({[e]:r}==={[t]:i}));i<0&&(Object.assign(s,{[e]:r}),i=Object.keys(s).length-1),t.push(i)}),Object.assign(u,{options:t})}r.push(u)});const a={entries:r,actions:t};i.length&&Object.assign(a,{conditions:i}),this.friendlyName&&Object.assign(a,{name:this.friendlyName}),Object.keys(s).length&&Object.assign(a,{options:s}),this.editItem?this._hass.callService("scheduler","edit",Object.assign(a,{entity_id:this.editItem})):this._hass.callService("scheduler","add",a),this.editItem=null,this._view=Ss.Overview}_deleteItemClick(){const e=this.editItem;this._hass.callService("scheduler","remove",{entity_id:e}),this.editItem=null,this._view=Ss.Overview}_editItemClick(e){if(!this._hass||!this._config)return;const t=this._hass.states[e.detail];if(!t)return;const r=t.attributes.entries.map(js),i=Gs(t.attributes.actions[0]).entity;if(this.entity=aa(i,this._hass,this._config),!this.entity){const e={id:i,name:"(unknown entity)",icon:"help-circle-outline",actions:t.attributes.actions.map(Gs).map(e=>Ws(qs(e,["entity"])))};this.entity=e}this.actions=this.entity.actions.map(e=>Ws(e)).filter(e=>e);const s=t.attributes.conditions||[],a=t.attributes.options||{};this.entries=r.map(e=>{const r=e.actions.filter(e=>e<t.attributes.actions.length).map(e=>Gs(t.attributes.actions[e])).shift(),i=Js(this.entity,r);if(!this.actions.find(e=>e.id==i.id)){let e=[...this.actions];e.push(i),this.actions=e}const n={time:e.time,endTime:e.endTime,days:e.days,entity:this.entity.id,action:i.id};if(i.variable&&r.service_data&&i.variable.field in r.service_data)if(i.variable.type==xe.Level){const e={type:xe.Level,value:Number(r.service_data[i.variable.field]),enabled:!0};Object.assign(n,{variable:e})}else{const e={type:xe.List,value:String(r.service_data[i.variable.field])};Object.assign(n,{variable:e})}return e.conditions&&e.conditions.items.length&&Object.assign(n,{conditions:{type:e.conditions.type,items:e.conditions.items.filter(e=>s.length>=e-1).map(e=>s[e])}}),e.options&&Object.keys(e.options).length&&Object.assign(n,{options:e.options.reduce((e,t)=>Object.assign(e,Us(a,[Object.keys(a)[t]])),{})}),n}),this.editItem=t.entity_id,this.friendlyName=t.attributes.friendly_name,this.entries.every(e=>e.endTime)?(this._view=Ss.TimeScheme,this.entries=function(e){e.sort((e,t)=>e.time.value>t.time.value?1:-1),e=e.map(e=>e.endTime.value<e.time.value?Object.assign(e,{endTime:{value:e.endTime.value+1440}}):e);let t=0;for(let r=0;r<e.length;r++){const i=e[r];i.time.value>t&&e.splice(r,0,Object.assign({time:{value:t},endTime:{value:i.time.value}},Us(i,["entity","days","conditions","options"]))),t=i.endTime.value}return t<1440&&e.push(Object.assign({time:{value:t},endTime:{value:1440}},Us(e[0],["entity","days","conditions","options"]))),e}(this.entries)):(this.actions=this.actions.filter(e=>e.id==this.entries[0].action),this._view=Ss.TimePicker)}_gotoOptionsClick(e){this.entries=e.detail,this._view=Ss.Options}_optionsBackClick(e,t){this.entries=e.detail.entries,this.friendlyName=e.detail.friendlyName,this.entries.every(e=>e.endTime)?this._view=Ss.TimeScheme:this._view=Ss.TimePicker,t&&this._saveItemClick()}},t([J()],e.SchedulerCard.prototype,"_hass",void 0),t([J()],e.SchedulerCard.prototype,"_view",void 0),t([J()],e.SchedulerCard.prototype,"entries",void 0),t([J()],e.SchedulerCard.prototype,"entity",void 0),t([J()],e.SchedulerCard.prototype,"actions",void 0),t([J()],e.SchedulerCard.prototype,"friendlyName",void 0),e.SchedulerCard=t([G("scheduler-card")],e.SchedulerCard)}({});
