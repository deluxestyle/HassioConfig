x-anchors:
  style: &style
      style:
        .: |
          :host {
            --secondary-background-color: rgba(0,0,0,0);
            --ha-card-box-shadow: none;
            --ha-card-border-radius: 0px;
          }

title: System
path: system
icon: mdi:cog-outline
type: custom:masonry-layout
visible:
  - user: b6464705fc4e405abce8058610b4bcc7
layout:
  max_cols: 2
  width: 330
cards:
  - type: grid
    columns: 2
    square: false
    cards:
      - type: 'custom:button-card'
        name: Mitteilung entf.
        entity: script.notify_clean_messages
        template:
          - script
      - type: 'custom:button-card'
        entity: script.notify_clean_badge
        name: Badge entf.
        template:
          - script
  # - type: entities
  #   entities:
  #     - type: 'custom:paper-buttons-row'
  #       buttons:
  #         - entity: script.notify_clean_messages
  #           name: Mitteilung löschen
  #         - entity: script.notify_clean_badge
  #           name: Badge löschen      
  - type: entities
    show_header_toggle: false
    entities:
      - entity:  sensor.updater_core
        type: custom:multiple-entity-row
        name: Core
        show_state: false
        icon: mdi:update
        entities:
          - attribute: current_version
            name: Installiert
          - attribute: newest_version
            name: Verfügbar
        tap_action: 
          action: fire-dom-event
          browser_mod:
            command: navigate
            navigation_path: /hassio
      - entity:  sensor.updater_supervisor
        type: custom:multiple-entity-row
        name: Supervisor
        icon: mdi:update
        show_state: false
        entities:
          - attribute: current_version
            name: Installiert
          - attribute: newest_version
            name: Verfügbar
        tap_action: 
          action: fire-dom-event
          browser_mod:
            command: navigate
            navigation_path: /hassio
      - entity:  sensor.updater_supervisor
        type: custom:multiple-entity-row
        name: Add-ons
        icon: mdi:update
        tap_action: 
          action: fire-dom-event
          browser_mod:
            command: navigate
            navigation_path: /hassio
      - entity: sensor.hacs
        name: Hacs
        tap_action: 
          action: fire-dom-event
          browser_mod:
            command: navigate 
            navigation_path: /hacs
      - type: custom:fold-entity-row
        padding: 5
        head:
          type: section
          label: Details
        entities:
          - entity: sensor.anzahl_automationen
            tap_action:
              action: navigate
              navigation_path: /config/automation/dashboard
          - entity: sensor.anzahl_skripte
            tap_action:
              action: navigate
              navigation_path: /config/script/dashboard
          - entity: sensor.online_time
            name: Hass online
            icon: mdi:home-assistant
          - entity: sensor.last_boot
            name: Raspi online
            icon: mdi:raspberry-pi
  - type: glance
    columns: 4
    show_name: false
    entities:
      - entity: sensor.processor_use
        name: CPU   
        style: |
            :host {
              color: 
              {% if (states('sensor.processor_use')  | int) > 30 %}
                red
              {% endif %}
              ;
            }     
      - entity: sensor.memory_use_percent
        name: Memory %
      - entity: sensor.swap_use_percent
        name: Swap %
        icon: mdi:file-swap         
      - entity: sensor.disk_use_percent
        name: Disk %     
      - entity: sensor.cpu_temperature
        icon: mdi:thermometer
        name: CPU Temp
        style: |
            :host {
              color: 
              {% if (states('sensor.cpu_temperature')  | int) > 65 %}
                red
              {% endif %}
              ;
            }
      - entity: sensor.memory_use
        name: Memory
      - entity: sensor.swap_use
        name: Swap
        icon: mdi:file-swap  
      - entity: sensor.disk_use
        name: Disk 
      - entity: sensor.influxdb_database_size
        icon: mdi:database-outline
      - entity: sensor.mariadb_database_size
        icon: mdi:database 
      - entity: sensor.samba_backup
        icon: mdi:content-save-all
        double_tap_action:
          action: navigate
          navigation_path: /hassio/backups          
  - type: entities
    entities:
      - entity: automation.batterie_niedriger_batteriestand
        icon: mdi:battery-alert
        name: Benachrichtung Batteriestand
        double_tap_action:
          action: navigate
          navigation_path: /config/automation/edit/1630350328215
  - type: entities
    entities:
      - entity: switch.ds118
        icon: mdi:nas
        tap_action:
          action: toggle
          confirmation:
            text: NAS ein-/ausschalten?
        double_tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            title: Synology Stats
            <<: *style
            card:
              type: custom:auto-entities
              card:
                type: entities 
              filter:
                  include:
                    - entity_id: "sensor.ds118_*"